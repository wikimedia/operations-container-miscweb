version: v4
base: docker-registry.wikimedia.org/httpd
runs: { insecurely: true }

variants:
  test:
    copies:
      - from: local
        source: test/htdocs
        destination: var/www/html
      - from: local
        source: test/httpd.conf
        destination: ./apache2.conf
      - from: local
        source: ./entrypoint.sh
        destination: ./entrypoint.sh
    entrypoint: [./entrypoint.sh]
  staging:
    copies:
      - from: local
        source: staging/htdocs
        destination: var/www/html
      - from: local
        source: staging/httpd.conf
        destination: ./apache2.conf
      - from: local
        source: ./entrypoint.sh
        destination: ./entrypoint.sh
    entrypoint: [./entrypoint.sh]
  production:
    copies:
      - from: local
        source: production/htdocs
        destination: var/www/html
      - from: local
        source: production/httpd.conf
        destination: ./apache2.conf
      - from: local
        source: ./entrypoint.sh
        destination: ./entrypoint.sh
    entrypoint: [./entrypoint.sh]
