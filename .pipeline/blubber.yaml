version: v4
base: docker-registry.wikimedia.org/httpd

runs:
  # www-data has uid/gid 33
  uid: 33
  gid: 33
  insecurely: true

variants:
  test:
    copies:
      - from: local
        source: test/htdocs
        destination: var/www/html
      - from: local
        source: test/httpd.conf
        destination: usr/local/apache2/conf/httpd.conf
      - from: local
        source: test/httpd.conf
        destination: etc/apache2/apache2.conf
  staging:
    copies:
      - from: local
        source: staging/htdocs
        destination: var/www/html
      - from: local
        source: staging/httpd.conf
        destination: usr/local/apache2/conf/httpd.conf
      - from: local
        source: test/httpd.conf
        destination: etc/apache2/apache2.conf
  production:
    copies:
      - from: local
        source: production/htdocs
        destination: var/www/html
      - from: local
        source: production/httpd.conf
        destination: usr/local/apache2/conf/httpd.conf
      - from: local
        source: test/httpd.conf
        destination: etc/apache2/apache2.conf
