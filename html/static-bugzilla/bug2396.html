<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 2396 &ndash; PATCH: fix for shared user table with $wgSharedDB</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://old-bugzilla.wikimedia.org/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=2396&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=2396">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=2396">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=2396">



    
    <link href="skins/standard/global.css?1389015166"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/global.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/show_bug.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="extensions/Voting/web/style.css?1389015166" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1389015166" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="skins/contrib/Wikimedia/global.css?1402013050" rel="stylesheet"
        type="text/css" title="Wikimedia"><link href="skins/contrib/Wikimedia/show_bug.css?1402441020" rel="stylesheet"
        type="text/css" title="Wikimedia">

      <link rel="stylesheet" href="skins/contrib/Wikimedia/vector.css?1403109885" media="screen"
            title="Wikimedia" />


    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1389015166"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1389015166"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1389015166"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1389015166"></script><script type="text/javascript" src="js/yui/json/json-min.js?1389015166"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1389015166"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1389015166"></script><script type="text/javascript" src="js/global.js?1389015166"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 15
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 2396 – PATCH: fix for shared user table with $wgSharedDB",  
                             "show_bug.cgi?id=2396" );
        document.title = "Bug 2396 – PATCH: fix for shared user table with $wgSharedDB";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 2396 – PATCH: fix for shared user table with $wgSharedDB", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1389015166"></script><script type="text/javascript" src="js/field.js?1389015166"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class="old-bugzilla-wikimedia-org bz_bug bz_status_RESOLVED bz_product_MediaWiki bz_component_Database bz_bug_2396 yui-skin-sam">



<!-- If custom Wikimedia skin -->
   <div id="page-base" class="noprint"></div>
                <div id="head-base" class="noprint"></div>
                <!-- content -->
                <div id="content-container" >
                        <a id="top"></a>
                        <!-- bodyContent -->
                        <div id="bodyContent">
      <p class="header_addl_info">Last modified: 2010-05-15 16:03:46 UTC</p>

 <!-- If custom Wikimedia skin -->
<h1>Wikimedia Bugzilla is closed!</h1><div id="message" style="text-align: center; color: black">Wikimedia has <a href="https://www.mediawiki.org/wiki/Phabricator/versus_Bugzilla">migrated from Bugzilla to Phabricator</a>. Bug reports should be created and updated in <a href="https://phabricator.wikimedia.org">Wikimedia Phabricator</a> instead. Please <a href="https://www.mediawiki.org/wiki/Phabricator/Help#Creating_your_account">create an account in Phabricator and add your Bugzilla email address</a> to it.<br>Wikimedia Bugzilla is read-only. If you try to edit or create any bug report in Bugzilla you will be shown an intentional error message.<br>In order to access the Phabricator task corresponding to a Bugzilla report, just remove "static-" from its URL.<br>You could still run searches in Bugzilla or access your <a href="https://old-bugzilla.wikimedia.org/page.cgi?id=voting%2Fuser.html">list of votes</a> but bug reports will obviously not be up-to-date in Bugzilla.</div>

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2010-05-15 16:03:46">
  <input type="hidden" name="longdesclength" value="63">
  <input type="hidden" name="id" value="2396">
  <input type="hidden" name="token" value="1419360431-3NLNvkG2bddD4ApcRQ85SDNVYRTrh5MN3M2Zf2d4sfY">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=2396"><b>Bug&nbsp;2396</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">PATCH: fix for shared user table with $wgSharedDB</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>PATCH: fix for shared user table with $wgSharedDB
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('PATCH: fix for shared user table with $wgSharedDB', '');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >MediaWiki</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr>
    
    <td class="field_label">
      <label for="component">
        <a href="describecomponents.cgi?product=MediaWiki">
        Component:</a>
      </label>
    </td>
    
    <td>Database
    
    (<a href="buglist.cgi?component=Database&product=MediaWiki&resolution=---"
      target="new_window">Other open bugs</a>)
    
    </td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>1.13.x
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">All
       All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Normal
       normal<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=2396">5 
            votes</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=2396#vote_2396">vote</a>)
  </span>
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=fields.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Nobody - You can work on this!</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'wikibugs-l\x40lists.wikimedia.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
          <a href="http://meta.wikimedia.org/wiki/User:FireDragon"><span title="http://meta.wikimedia.org/wiki/User:FireDragon">http://meta.wikimedia.org/wiki/User:F...
        </span></a>
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">crosswiki, patch
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label for="duplicates">Duplicates</label>:
    </th>
    <td class="field_value" colspan="2">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - $wgSharedDB can not state table prefix for shared user table"
   href="show_bug.cgi?id=9695">9695</a> 
      </span>
      (<a href="buglist.cgi?bug_id=9695">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=2396&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=2396">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2005-06-12 20:34 UTC by <span class="vcard"><span class="fn">FireDragon</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2010-05-15 16:03 UTC 
      (<a href="show_activity.cgi?id=2396">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>12 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="bugspam.Callek">bugspam.Callek</option>
                <option value="bugzilla.wikimedia">bugzilla.wikimedia</option>
                <option value="chemicalbit">chemicalbit</option>
                <option value="deb">deb</option>
                <option value="gangleri">gangleri</option>
                <option value="gregory.szorc">gregory.szorc</option>
                <option value="j">j</option>
                <option value="koeglstefan">koeglstefan</option>
                <option value="kyle">kyle</option>
                <option value="mediawiki-bugs">mediawiki-bugs</option>
                <option value="stephane.brunner">stephane.brunner</option>
                <option value="zbigniew.braniecki">zbigniew.braniecki</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_browser">


  <a 
      title="Please set this if the described problem seems to happen only in a specific web browser."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_browser"
  >Web browser:</a>

</th>
  <td class="field_value "
      id="field_container_cf_browser"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_platform">


  <a 
      title="The Mobile Platform the described problem was experienced on."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_platform"
  >Mobile Platform:</a>

</th>
  <td class="field_value "
      id="field_container_cf_platform"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_hugglebeta">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_hugglebeta"
  >Assignee Huggle Beta Tester:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_hugglebeta"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=603"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch implementig the proposed code (untested!)</span></b></a>

          <span class="bz_attach_extra_info">
              (1.05 KB,
                patch)

            <br>
            <a href="#attach_603"
               title="Go to the comment associated with the attachment">2005-06-12 20:56 UTC</a>,

            <span class="vcard"><span class="fn">Daniel Kinzler</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=603&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=634"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch v2</span></b></a>

          <span class="bz_attach_extra_info">
              (2.33 KB,
                patch)

            <br>
            <a href="#attach_634"
               title="Go to the comment associated with the attachment">2005-06-22 14:57 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=634&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=707"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch v3</span></b></a>

          <span class="bz_attach_extra_info">
              (2.65 KB,
                patch)

            <br>
            <a href="#attach_707"
               title="Go to the comment associated with the attachment">2005-07-13 23:17 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=707&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=759"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch v.3 against the trunk</span></b></a>

          <span class="bz_attach_extra_info">
              (2.01 KB,
                patch)

            <br>
            <a href="#attach_759"
               title="Go to the comment associated with the attachment">2005-08-03 17:06 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=759&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a5" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=760"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch ver 4</span></b></a>

          <span class="bz_attach_extra_info">
              (1.77 KB,
                patch)

            <br>
            <a href="#attach_760"
               title="Go to the comment associated with the attachment">2005-08-04 13:27 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=760&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a6" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=1653"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch against 1.6.5</span></b></a>

          <span class="bz_attach_extra_info">
              (1.47 KB,
                patch)

            <br>
            <a href="#attach_1653"
               title="Go to the comment associated with the attachment">2006-05-04 21:34 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=1653&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a7" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=1668"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch against 1.6.5 v2</span></b></a>

          <span class="bz_attach_extra_info">
              (1.51 KB,
                patch)

            <br>
            <a href="#attach_1668"
               title="Go to the comment associated with the attachment">2006-05-06 01:07 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=1668&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a8" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=1669"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">patch against 1.6.5 v3</span></b></a>

          <span class="bz_attach_extra_info">
              (1.47 KB,
                patch)

            <br>
            <a href="#attach_1669"
               title="Go to the comment associated with the attachment">2006-05-06 01:10 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=1669&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a9" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=2112"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Allows you to define which tables are shared</span></b></a>

          <span class="bz_attach_extra_info">
              (2.31 KB,
                patch)

            <br>
            <a href="#attach_2112"
               title="Go to the comment associated with the attachment">2006-07-16 20:42 UTC</a>,

            <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=2112&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a10" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=2119"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Share any table (against r15716)</span></b></a>

          <span class="bz_attach_extra_info">
              (2.92 KB,
                patch)

            <br>
            <a href="#attach_2119"
               title="Go to the comment associated with the attachment">2006-07-18 02:53 UTC</a>,

            <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=2119&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a11" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=2128"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Share any table (against r15716)</span></b></a>

          <span class="bz_attach_extra_info">
              (2.92 KB,
                patch)

            <br>
            <a href="#attach_2128"
               title="Go to the comment associated with the attachment">2006-07-20 05:17 UTC</a>,

            <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=2128&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a12" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=2140"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Shared tables as array map (against r15780)</span></b></a>

          <span class="bz_attach_extra_info">
              (3.44 KB,
                patch)

            <br>
            <a href="#attach_2140"
               title="Go to the comment associated with the attachment">2006-07-22 17:51 UTC</a>,

            <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=2140&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a13" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=3610"
               title="View the content of the attachment">
          <b>Gregory's patch updated to tip</b></a>

          <span class="bz_attach_extra_info">
              (4.09 KB,
                patch)

            <br>
            <a href="#attach_3610"
               title="Go to the comment associated with the attachment">2007-05-10 00:27 UTC</a>,

            <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=3610&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a14" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=4101"
               title="View the content of the attachment">
          <b>update to trunk to fix usage of $wgSharedDB.</b></a>

          <span class="bz_attach_extra_info">
              (669 bytes,
                patch)

            <br>
            <a href="#attach_4101"
               title="Go to the comment associated with the attachment">2007-09-12 07:58 UTC</a>,

            <span class="vcard"><span class="fn">John Joseph Bachir</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=4101&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (12)
        </span>
        <a href="attachment.cgi?bugid=2396&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1389015166" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">FireDragon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-12 20:34:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Please see onto my page for more info too: <a href="http://meta.wikimedia.org/wiki/User:FireDragon">http://meta.wikimedia.org/wiki/User:FireDragon</a>
! Sorry for my bad english !
I have change the file '\includes\Database.php' at line 1003 to 1019

My new code is:
&lt;CODE&gt;
	function tableName( $name ) {
		global $wgSharedDB;
		# Skip quoted literals
		if ( $name{0} != '`' ) {
			if ( isset( $wgSharedDB ) &amp;&amp; 'user' == $name ) {
				$name = $wgSharedDB . $name;
			} else {
				if ( $this-&gt;mTablePrefix !== '' &amp;&amp;  strpos( '.', $name ) === 
false ) {
					$name = &quot;{$this-&gt;mTablePrefix}$name&quot;;
				} else {
					# Standard quoting
					$name = &quot;`$name`&quot;;
				}
			}
		}
		return $name;
	}
&lt;/CODE&gt;

I have change the 'IF'- enquiry position and add a 'ELSE'.
A example: I have install 2 wikis (local) with the prefix 'en_' and 'de_'
Then I change the 'Database.php' with my code.
In the 'LocalSettings.php' have change to:
Sample code for the english mediawiki folder !
&lt;CODE&gt;
$wgDBprefix         = &quot;en_&quot;;
$wgSharedDB         = &quot;de_&quot;;
&lt;/CODE&gt;
So you can now use many other mediawiki's folder with other language
And the user must now! only one to register for all mediawiki's on the same server withe the same 
database name.
I test it now on my webserver in the next time the at www.wikipage.de

I use not the official mediawiki- software! I use the 'MediaWiki 1.5alpha1 +ENotif/EConfirm v3.27 
+AutoLogin v1.1' from <a href="http://meta.wikimedia.org/wiki/Email_notification_%28documentation%29#Download">http://meta.wikimedia.org/wiki/Email_notification_%28documentation%29#Download</a>
Thats a very cool and good Extensions !!!</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Kinzler</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-12 20:56:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=603" name="attach_603" title="patch implementig the proposed code (untested!)">attachment 603</a> <a href="attachment.cgi?id=603&amp;action=edit" title="patch implementig the proposed code (untested!)">[details]</a></span>
patch implementig the proposed code (untested!)

I have made the code proposed above into a patch against the current CVS HEAD.
I have *not* tested this, so your milage may vary.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">FireDragon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-16 22:17:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Test-Wiki for this patch, see at <a href="http://www.wikipage.de/en/index.php/User:FireDragon">http://www.wikipage.de/en/index.php/User:FireDragon</a> (english-page) and 
<a href="http://www.wikipage.de/de/index.php/User:FireDragon">http://www.wikipage.de/de/index.php/User:FireDragon</a> (german-page)</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-22 14:57:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=634" name="attach_634" title="patch v2">attachment 634</a> <a href="attachment.cgi?id=634&amp;action=edit" title="patch v2">[details]</a></span>
patch v2

Hi.
We're working on similar issue for Developer Mozilla Center
(<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=296085">https://bugzilla.mozilla.org/show_bug.cgi?id=296085</a>).
I wrote a patch for MediaWiki 1.4.5, and it seems to work better than one
attached here.
The patch from this bug still has a bug with strpos('.',$name) - copare to
<a href="http://pl.php.net/manual/en/function.strpos.php">http://pl.php.net/manual/en/function.strpos.php</a> . 
Our patch also solves the issue with table prefixes.

Can I ask for some kind of review or sth?</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">lɛʁi לערי ריינהארט</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-06-25 03:11:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Halló!

I was wondering why we could *not* lock the database for one of the 6 wikis at
<a href="http://www.wikipage.de/en/index.php/Main_Page">http://www.wikipage.de/en/index.php/Main_Page</a> . I understand that the user table
is shared and this could cause some problems.

Please verify if the database can be locked for individual wikis. If so what
would be the procedure?

Regards Reinhardt [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=user%3Agangleri">user:gangleri</a>]]</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-07-13 23:17:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=707" name="attach_707" title="patch v3">attachment 707</a> <a href="attachment.cgi?id=707&amp;action=edit" title="patch v3">[details]</a></span>
patch v3

I updated the patch. There was a small bug which made unable adding someone to
admins. Now its fixed.</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 17:06:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=759" name="attach_759" title="patch v.3 against the trunk">attachment 759</a> <a href="attachment.cgi?id=759&amp;action=edit" title="patch v.3 against the trunk">[details]</a></span>
patch v.3 against the trunk

This is the patch against the trunk.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 17:39:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >FYI: This patch is widely used on developer.mozilla.org and it works ok.</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">lɛʁi לערי ריינהארט</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-03 19:46:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hallo!

I would like to add a small note based on &quot;history&quot; as the test configuration
for 6+2 languages was lost.

Please check if you need to apply the patch *before* users log in / sign in to
wikis newly added to the wiki group.

What happened:
There where test wikis using different LanguageXx.php as de en eo it ja ro and
about 20 registred users.
Then two new wikis fr and la where set up.
The seccond user signing in to the new wikis (user id #2) from fr and la was not
identical with user id #2 from the first wikis.
User id #2 made some hundred edits.
Then the patch was applied.
This was resulting in the strange situation that user id #2 from the first group
of wikis was the creator of the pages, had them on his watchlist etc. etc.

Recommended workaround. No user should sign in before the (original / earlier)
patch is applied to a newly added wiki.

Sorry for not reporting this before.

Best regards Reinhardt [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=user%3Agangleri">user:gangleri</a>]]</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 06:39:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Well. This functionality should be used with new wikis. For already existing
wikis I wrote a migration patch -
(<a href="https://bugzilla.mozilla.org/attachment.cgi?id=189544">https://bugzilla.mozilla.org/attachment.cgi?id=189544</a>)</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-08-04 13:27:38 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=760" name="attach_760" title="patch ver 4">attachment 760</a> <a href="attachment.cgi?id=760&amp;action=edit" title="patch ver 4">[details]</a></span>
patch ver 4

Patch for trunk with fixed whitespaces and var names.</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-10-22 21:40:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Looks good except the user_newtalk bit which appears clearly incorrect. Newtalk is 
per-wiki, since talk pages are per-wiki. Is there some reason for that, or could it 
be cleaned up?

Removing patch, need-review keywords.</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2005-10-23 11:59:04 UTC
        </span>
      </div>



<pre class="bz_comment_text" >no problem, I wasn't sure how it should be solved. Can we check in this patch
(without user_newtalk) then?</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-04 21:34:17 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=1653" name="attach_1653" title="patch against 1.6.5">attachment 1653</a> <a href="attachment.cgi?id=1653&amp;action=edit" title="patch against 1.6.5">[details]</a></span>
patch against 1.6.5

patch updated to 1.6.5.

It *has* review+, what blocks us from checking it in?</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-05 01:40:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Doesn't appear to work (tried merging on trunk).

I set:
$wgSharedDB = &quot;onefive&quot;;
(left $wgSharedDBPrefix null)

Queries end up with bogus escaping like this:
... FROM ``onefive`.`user`` WHERE user_id = '1' LIMIT 1 

which results in SQL errors.
</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-05 11:06:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >investigating</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-05 18:40:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Brion: can you give me steps to reproduce it? It works for me.</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-05 20:40:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >1) Merge patch on trunk
2) Leave all table prefixes blank as default
3) Set $wgSharedDB to &quot;shareduser&quot;
4) Try to log in

kabooms like so:
SELECT user_id FROM ``shareduser`.`user`` WHERE user_name = 'WikiSysop' LIMIT 1
</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-06 01:07:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=1668" name="attach_1668" title="patch against 1.6.5 v2">attachment 1668</a> <a href="attachment.cgi?id=1668&amp;action=edit" title="patch against 1.6.5 v2">[details]</a></span>
patch against 1.6.5 v2

ouch! Thanks, I screwed last patch. It missed } else { statement. Fixed in this
patch</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-06 01:10:04 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=1669" name="attach_1669" title="patch against 1.6.5 v3">attachment 1669</a> <a href="attachment.cgi?id=1669&amp;action=edit" title="patch against 1.6.5 v3">[details]</a></span>
patch against 1.6.5 v3

grr, removed debug value from DefaultSettings.php</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-05-06 19:05:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This looks like it should work, though it'll be incompatible
with existing use of a common table prefix for all databases.
Might it be cleaner to let it use the default table index
if $wgSharedDBPrefix isn't set?</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-16 07:00:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I could really use the latest version of this patch in the trunk.  It definitely
makes sense to be able to support both a shared user database AND a shared user
table.

I could also use a shared user_groups table.  However, once you've done 2, you
might as well do all.  Perhaps there is a need for a run-time hook that can
change the table names based on global variables.  This could be used for other
tables, like interwiki, math, etc.</pre>
    </div><div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-16 20:42:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=2112" name="attach_2112" title="Allows you to define which tables are shared">attachment 2112</a> <a href="attachment.cgi?id=2112&amp;action=edit" title="Allows you to define which tables are shared">[details]</a></span>
Allows you to define which tables are shared

This patch trumps the current purpose of this patch by allowing you to
explicitly define which tables are shared.  It allows you to specify an
optional prefix for the shared tables as well as an optional other database.

It makes sense to share more than one table because there are multiple tables
that could be shared between a wiki family.  These include:

user, user_groups, ip_blocks, math, interwiki, and possibly others.</pre>
    </div><div id="c23" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-17 06:48:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The only difference between my patch and Gregory's is the ability to select
tables to share. I'm not convinced if we really need this, but if we do I can
review this patch.

Brion: please, make up your mind, what do we want from this patch, I'll try to
make sure we have it and let's get it into trunk, it lasts so long in the
pre-checkin universe.</pre>
    </div><div id="c24" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-17 07:00:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >It needs to 1) work and 2) not break for our existing users
who use this feature, such as Wikia.</pre>
    </div><div id="c25" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-17 16:01:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >To be honest, I never reviewed my patch, but I think it should work.  It is
small enough to debug easily.  I can actually test it later today.

Anyway, the current method ($wgSharedDB) is marked as EXPERIMENTAL.  IMO, this
could be deprecated and people shouldn't complain because they were using an
EXPERIMENTAL feature.  In reality, I know, I know...

The transition from wgSharedDB to my patch just involves changing a variable in
LocalSettings.php.  Also, it would be possible to have my patch look for the
presence of $wgSharedDB.  If it is set, $wgSharedTables is automatically
populated with 'user'.

I still argue that we need the ability to share any table we want.  Obviously,
we would never share some tables, like page, etc, but you never know who has a
usage case for sharing a table, especially when it comes to custom extensions. 
If you are opering multiple wikis outside of the same database, it really
doesn't make any sense to have separate math, ip_block, and interwiki tables (at
least in some cases).</pre>
    </div><div id="c26" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-17 17:10:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Gregory: I do agree with you, the problem is how to handle it smoothly.

I'll take a deeper look today, and try to come with some solution.</pre>
    </div><div id="c27" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-18 02:53:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=2119" name="attach_2119" title="Share any table (against r15716)">attachment 2119</a> <a href="attachment.cgi?id=2119&amp;action=edit" title="Share any table (against r15716)">[details]</a></span>
Share any table (against <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/15716" title="revision 15716 in SVN">r15716</a>)

This is my previous patch except it will support users of the old method
($wgSharedDB) without any configuration changes.  This patch is still untested.</pre>
    </div><div id="c28" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 05:17:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=2128" name="attach_2128" title="Share any table (against r15716)">attachment 2128</a> <a href="attachment.cgi?id=2128&amp;action=edit" title="Share any table (against r15716)">[details]</a></span>
Share any table (against <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/15716" title="revision 15716 in SVN">r15716</a>)

Added forgotten ` ` around table names.  I've tested this against 1.7.1 and it
works fine.  Currently sharing user, user_groups, interwiki, and math tables
between two wikis ;)</pre>
    </div><div id="c29" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 05:21:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm a little leery of this kind of magic:

+if ($wgSharedDB &amp;&amp; !$wgSharedTableDatabase) {
+	$wgSharedTables[] = 'user';
+}

Configuration settings that change violate the principle of least surprise; 
while we have a few such settings already, I'd prefer not to add more if it 
can be avoided more simply.

Perhaps it would be cleaner to just set $wgSharedTables = array( 'user' ) as 
the default, and continue using $wgSharedDB cleanly?
</pre>
    </div><div id="c30" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 05:36:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >If we default $wgSharedTables to array('user'), how do we prevent false
positives?  if (in_array('user', $wgSharedTables) &amp;&amp; !$wgSharedDB) ??  That is
just as hacky.

Since $wgSharedDB is still experimental, how about we just break it by doing the
following in Setup.php:

if (isset($GLOBALS['wgSharedDB'])) {
  throw new MWException('wgSharedDB is no longer supported.  See $wgSharedTables.');
}

Anybody upgrading his or her wiki will immediately know what the problem is. 
There can't be that many people actually using $wgSharedDB.  Those who do
probably have the resources to test upgrades before putting them in production.</pre>
    </div><div id="c31" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 07:33:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Can you elaborate more on &quot;false positives&quot;? Where would they appear?</pre>
    </div><div id="c32" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 07:38:33 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I fail to see how using the presence of a normal, existing, already used
in production by the second-largest known MediaWiki user, configuration setting
as a guard condition in the one function that would use it constitutes being
&quot;just as hacky&quot; as silently changing the configuration settings based on the
presence of another setting (which could be set by a user if register_globals
is on given its removal from DefaultSettings.php, potentially breaking things
interestingly).
</pre>
    </div><div id="c33" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 18:46:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I agree with Brion here.

btw. Brion, who do you call second-largest MediaWiki user? :&gt; On which position
MDC is? ;)</pre>
    </div><div id="c34" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 18:57:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" >OK, so we support wgSharedDB alongside wgSharedTables.  I argue that putting
code in Setup.php, as is the case with the current patch, is better than in
tableNames() because code in Setup.php only gets executed once.  It doesn't make
sense to evaluate the same logic for every call of tableNames() when it could be
done once.

Perhaps we should also add a trigger_error(foo, E_NOTICE) if wgSharedDB is on,
so we can warn people they are using a deprecated method.  In some later
release, wgSharedDB throws an exception.  In an even later release it is removed
altogether, along with the hackish Setup.php code.

This satisfy everyone?</pre>
    </div><div id="c35" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 22:08:44 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm lost.

As far as I understood the issue, Brion asked you why do you want to do this:

+if ($wgSharedDB &amp;&amp; !$wgSharedTableDatabase) {
+	$wgSharedTables[] = 'user';
+}

instead 

+$wgSharedTables = array('user');

And you are answering about modyfing code in tableNames() function...</pre>
    </div><div id="c36" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 22:49:48 UTC
        </span>
      </div>



<pre class="bz_comment_text" >If $wgSharedTables defaults to array('user'), every wiki powered by a source
tree will have the user database shared by default, using the current patch. 
This is like setting $wgSharedDB = true in DefaultSettings.php, a departure from
the status quo.

$wgSharedTables should be an empty array by default.

Perhaps the patch for Setup.php should be:

+if ($wgSharedDB &amp;&amp; !in_array('user', $wgSharedTables) {
+  $wgSharedTables[] = 'user';
+}

Effectively reads:

If using old method of sharing user table and we haven't been told to share the
user table using new method, then share the user table.

I answer about $wgSharedDB in tableNames() b/c if we are trying to deprecate its
usage, we should isolate the variable to somewhere where it can easily be
removed.  Setup.php is that place.  Being a part of logic in tableNames() is no
place for a deprecated variable.  It will be much easier to deprecate its
functionality in Setup.php than revisit the logic in tableNames().  This is also
contingent on deprecating $wgSharedDB.  Even then, I still argue it is less
hackish to have a configuration variable change in Setup.php than to support two
configuration variables using more complex logic in tableNames() than a single
variable would require.  Supporting two variables in tableNames() slows things
down.  Would you rather compute something once per session, or at least once per
query?</pre>
    </div><div id="c37" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 23:09:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=2396#c36">comment #36</a>)
<span class="quote">&gt; If $wgSharedTables defaults to array('user'), every wiki powered by a source
&gt; tree will have the user database shared by default, using the current patch. 
&gt; This is like setting $wgSharedDB = true in DefaultSettings.php, a departure </span >
from
<span class="quote">&gt; the status quo.</span >

The status quo is that the list of tables to share is hardcoded as just 
&quot;user&quot;. If this were changed from a hardcoded list to a changeable list, 
perhaps called $wgSharedTables, then it could be increased or decreased at the 
will of the site administrator.

For all intents and purposes this setting *already exists* in the code, it's 
just hardcoded in a function.

There is no reason to deprecate the usage of $wgSharedDB and I would not 
recommend doing so. You need both settings anyway, so why rename one of them 
when there's no reason to?
</pre>
    </div><div id="c38" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 23:12:39 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I don't see a problem here. We can check if wgSharedDB is empty or not. If it's
not, then yes, by default we want to share 'user' table. If it's empty, then we
don't want to share anything.
29 that 
I'm not sure why you want to deprecate wgSharedDB, and I'm not sure if we agreed
on that, at least I don't see Brion's comment saying that. In fact Brion said in
<a href="show_bug.cgi?id=2396#c29">Comment 29</a> that he prefers (as well as I do) to keep wgSharedDB and use the
$wgSharedTables = array('user'); method.

Could you please, explain once more why do you want to deprecate it?</pre>
    </div><div id="c39" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-20 23:22:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >In response to #37 and #38, the reason to deprecate wgSharedDB is because
wgSharedTables supercedes its functionality.  wgSharedDB gives you control over
1 table.  wgSharedTables gives you control of any.  It is bad coding to have two
configuration variables that do almost the same thing, especially when one
variable covers the entire functionality of another.

You can keep wgSharedDB if you want, but it shouldn't be used in logic anywhere
in the code, except for where its functionality is swallowed up by the larger
variable, wgSharedTables.</pre>
    </div><div id="c40" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-21 06:16:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Er, no.

$wgSharedDB indicates which database, if any, the shared tables are pulled 
from. Being empty means that the shared tables are used in the local database 
(which we can think of as meaning that they aren't shared, or that the sharing 
system is disabled, but it's all the same thing really).

In your patch, $wgSharedTables is a list of which tables are shared. It does 
not perform the function of $wgSharedDB, nor does it replace it in any way. 
Rather, it replaces the hardcoded check for the 'user' table name with a 
customizable list.

In fact, your patch renames $wgSharedDB to $wgSharedTableDatabase. This 
indicates to me that you do agree that its function is required.

If you agree that it is a required function, then I'm left asking why you want 
to rename it?
</pre>
    </div><div id="c41" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-21 06:21:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Gregory: But I do not understand why do you want to substitute wgSharedDB with
wgSharedTables...

wgSharedTables is a list of tables that are shared with common DB.
wgSharedDB is a name of database where those common tables are stored.

You want to deprecate wgSharedDB and instead add $wgSharedTableDatabase which
does exactly the same. I see no goal in it.

In result we'll have 3 variables. One to decide which DB stores common tables,
second to decide what prefix shared tables use, and third to decide which tables
are shared.

Maybe it would be simpler to create map them? Sth like:

$wgSharedTables (
  'user' =&gt; 'dbname.foo_user'
 ,'foo2' =&gt; 'db2.prefix_foo2'
);

This way:
1) We limit the amount of variables
2) We're flexible like hell, you can keep every table in different database and
with different prefix
:)</pre>
    </div><div id="c42" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-21 06:43:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I like the mapping idea in #41.  Concatenates everything down to one variable. 
Makes it much simpler.  Lot more flexible too.

I proposed renaming wgSharedDB to wgSharedTablePrefix b/c, although the variable
names reflect the same thing, the behavior of the variable is not identical.

wgSharedDB as it currently is coded says, &quot;I want to share the user database. 
Here is the database where it is located.&quot;
wgSharedTableDatabase as coded in my patch says, &quot;If you are sharing tables,
here is the database in which these shared tables can be found&quot;

wgSharedDB is explicitly tied to the user table in the current code.  It doesn't
sit right with me that this association is altered.  The behavior of a
configuration setting should be constant between releases.  This is why I think
it warrants a variable name change.  That being said, wgSharedDB is
*experimental* and should be used at one's own risk.  Perhaps we *can* get away
with altering this configuration setting's behavior.

Also, there is a logic error in my Setup.php component of my patch.  Should be
something like,

+if ($wgSharedDB) {
+  $wgSharedTableDatabase = $wgSharedDB;
+ 
+  if (!in_array('user', $wgSharedTables)) {
+    $wgSharedTables[] = 'user'
+  }
+}

Of course, this doesn't matter, b/c the mapping proposal is infinitely better. 
When will I see a patch?</pre>
    </div><div id="c43" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-22 04:16:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Brion: what do you think?

The only think that make me not confident about my solution is that it requires
you to name the database and prefix eachtime while in 99% of cases it'll be the
same...</pre>
    </div><div id="c44" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-22 17:13:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >If the db and prefix is the same in 99% of the cases, then any wise programmer
would just write:

$prefix = 'mydb.myprefix';

$wgSharedTables = array(
  'user' =&gt; $prefix . 'user',
  'interwiki' =&gt; $prefix . 'interwiki',
  ...
);

It is a small inconvenience for better flexibility.</pre>
    </div><div id="c45" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-07-22 17:51:12 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=2140" name="attach_2140" title="Shared tables as array map (against r15780)">attachment 2140</a> <a href="attachment.cgi?id=2140&amp;action=edit" title="Shared tables as array map (against r15780)">[details]</a></span>
Shared tables as array map (against <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/15780" title="revision 15780 in SVN">r15780</a>)

Implements $wgSharedTables as an array that maps a table name to a the desired
name.

Deprecates wgSharedDB because this variable is no longer needed since there is
no such thing as &quot;one shared database.&quot;  The map can actually map tables to
multiple databases, if desired.

In interest of continuity, if wgSharedDB is present and no map for the 'user'
table is set, then 'user' is mapped to $wgSharedDB . $wgDBprefix . 'user', just
like current behavior.</pre>
    </div><div id="c46" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Serguei Trouchelle</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-09-06 15:17:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Can you also look to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WORKSFORME - Multi-site (with shared user table) auto-login"
   href="show_bug.cgi?id=7247">Bug 7247</a> ? It seems to be concerned with shared user table
realizations. </pre>
    </div><div id="c47" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-09-07 00:43:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Brion: please, comment this bug. We're ready with two competing approaches here,
and I'm not sure which one do you prefer?</pre>
    </div><div id="c48" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-09-07 11:35:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >As I understand, all that should be necessary is to have a table prefix in
$wgSharedPrefix which will be used on the user table when $wgSharedDB
is in use.

I'm not really sure what all this other stuff is for.</pre>
    </div><div id="c49" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gregory Szorc</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-09-07 13:20:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Brion:  You should be able to share any arbitrary table between wikis. 
Shouldn't a wiki family be able to share the interwiki, math, and ip_blocks (and
possibly other) tables without having to modify the core function in
Database.php?  On a personal note, I could really use this feature for Farmer
(<a href="http://www.mediawiki.org/wiki/User:IndyGreg/Farmer">http://www.mediawiki.org/wiki/User:IndyGreg/Farmer</a>).  Bottom line is the
current implementation restricts what 3rd party developers can accomplish.  The
most recent patch fixes this.</pre>
    </div><div id="c50" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-09-07 17:15:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Brion: as Gregory stated, we came up to the point where we propose something
more flexible than what you say.

In our approach you can select which tables you want to share. There's no
difference for most users, because by default it only shares user table.

The real difference is for anyone who's willing to share other tables between
two mediawiki's or even store some tables in different location. Old approach
made it impossible, while the new one requires only to add a new
table_name=&gt;db/prefix/tablename map to the array.

Do you find this an overkill and would prefer to get rid of this?</pre>
    </div><div id="c51" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">ThomasV</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-15 06:56:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >using version 1.8.2.

In order to use $wgSharedDB with one single database and prefixes, I had to
change the following line in Database.php, in function tableName: 

			if ( isset( $wgSharedDB ) &amp;&amp; &quot;{$this-&gt;mTablePrefix}user&quot; == $name ) {
				$name = &quot;`$wgSharedDB`.`$name`&quot;;
was changed to

			if ( isset( $wgSharedDB ) &amp;&amp; &quot;{$this-&gt;mTablePrefix}user&quot; == $name ) {
				$name = &quot;`$wgSharedDB`.user&quot;;

brion's answer to that is that he does not recommend using a prefix. 
I would argue that you guys should not write code using a mTablePrefix variable,
if you assume that that variable is &quot;&quot;. unless you have a sadistic personality.
</pre>
    </div><div id="c52" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Lewis Jones</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-25 16:58:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I am a novice interested party who is trying to share a user table, not between
wikis, but between mediawiki and another application.

Using your suggestions above, I have pointed mediawiki to the user table I want
to make the common one, but, because the username and password field names are
different and mediawiki requires additional mediawiki-specific fields in the
user table, it won't work.

From the point of view of development, it seems that to make the functionality
truly general, the patch will need to do several things:

1. allow administrators to map database_X.table_Y to database_W.table_Z, and
2. allow administrators to map from one field to another, and
3. automatically generate the mediawiki fields in the specified shared user
table (other than the ones already mapped, e.g. username and password), if that
is a user table from another application.

So, as part of the setup, then, you could specify the user table, and then be
allowed to map the appropriate fields, while setup goes on to add the rest of
the necessary fields to the user table.

I apologise for butting in where I can't really help at all, but it does seem
that people will increasingly want to integrate mediawiki with other
applications, and that  the kind of thing I've outlined is what will be
necessary in order for that to happen.</pre>
    </div><div id="c53" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Lewis Jones</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-25 16:58:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I am a novice interested party who is trying to share a user table, not between
wikis, but between mediawiki and another application.

Using your suggestions above, I have pointed mediawiki to the user table I want
to make the common one, but, because the username and password field names are
different and mediawiki requires additional mediawiki-specific fields in the
user table, it won't work.

From the point of view of development, it seems that to make the functionality
truly general, the patch will need to do several things:

1. allow administrators to map database_X.table_Y to database_W.table_Z, and
2. allow administrators to map from one field to another, and
3. automatically generate the mediawiki fields in the specified shared user
table (other than the ones already mapped, e.g. username and password), if that
is a user table from another application.

So, as part of the setup, then, you could specify the user table, and then be
allowed to map the appropriate fields, while setup goes on to add the rest of
the necessary fields to the user table.

I apologise for butting in where I can't really help at all, but it does seem
that people will increasingly want to integrate mediawiki with other
applications, and that  the kind of thing I've outlined is what will be
necessary in order for that to happen.</pre>
    </div><div id="c54" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rob Church</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-25 21:19:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=2396#c53">comment #53</a>)
<span class="quote">&gt; I am a novice interested party who is trying to share a user table, not between
&gt; wikis, but between mediawiki and another application.</span >

Right, so stop here.

$wgSharedDB is for sharing databases between MediaWiki installations. To
instruct MediaWiki to authenticate against an external database, e.g. forum
packages, LDAP, etc. either write or find and install an appropriate
authentication plugin (&quot;AuthPlugin&quot;). You should be able to find quite a bit of
information on this via a normal web search.</pre>
    </div><div id="c55" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Lewis Jones</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-26 06:38:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for that.  Sorry to bother you guys.

I'll have a hunt around.</pre>
    </div><div id="c56" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-25 17:59:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - $wgSharedDB can not state table prefix for shared user table"
   href="show_bug.cgi?id=9695">Bug 9695</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c57" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Zbigniew Braniecki</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-05-10 00:27:28 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=3610" name="attach_3610" title="Gregory's patch updated to tip">attachment 3610</a> <a href="attachment.cgi?id=3610&amp;action=edit" title="Gregory's patch updated to tip">[details]</a></span>
Gregory's patch updated to tip

I've updated Gregory's patch to tip. It works very well.

Brion: can you support us with your point of view?
You stated your questions and I tried to answer them. How valuable you found
it?</pre>
    </div><div id="c58" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Joseph Bachir</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-09-12 07:58:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=4101" name="attach_4101" title="update to trunk to fix usage of $wgSharedDB.">attachment 4101</a> <a href="attachment.cgi?id=4101&amp;action=edit" title="update to trunk to fix usage of $wgSharedDB.">[details]</a></span>
update to trunk to fix usage of $wgSharedDB.

This fixes a bug in trunk, for how $wgSharedDB is used (at least, by my understanding of a sane interaction with a prefix (or lack thereof)).

It looks like Gregory's patch is more comprehensive, but if you want to make a quick bug fix in the meantime, you can apply my patch. It is consistent with the recipe I describe here:

<a href="http://wiki.johnjosephbachir.org/Multiple_MediaWiki_instances_sharing_a_codebase_and_user_table">http://wiki.johnjosephbachir.org/Multiple_MediaWiki_instances_sharing_a_codebase_and_user_table</a></pre>
    </div><div id="c59" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-05-06 05:34:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I've done some testing:
<a href="http://tablename.dev.wiki-tools.com/">http://tablename.dev.wiki-tools.com/</a>

I've compared various new types of tableName methods:
* original is the current implementation.
* gregory is the suggested and tweaked patch here.
* rewrite is an old rewrite of tableName I had made. I never proposed this one anywhere because I hadn't tested it enough anywhere. But this test shows that it is working perfectly fine as expected (Well actually, I had to reverse a condition because I did something wrong in the original but it's fully functional now)
* And rewrite2 is my new proposal. It's basically a modified version of the rewrite made to support a map similar to gregory's.

The specifics of rewrite and primarily rewrite2 are:
* $wgSharedDB is still used, additionally there is a $wgSharedPrefix variable that can be set with the prefix to use for the shared database.
* $wgSharedTables is a array listing tables to be shared. If any table shows up in this list then the database used will be changed.
* $wgTableMap is a table mapping, for the most part it's simply equivalent to gregory's setup.
* Just for the hell of it I added a array cache. I can remove it if people don't like it, but there is little reason to go and run the same set of actions over and over when people ask for table names, so I just added it in.
* Just as a side effect there's a new format for input allowed. Normally we only allow &quot;table&quot; and as an override &quot;`database`.`table`&quot; to stop things from being done. There isn't much reason for it but you can use the format &quot;database.table&quot; and table will automatically get the current prefix. There isn't much use for it, but don't worry about anything breaking, currently if you try and do that you'll end up with &quot;`database.table`&quot; which breaks horribly.

One of the primary reasons I questioned it's compatibility was because I used a completely different method from the original. Instead of being ugly and testing things using the prefix over and over. I separate the name into it's database and table forms then take actions on the individual parts, and in the end combine them back together. A bit more elegant.

Oh... Right now there is one thing it's doing which I don't know if I should change:
When using the format &quot;database.table&quot; if table is set in $wgSharedTables then database will be overridden with the shared database. If you want, I can tweak it to honor the fact that the person asking for the table name explicitly gave a database name to use and expects it return that with the current prefix added.

Also, I honestly don't like the ability to change the actual name of the database. Basically redirecting revisions to page is possible, even by accident, and there is no valid reason to change the name of a table like that. Honestly, I'd like to change the way $wgTableMap works and define it as a database/prefix pair integrating it into the actual splitting and merging of the name.

The reason I'm using both a shared db config and a map is because I don't consider specifying individual locations for tables to be a very ideal way of configuring things when all you want is to share a set of tables with another wiki. But there is merit to allowing a different database/prefix for a certain table.

I'll try and have brion take a look at it when he gets back... If it's good I'll commit it to trunk, and if it works perfectly fine everywhere hopefully it can end up in 1.12 so wiki can make use of it (Wikia wanted to use the other version I committed to trunk, hate to have them add another hack to their setup).

Any notes or tweaks you want and I'll change the rewrite.</pre>
    </div><div id="c60" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-05-06 23:13:39 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm pretty sure that these requirements should be sufficient for all sane uses:

* specify a single target database name + prefix for all shared tables
* specify the set of tables which are shared
</pre>
    </div><div id="c61" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c61">Comment 61</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-05-07 01:56:01 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Well... Actually, I can understand a sane use of a alternate table map:

$wgSharedDB set to a shared database for:
* users
* RegexBlock
* SpamRegex

And at the same time, they may want to share an interwiki table. However they want the interwiki table to be shared from their commons wiki rather than their shared database.

Or, there may be tri+ wiki sets where they only want a few tables shared, but those may be from one of the wiki, not others.
Kinda complicated chain to visualize. A wants table1 from B, B wants table2 from C, and C wants table3 from A.</pre>
    </div><div id="c62" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=2396#c62">Comment 62</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-05-07 05:05:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Ok, I rewrote tableName and brion okayed a final version. This has been fixed as of <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/34353" title="revision 34353 in SVN">r34353</a>.

The new variables are $wgSharedPrefix and $wgSharedTables. The shared tables is only a list, not a map. Wanting to map tables rather than put them in a single shared database is a different bug. If there is a real good reason to have one a new bug should be opened to discuss it.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>

    <hr><div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=2396&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=2396">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=2396">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=2396">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="head" class="noprint">
			<!-- /search -->
			<div id="p-search">
				<h5><label for="searchInput">Search</label></h5>
				<form id="searchform" action="buglist.cgi" method="get"
				 onsubmit="if (this.quicksearch.value == '')
				 { alert('Please enter one or more search terms first.');
				 return false; } return true;">
					<input type='hidden' name="title" value="Special:Search"/>
					<div id="simpleSearch">
						<input id="searchInput" name="quicksearch" type="text" title="Search Bugzilla [alt-f]" accesskey="f" value="" />
						<button id="searchButton" type='submit' name='button' title="Search Bugzilla for this text">&nbsp;</button>
					</div>
				</form>
			</div>
			<!-- /search -->
			<!-- personal -->
			<div id="p-personal" class="">
				<h5>Personal tools</h5>
				<ul >
							<li id="new_account_container">
								<a href="createaccount.cgi">New&nbsp;Account</a>
							</li>
						<li id="mini_login_container">
  <span class="separator">| </span>
  <a id="login_link" href="show_bug.cgi?id=2396&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('')">Log In</a>

  
  <form action="show_bug.cgi?id=2396" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login"
        onsubmit="return check_mini_login_fields( '' );"
  >
    <input id="Bugzilla_login" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('')"
    >
    <input class="bz_password" 
           id="Bugzilla_password" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy" value="password"
           title="Password"
           onfocus="mini_login_on_focus('')"
    >
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "email address",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('')">[x]</a>
  </form>
</li>
<li id="forgot_container">
  <span class="separator">| </span>
  <a id="forgot_link" href="show_bug.cgi?id=2396&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form"
        class="mini_forgot bz_default_hidden">
    <label for="login">Login:</label>
    <input type="text" name="loginname" size="20" id="login">
    <input id="forgot_button" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token" name="token" value="1419360432-8kDHcqo9YIwHq375zNz30azR6B8ofnbdLZbrOH02aHA">
    <a href="#" onclick="return hide_forgot_form('')">[x]</a>
  </form>
</li>

				</ul>
			</div>
			<!-- /personal -->
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="panel" class="noprint">
				<!-- logo -->
				<div id="p-logo"><a style="background-image: url(skins/contrib/Wikimedia/images/bugzilla-logo.png);" href="./"  title="Visit the main page"></a></div>
				<!-- /logo -->
				<!-- navigation -->
				<div class="portal">
					<h5>Navigation</h5>
					<div class="body">
						<ul><li><a href="query.cgi?format=specific">Search bugs</a></li>
			<li><a href="query.cgi?format=advanced">Advanced search</a></li>
			<li><a href="describecomponents.cgi">Browse projects</a></li>
			<li><a href="enter_bug.cgi">Enter a new bug</a></li>
                        <li>
                                <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
                        </li>	
						</ul>
					</div>
				</div>
				<!-- /navigation -->
				<!-- interaction -->
				<!-- /interaction -->
				<!-- toolbox -->
				<div class="portal">
					<h5>Links</h5>
					<div class="body">
						<ul><li><a href="report.cgi">Reports</a></li>
			<li><a href="weekly-bug-summary.cgi?tops=10&days=7">Weekly Summary</a></li>
				<li>
						<a href="request.cgi">Requests</a>
				</li>
						</ul>
					</div>
				</div>
				<!-- /toolbox -->
			</div>
		<!-- /panel -->		

		<!-- footer -->
		<div id="footer" >
			<ul id="footer-info">
				<li>Bugzilla version 4.4.5</li>
			</ul>

			<ul id="footer-places">
				<li><a href="https://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Bug_management/Bugzilla_etiquette" title="Bug management/Bugzilla etiquette">Bugzilla etiquette</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:About" title="Project:About">About MediaWiki.org</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
			</ul>
			<ul id="footer-icons" class="noprint">
				<li id="footer-icon-poweredby"><a href="http://www.bugzilla.org/"><img src="skins/contrib/Wikimedia/images/bugzilla-badge.png" height="31" width="88" alt="Powered by Bugzilla" /></a></li>
			</ul>
			<div style="clear:both"></div>
		<div class="outro"></div>
		</div>
		<!-- /footer -->
	</body>
</html>