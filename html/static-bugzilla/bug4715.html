<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 4715 &ndash; Allow comments longer than 255 bytes</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://old-bugzilla.wikimedia.org/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=4715&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=4715">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=4715">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=4715">



    
    <link href="skins/standard/global.css?1389015166"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/global.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/show_bug.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="extensions/Voting/web/style.css?1389015166" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1389015166" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="skins/contrib/Wikimedia/global.css?1402013050" rel="stylesheet"
        type="text/css" title="Wikimedia"><link href="skins/contrib/Wikimedia/show_bug.css?1402441020" rel="stylesheet"
        type="text/css" title="Wikimedia">

      <link rel="stylesheet" href="skins/contrib/Wikimedia/vector.css?1403109885" media="screen"
            title="Wikimedia" />


    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1389015166"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1389015166"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1389015166"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1389015166"></script><script type="text/javascript" src="js/yui/json/json-min.js?1389015166"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1389015166"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1389015166"></script><script type="text/javascript" src="js/global.js?1389015166"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 15
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 4715 – Allow comments longer than 255 bytes",  
                             "show_bug.cgi?id=4715" );
        document.title = "Bug 4715 – Allow comments longer than 255 bytes";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 4715 – Allow comments longer than 255 bytes", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1389015166"></script><script type="text/javascript" src="js/field.js?1389015166"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class="old-bugzilla-wikimedia-org bz_bug bz_status_REOPENED bz_product_MediaWiki bz_component_Database bz_bug_4715 yui-skin-sam">



<!-- If custom Wikimedia skin -->
   <div id="page-base" class="noprint"></div>
                <div id="head-base" class="noprint"></div>
                <!-- content -->
                <div id="content-container" >
                        <a id="top"></a>
                        <!-- bodyContent -->
                        <div id="bodyContent">
      <p class="header_addl_info">Last modified: 2014-11-08 18:25:11 UTC</p>

 <!-- If custom Wikimedia skin -->
<h1>Wikimedia Bugzilla is closed!</h1><div id="message" style="text-align: center; color: black">Wikimedia has <a href="https://www.mediawiki.org/wiki/Phabricator/versus_Bugzilla">migrated from Bugzilla to Phabricator</a>. Bug reports should be created and updated in <a href="https://phabricator.wikimedia.org">Wikimedia Phabricator</a> instead. Please <a href="https://www.mediawiki.org/wiki/Phabricator/Help#Creating_your_account">create an account in Phabricator and add your Bugzilla email address</a> to it.<br>Wikimedia Bugzilla is read-only. If you try to edit or create any bug report in Bugzilla you will be shown an intentional error message.<br>In order to access the Phabricator task corresponding to a Bugzilla report, just remove "static-" from its URL.<br>You could still run searches in Bugzilla or access your <a href="https://old-bugzilla.wikimedia.org/page.cgi?id=voting%2Fuser.html">list of votes</a> but bug reports will obviously not be up-to-date in Bugzilla.</div>

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-11-08 18:25:11">
  <input type="hidden" name="longdesclength" value="71">
  <input type="hidden" name="id" value="4715">
  <input type="hidden" name="token" value="1419364013-Qi3nJXWWkVt43Hu-PPqIF0Je1v64w3imHRonv8tfFqM">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=4715"><b>Bug&nbsp;4715</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Allow comments longer than 255 bytes</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>Allow comments longer than 255 bytes
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('Allow comments longer than 255 bytes', '');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">REOPENED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >MediaWiki</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr>
    
    <td class="field_label">
      <label for="component">
        <a href="describecomponents.cgi?product=MediaWiki">
        Component:</a>
      </label>
    </td>
    
    <td>Database
    
    (<a href="buglist.cgi?component=Database&product=MediaWiki&resolution=---"
      target="new_window">Other open bugs</a>)
    
    </td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">All
       All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Low
       enhancement<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=4715">9 
            votes</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=4715#vote_4715">vote</a>)
  </span>
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=fields.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Jan Paul Posma</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'wikibugs-l\x40lists.wikimedia.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
          <a href="http://dev.mysql.com/doc/refman/5.0/en/string-type-overview.html"><span title="http://dev.mysql.com/doc/refman/5.0/en/string-type-overview.html">http://dev.mysql.com/doc/refman/5.0/e...
        </span></a>
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">patch, patch-need-review, performance, schema-change
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label for="duplicates">Duplicates</label>:
    </th>
    <td class="field_value" colspan="2">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Action summary is artificially truncated on history, contribs and RC"
   href="show_bug.cgi?id=13200">13200</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Enlarging edit-summary size"
   href="show_bug.cgi?id=22696">22696</a> 
      </span>
      (<a href="buglist.cgi?bug_id=13200,22696">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Increasing the length of the edit summary (tracking)"
   href="show_bug.cgi?id=4714">4714</a> <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Hindi Wikiprojects (tracking)"
   href="show_bug.cgi?id=41348">41348</a> <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Malayalam Wiki Projects [Tracking]"
   href="show_bug.cgi?id=56295">56295</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Increase allowable feedback text length"
   href="show_bug.cgi?id=34586">34586</a> 
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=4715&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=4715">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2006-01-22 08:34 UTC by <span class="vcard"><span class="fn">Ævar Arnfjörð Bjarmason</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-11-08 18:25 UTC 
      (<a href="show_activity.cgi?id=4715">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>29 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="aklapper">aklapper</option>
                <option value="alexsm333">alexsm333</option>
                <option value="arod.shatil">arod.shatil</option>
                <option value="b">b</option>
                <option value="bawolff+wn">bawolff+wn</option>
                <option value="church.of.emacs.ml">church.of.emacs.ml</option>
                <option value="danny.b">danny.b</option>
                <option value="domas.mituzas">domas.mituzas</option>
                <option value="Eduard.Braun2">Eduard.Braun2</option>
                <option value="glaisher.wiki">glaisher.wiki</option>
                <option value="greg">greg</option>
                <option value="john">john</option>
                <option value="matma.rex">matma.rex</option>
                <option value="matthew.britton">matthew.britton</option>
                <option value="me.praveen">me.praveen</option>
                <option value="mediawiki-bugs">mediawiki-bugs</option>
                <option value="meno25mail">meno25mail</option>
                <option value="p858snake">p858snake</option>
                <option value="Platonides">Platonides</option>
                <option value="qgil">qgil</option>
                <option value="raimond.spekking">raimond.spekking</option>
                <option value="roan.kattouw">roan.kattouw</option>
                <option value="scott">scott</option>
                <option value="shijualex">shijualex</option>
                <option value="Siddhartha.Ghai">Siddhartha.Ghai</option>
                <option value="springle">springle</option>
                <option value="srik.lak">srik.lak</option>
                <option value="vasilvv">vasilvv</option>
                <option value="yuvipanda">yuvipanda</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_browser">


  <a 
      title="Please set this if the described problem seems to happen only in a specific web browser."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_browser"
  >Web browser:</a>

</th>
  <td class="field_value "
      id="field_container_cf_browser"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_platform">


  <a 
      title="The Mobile Platform the described problem was experienced on."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_platform"
  >Mobile Platform:</a>

</th>
  <td class="field_value "
      id="field_container_cf_platform"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_hugglebeta">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_hugglebeta"
  >Assignee Huggle Beta Tester:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_hugglebeta"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=8454"
               title="View the content of the attachment">
          <b>Schema change</b></a>

          <span class="bz_attach_extra_info">
              (25.05 KB,
                patch)

            <br>
            <a href="#attach_8454"
               title="Go to the comment associated with the attachment">2011-04-24 19:50 UTC</a>,

            <span class="vcard"><span class="fn">Jan Paul Posma</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=8454&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
        </span>
        <a href="attachment.cgi?bugid=4715&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1389015166" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ævar Arnfjörð Bjarmason</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-01-22 08:34:28 UTC
        </span>
      </div>



<pre class="bz_comment_text" >To support longer edit summaries the rev_deleted field has to be changed from
TINYBLOB to BLOB and a relevant database upgrade has to be written.</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-01-22 19:49:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >That'd be rev_comment, not rev_deleted. :)</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-02-29 19:37:31 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Action summary is artificially truncated on history, contribs and RC"
   href="show_bug.cgi?id=13200">Bug 13200</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-03-07 19:11:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This should also be done for log_comment.  Don't know if that should be a separate bug.</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Siebrand Mazeland</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-02-02 16:00:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Removed 'schema-change' keyword. No patch attached that requires a schema change.</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-02-02 17:39:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Um, what?  The necessary schema change is in the bug summary: &quot;Change rev_comment from TINYBLOB to BLOB&quot;.  A patch to do that would be about two lines, there's no need to post one.

(Changed summary to include log_comment)</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 15:41:33 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Enlarging edit-summary size"
   href="show_bug.cgi?id=22696">Bug 22696</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">praveenp</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 15:49:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c6">comment #6</a>)
<span class="quote">&gt; *** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Enlarging edit-summary size"
   href="show_bug.cgi?id=22696">Bug 22696</a> has been marked as a duplicate of this bug. ***</span >

Actually 200 characters are enough for summary. But our problem is different :(</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 15:56:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >by the way, what about &quot;no&quot; ?;-)</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">praveenp</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 16:01:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c8">comment #8</a>)
<span class="quote">&gt; by the way, what about &quot;no&quot; ?;-)</span >

May be that is an easiest way to solve a real problem.</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 16:07:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm sure it is :-)

Anyway, all these comments are shown in too many reports (watchlist, RCL) - that are already quite expensive to produce - introducing blob data to them without database/code refactoring wouldn't make much sense.</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">praveenp</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 17:08:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c10">comment #10</a>)

<span class="quote">&gt; Anyway, all these comments are shown in too many reports (watchlist, RCL) -
&gt; that are already quite expensive to produce - introducing blob data to them
&gt; without database/code refactoring wouldn't make much sense.</span >

Because of that kind of definition, only a handful languages (those which using Latin script probably) get any advantage of Edit-summary :(. 

There may be no update on edit summary since it developed in very initial stage of mediawiki software.</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 17:24:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c10">comment #10</a>)
<span class="quote">&gt; I'm sure it is :-)
&gt; 
&gt; Anyway, all these comments are shown in too many reports (watchlist, RCL) -
&gt; that are already quite expensive to produce - introducing blob data to them
&gt; without database/code refactoring wouldn't make much sense.</span >

What sort of database/code refactoring were you thinking of?</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Victor Vasiliev</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 17:35:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c12">comment #12</a>)
<span class="quote">&gt; What sort of database/code refactoring were you thinking of?</span >

Maybe addition of rev_description/log_description which are pointers to appropriate descriptions in text table? Or even to a page in special namespace (long rationales may require fixes)?</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 18:28:04 UTC
        </span>
      </div>



<pre class="bz_comment_text" >well, as long as that doesn't get included everywhere (recentchanges, feeds, RCL, watchlists, etc ;-), you can probably store whatever you want anywhere you want ;-)

the refactoring would mean moving that data out of tables, and doing load of it in second pass &quot;on display&quot;. it would suck though - another huge table with billions of rows to maintain/join against, and there'd be questions how to structure it to have good locality, etc. 

pain oh pain.</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-02 18:58:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >How about this.  Add new rev_text and log_text as foreign keys to old_id.  If the comment fits in rev_comment/log_comment, keep it there, and set rev_text/log_text = 0.  Otherwise, keep a truncated version in rev_comment/log_comment and use that for RC and watchlist, and set rev_text/log_text and use that on history pages and other appropriate places.  (We probably don't want super-long summaries on RC anyway, it would add clutter.)

We'd likely have a limit of 1000 Unicode characters or less, though, so would using the text table be overkill?  Would it make more sense to just have rev_comment_long/log_comment_long or something?

Either way, this scheme wouldn't increase the database size noticeably for 95%+ of revisions, since most people aren't that verbose.  So that shouldn't be a big problem, right?</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">praveenp</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-03 09:02:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c15">comment #15</a>)
<span class="quote">&gt; Either way, this scheme wouldn't increase the database size noticeably for 95%+
&gt; of revisions, since most people aren't that verbose.  So that shouldn't be a
&gt; big problem, right?</span >

Then it is possible, isn't it?</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Shiju Alex</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-03 13:26:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Currently when we create a new page, if nothing is entered on the edit summary box, the first few lines of the content will be automatically displayed on the edit summary. 

If we are increasing the character limit, then it is better to remove the above functionality.</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gurch</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-03 17:51:34 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c11">comment #11</a>)
<span class="quote">&gt; Because of that kind of definition, only a handful languages (those which using
&gt; Latin script probably) get any advantage of Edit-summary :(. 
&gt; 
&gt; There may be no update on edit summary since it developed in very initial stage
&gt; of mediawiki software.</span >

It's not so much the age of the software as the inefficiency of adding and converting to larger fields in the database schema.

It also doesn't help that most people equate one character with one byte and forget that users of non-Latin scripts are stuck with an encoding that takes two to three times as much storage space.

<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=4715#c12">comment #12</a>)
&gt; &gt; What sort of database/code refactoring were you thinking of?
&gt; 
&gt; Maybe addition of rev_description/log_description which are pointers to
&gt; appropriate descriptions in text table? Or even to a page in special namespace
&gt; (long rationales may require fixes)?</span >

Not sure where you're getting the &quot;long rationales may require fixes&quot; idea from. 200 characters in a multibyte-encoded script doesn't necessarily convey any more information than 200 characters in a Latin script, it just takes more space to store.

(In reply to <a href="show_bug.cgi?id=4715#c15">comment #15</a>)
<span class="quote">&gt; We'd likely have a limit of 1000 Unicode characters or less, though, so would
&gt; using the text table be overkill?  Would it make more sense to just have
&gt; rev_comment_long/log_comment_long or something?</span >

Nobody is suggesting anything like 1000 Unicode characters. 200 Unicode characters -- i.e. the same length Latin-script users get already -- would be more than enough, but currently scripts that are encoded with multibyte characters (almost anything non-Latin) don't get anywhere near that much.

(In reply to <a href="show_bug.cgi?id=4715#c17">comment #17</a>)
<span class="quote">&gt; Currently when we create a new page, if nothing is entered on the edit summary
&gt; box, the first few lines of the content will be automatically displayed on the
&gt; edit summary. 
&gt; 
&gt; If we are increasing the character limit, then it is better to remove the above
&gt; functionality.</span >

Not really. Just cap the automatic summary length at a fixed number of characters, rather than bytes. No reason why non-Latin script shouldn't get to see the first ~200 characters of their articles too.</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-03 18:54:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c18">comment #18</a>)
<span class="quote">&gt; It's not so much the age of the software as the inefficiency of adding and
&gt; converting to larger fields in the database schema.</span >

This isn't a big issue.  We have a system in place for schema changes, even on large tables.  The problem is the efficiency of the resulting deployed system.

<span class="quote">&gt; It also doesn't help that most people equate one character with one byte and
&gt; forget that users of non-Latin scripts are stuck with an encoding that takes
&gt; two to three times as much storage space.</span >

I hope by &quot;most people&quot; you don't mean to include developers and sysadmins.

<span class="quote">&gt; Nobody is suggesting anything like 1000 Unicode characters. 200 Unicode
&gt; characters -- i.e. the same length Latin-script users get already -- would be
&gt; more than enough, but currently scripts that are encoded with multibyte
&gt; characters (almost anything non-Latin) don't get anywhere near that much.</span >

I disagree.  I regularly want to use English-language summaries longer than 255 ASCII characters.  If we're going to allow more than 255 bytes, we'll be allowing at least 64K bytes (likely 16M, if we use the text table) on the backend, so how many are allowed in an actual comment will be admin-configurable.  I imagine some wikis would request more than 255 characters -- I'd support a software default of 500 or so.  The current limit is only because we use varchar(255).

<span class="quote">&gt; Not really. Just cap the automatic summary length at a fixed number of
&gt; characters, rather than bytes. No reason why non-Latin script shouldn't get to
&gt; see the first ~200 characters of their articles too.</span >

Agreed.</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gurch</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-03 23:10:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c19">comment #19</a>)
<span class="quote">&gt; I disagree.  I regularly want to use English-language summaries longer than 255
&gt; ASCII characters.</span >

Well don't :) Long summaries would make histories and related pages more difficult to read. Increasing the character count for other scripts doesn't have that issue. Besides which, anyone writing a mini-essay for a summary would be better off summarizing it briefly and putting a detailed explanation on the discussion page. I've seen a lot of edit warring using the summary field as a mechanism for argument, and longer summaries would only encourage that.</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">praveenp</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-04 09:42:31 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; Nobody is suggesting anything like 1000 Unicode characters. 200 Unicode
&gt; characters -- i.e. the same length Latin-script users get already -- would be
&gt; more than enough, but currently scripts that are encoded with multibyte
&gt; characters (almost anything non-Latin) don't get anywhere near that much.</span >

<span class="quote">&gt; Long summaries would make histories and related pages more
&gt; difficult to read. Increasing the character count for other scripts doesn't
&gt; have that issue. Besides which, anyone writing a mini-essay for a summary would
&gt; be better off summarizing it briefly and putting a detailed explanation on the
&gt; discussion page. I've seen a lot of edit warring using the summary field as a
&gt; mechanism for argument, and longer summaries would only encourage that.</span >

agreed</pre>
    </div><div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-04 17:23:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Well, that's orthogonal to the discussion here.  We want the backend for foreign languages either way, and once we have it we can discuss how many characters should be allowed for edit summaries independent of the technical constraints that now force it to 255 bytes.  It would certainly be admin-configurable (and therefore configurable per-project on Wikimedia).</pre>
    </div><div id="c23" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">praveenp</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-04 18:21:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c22">comment #22</a>)
<span class="quote">&gt; Well, that's orthogonal to the discussion here.  We want the backend for
&gt; foreign languages either way, and once we have it we can discuss how many
&gt; characters should be allowed for edit summaries independent of the technical
&gt; constraints that now force it to 255 bytes.  It would certainly be
&gt; admin-configurable (and therefore configurable per-project on Wikimedia).</span >

Or close this bug and open independent bugs for different languages (like <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Enlarging edit-summary size"
   href="show_bug.cgi?id=22696">Bug 22696</a> this)</pre>
    </div><div id="c24" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-04 18:27:17 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c23">comment #23</a>)

<span class="quote">&gt; Or close this bug and open independent bugs for different languages (like Bug
&gt; 22696 this)</span >


No, not yet pls. First this base bug has to be fixed. Than we have (hopefully) configuration per-project.</pre>
    </div><div id="c25" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-04 18:53:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c23">comment #23</a>)
<span class="quote">&gt; Or close this bug and open independent bugs for different languages (like Bug
&gt; 22696 this)</span >

This makes no sense.  We cannot do this for any language until the infrastructure is in place.

Domas, do you have an opinion on <a href="show_bug.cgi?id=4715#c15">comment 15</a>?</pre>
    </div><div id="c26" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 19:21:02 UTC
        </span>
      </div>



<pre class="bz_comment_text" >i just entered a bug-report ( <a href="http://bugzilla.wikimedia.org/show_bug.cgi?id=22967">http://bugzilla.wikimedia.org/show_bug.cgi?id=22967</a> ) and learned about this one (btw: i did try to search first)

i do not think the title of this bug is adequate. we are conflating here two completely different issues.
one is allowing more than 200 characters in a comment. please open another bug for this.
the other is that the existing system is built for 200 characters (e.g., the &quot;maxlength&quot; field in the html form is 200), but we actually support only 250 bytes (we truncate to 250 in php, so the 255 limit of the backend doesn't even ever have to truncate).
so, forget the discussion about &quot;200 or more than 200&quot;, or rather, conduct it elsewhere.
having a limit of 200, and taking into account that some languages need more than 255 bytes to have 200 chars, the answer is very simple and straightforward: change the DB schema from tinyblob to blob for this one column (rev_comment), and teach the &quot;truncate&quot; function to count characters and not bytes, and oh, by the way, truncate at 200 (chars) and not 250 (bytes).
all in all one simple schema change, and one simple code change.</pre>
    </div><div id="c27" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 19:32:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c26">comment #26</a>)
<span class="quote">&gt; i do not think the title of this bug is adequate. we are conflating here two
&gt; completely different issues.
&gt; one is allowing more than 200 characters in a comment. please open another bug
&gt; for this.
&gt; the other is that the existing system is built for 200 characters (e.g., the
&gt; &quot;maxlength&quot; field in the html form is 200), but we actually support only 250
&gt; bytes (we truncate to 250 in php, so the 255 limit of the backend doesn't even
&gt; ever have to truncate).
&gt; so, forget the discussion about &quot;200 or more than 200&quot;, or rather, conduct it
&gt; elsewhere.</span >

That discussion is irrelevant, yes.  Cf. <a href="show_bug.cgi?id=4715#c22">comment 22</a>.

<span class="quote">&gt; having a limit of 200, and taking into account that some languages need more
&gt; than 255 bytes to have 200 chars, the answer is very simple and
&gt; straightforward: change the DB schema from tinyblob to blob for this one column
&gt; (rev_comment), and teach the &quot;truncate&quot; function to count characters and not
&gt; bytes, and oh, by the way, truncate at 200 (chars) and not 250 (bytes).
&gt; all in all one simple schema change, and one simple code change.</span >

Simple to do, but that doesn't mean it will perform well.  See <a href="show_bug.cgi?id=4715#c8">comment 8</a> and <a href="show_bug.cgi?id=4715#c10">comment 10</a> by Domas Mitzuas.  <a href="show_bug.cgi?id=4715#c15">Comment 15</a> outlines a possible solution, but I haven't gotten his approval for it.</pre>
    </div><div id="c28" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 19:45:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c27">comment #27</a>)
<span class="quote">&gt; Simple to do, but that doesn't mean it will perform well.  See <a href="show_bug.cgi?id=4715#c8">comment 8</a> and
&gt; <a href="show_bug.cgi?id=4715#c10">comment 10</a> by Domas Mitzuas.  <a href="show_bug.cgi?id=4715#c15">Comment 15</a> outlines a possible solution, but I
&gt; haven't gotten his approval for it.</span >

<a href="show_bug.cgi?id=4715#c8">comment 8</a> just doesn't compute. &quot;just say no&quot; was mighty stupid when nancy reagan said it wrt drugs, and one really expect a bit better reasoned answer from the intelligent people who run mediawiki.

as to #10: i will not pretend i understood it entirely, so i quote it here:
<span class="quote">&gt; Anyway, all these comments are shown in too many reports (watchlist, RCL) -
&gt; that are already quite expensive to produce - introducing blob data to them
&gt; without database/code refactoring wouldn't make much sense.</span >

what does that mean? the data is *already* a &quot;blob data&quot; (it is currently defined as &quot;tinyblob&quot;, not &quot;varchar&quot; or somesuch). and changing it from &quot;tinyblob&quot; to &quot;blob&quot; will only cost one extra byte.
for latin-based languages that's it. no an extra cost, because the software limit the length to 200 *chars* anyway.
for the rest of us, believe me it will be an improvement, not to see all those truncated edit messages any more.

on &quot;my&quot; wiki i already did it, but i would also like he.wikipedia.org to stop displaying all those truncated edit summaries.
and using a clever JS trick to limit it at the input form level will just leave us with inadequate edit messages (125 chars is less than a tweat, fgs. and what about malaysian which gets truncated at ~60?

peace.</pre>
    </div><div id="c29" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 19:55:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c27">comment #27</a>)
<span class="quote">&gt; <a href="show_bug.cgi?id=4715#c10">comment 10</a> by Domas Mitzuas.  <a href="show_bug.cgi?id=4715#c15">Comment 15</a> outlines a possible solution, but I
&gt; haven't gotten his approval for it.</span >

sorry, i missed this reference to <a href="show_bug.cgi?id=4715#c15">Comment #15</a>.

i do not think it makes sense. 
a lot of complication and zero performance gain (at least i could not see any gain). to the best of my understanding, nowhere will it perform better than the simple solution of changing the tinyblob to blob, and in many places it will perform significantly worse (and will cost more storage).

if i am wrong it won't be the first nor (i hope) the last time, but i am pretty sure that *in this case* i am not wrong.

peace.</pre>
    </div><div id="c30" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 22:30:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c28">comment #28</a>)
<span class="quote">&gt; what does that mean? the data is *already* a &quot;blob data&quot; (it is currently
&gt; defined as &quot;tinyblob&quot;, not &quot;varchar&quot; or somesuch). and changing it from
&gt; &quot;tinyblob&quot; to &quot;blob&quot; will only cost one extra byte.</span >

It's &quot;varchar(255) binary&quot; in maintenance/tables.sql.  I believe it's varbinary(255) on Wikimedia; it is on the toolserver.  I'm not a MySQL expert, but I know that any blob type (even tinyblob) has significant gotchas compared to varbinary(255), although logically they're the same -- see the bit about &quot;constraints&quot; at &lt;<a href="http://dev.mysql.com/doc/refman/5.1/en/blob.html">http://dev.mysql.com/doc/refman/5.1/en/blob.html</a>&gt;.  I don't know how many of these would apply to, e.g., varbinary(500).  I do know that longer columns would not be able to be fully indexed, for instance, which would make use of covering indexes impossible, but I don't know what the hard cutoff is for that.  There are probably other issues.

Basically, no, it's not just one byte difference in practice, although it is logically.</pre>
    </div><div id="c31" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 22:38:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" >when you say &quot;it&quot; i just want to make sure we are talking about the same thing:
i was talking about the column [rev_comment] in table [revision]
this is where the edit comments are stored, and chaanging it on *my* wiki allowed me to have full (=200 chars) comments.

in the publicly available source (mediawiki 1.15.1) this column is tinyblob.
so i do not claim that there is little difference between varbinary and blob, but according to the same documentation you linked, there is *very* little difference between tinyblob and blob - exactly one byte...</pre>
    </div><div id="c32" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 22:43:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Sorry, you're right, rev_comment is tinyblob on trunk.  However, it's varbinary(255) on Wikimedia, or at least on the toolserver, and that's what's relevant from a sysadmin perspective.  Anyway, rc_comment is varchar(255) binary even on trunk, and that would have to be updated too for full functionality.</pre>
    </div><div id="c33" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-26 22:51:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >i did not realize that you'd need to change rc_comment also. i'll do it on my wiki - thanks for the tip.

in this case, i would not suggest changing [rc_comment] from varbinary to blob - just from varbinary(255) to varbinary(2048) or somesuch (again, a single byte change, no effect on performance or storage afaik).


as to the difference between the trunk and the toolserver: does this mean the trunk is *behind* the toolserver or the other way around?

also, if [rev_comment] is varbinary(255) on the toolserver, how about changing *it* to varbinary(2048) ?

as i indicated, i do not &quot;demand&quot; a fix next week - next version would be plenty fine.

peace.</pre>
    </div><div id="c34" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 08:15:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >we shouldn't be using tinyblob anywhere, probably either I forgot to change, or someone changed it back :)</pre>
    </div><div id="c35" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 13:56:28 UTC
        </span>
      </div>



<pre class="bz_comment_text" >far be it from me to advocate blobs - i don't like them (especially the green ones).

so, assuming we'll change it (or change it back) to varbinary, may i ask to make it varbinary(1024) rather than varbinary(255)?

the code guards this field at 200 chars, so for all latin scripts this practically means paying one more byte per revision, and 0 performance implications.
for all non-latin scripts this is going to be a fix of an old and very annoying bug.

thanks.</pre>
    </div><div id="c36" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 14:01:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >there are performance implications, as we can't do covering indexes on large fields, to speed up non-PK based range views.</pre>
    </div><div id="c37" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 15:23:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c36">comment #36</a>)
<span class="quote">&gt; there are performance implications, as we can't do covering indexes on large
&gt; fields, to speed up non-PK based range views.</span >

but in tables.sql rev_commant does not seem to be in *any* index?
for sure there are many things i do not understand about the internal structure (i am definitely *not* DBA master), but unless this is one more discrepancy between trunk and &quot;real life&quot;, rev_comment is not indexed, so i don't think performance would be impacted.</pre>
    </div><div id="c38" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 15:36:58 UTC
        </span>
      </div>



<pre class="bz_comment_text" >we switch certain indexes (include all table fields) to covering to avoid extra i/o for certain access patterns.</pre>
    </div><div id="c39" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 16:23:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >will it be able then to truncate them for indexing and yet keep the whole (200 chars) thing for storage?
this would deprive non-latin-script users from searchability on the tail of the comment, but the comment itself, at least, will not get truncated?</pre>
    </div><div id="c40" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 16:24:34 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(i meant &quot;will it be possible&quot;, of course, not &quot;will it be able...)</pre>
    </div><div id="c41" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-27 16:27:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >it is not possible</pre>
    </div><div id="c42" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-28 18:22:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c33">comment #33</a>)
<span class="quote">&gt; as to the difference between the trunk and the toolserver: does this mean the
&gt; trunk is *behind* the toolserver or the other way around?
&gt; 
&gt; also, if [rev_comment] is varbinary(255) on the toolserver, how about changing
&gt; *it* to varbinary(2048) ?</span >

Toolserver is theoretically the same as Wikimedia.  Wikimedia uses trunk but with some modifications, e.g., extra indexes and different field definitions.  Covering index on recentchanges (that means covering the full width of every column) is necessary for performance on Wikimedia sites.

(In reply to <a href="show_bug.cgi?id=4715#c41">comment #41</a>)
<span class="quote">&gt; it is not possible</span >

Can we make it 500 bytes or such for wikis with scripts that are mainly two bytes or longer?  So keeping it at 255 for en, de, fr, it, pt, es, pl, nl, etc, almost all the biggest wikis.  Could we still do a covering index on 500 bytes?  What's the limit on that?  500 bytes seem to be the max for in-memory temporary tables, if I'm reading right (don't know how important that is).</pre>
    </div><div id="c43" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-03-29 06:57:41 UTC
        </span>
      </div>



<pre class="bz_comment_text" >since all we really need is 200 chars, i think 500 bytes should completely solve the issue for all the 2-bytes-per-char languages (Hebrew, Arabic, Farsi, Cyrilic, Greek and more), and will improve situation a lot for 3-bytes-per-char languages (i think most of the south and east asian? - at least Praveen in <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Enlarging edit-summary size"
   href="show_bug.cgi?id=22696">bug 22696</a> talked about 3-to-1). 
even with the 3-to-1 they get an occasional single byte char such as space and punctuation, so in reality 500 will get them very close.

i also thought a bit more about the JS, and thought that the right thing will not be to try to handle keystrokes - this will require to duplicate too much editing functionality in the JS - movement, deletion, cut and paste, etc., but rather to dynamically manipulate the &quot;maxlength&quot; and let the browser handle the actual keystroke.
the only place where this will not be 100% adequate is with large paste.

what i mean is something like this: (100% untested. my JS is a bit rusty, so don't take it too literally):
============ JS Hack ============
function size_in_bytes(s) {//if there's builtin function, i didn't find it.
   var bytes = 0;
   for (var i in s.toIntArray()) 
       while (i &gt; 0) { // count bytes in char.
           bytes++;
           i &gt;&gt;= 8;
       } 
   return bytes;
}

function update_maxlen() {
    var
        already_bytes = size_in_bytes(this.value),
        already_chars = this.value.length,
        available_bytes = 500 - already_bytes, //500=&gt;const?
        available_chars = Math.floor(available_bytes / 4),
        new_maxlen = Math.min(200, already_chars+available_chars);//200=&gt;const? 
    this.maxlength = new_maxleng;
}
============ END JS Hack =============
and make  update_maxlen() an event handler for keystroke or keyup or keydown or somesuch.

above code is 100% original and 100% copyright-free. use it as you see fit.
(once you switch to git i'll try submitting more &quot;formal&quot; patches) 

peace.</pre>
    </div><div id="c44" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bawolff (Brian Wolff)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-04-01 08:16:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In response to <a href="show_bug.cgi?id=4715#c43">Comment 43</a>) Umm, I don't think toIntArray() is a method of the string class (also, nitpick: that could have unexpected results if someone decides to add stuff to Array.prototype , better to use a normal for loop instead of a for in loop). Also some things like ã is represented as 0x00E3 in utf-16 (what js uses), but would take 2 bytes in utf-8 (0xC3A3), thus I don't think that counts correctly.

Personally I think a better approach would be to count how many bytes are in the field, and then plop some off the end if its too much. (preventing keystrokes has the issue of not allowing backspace through), since I have no idea if browsers interpert maxlength consistantly for high codepoint characters. If someone copies and paste, its still counted as a keypress, thus this still works (and if all else fails, keep the maxlength parameter). For example how about this (note: only tested on firefox):

var summary = document.getElementById('wpSummary');
trimSummary = function (e) {
 if (!e) e = window.event; //for IE
 var text = summary.value;
 //This basically figures out how many bytes a utf-16 string (which is what js sees) will take in utf-8
 //Note, surogate (\uD800-\uDFFF) characters are counted as 2 bytes, since theres two of them
 //and the actual character takes 4 bytes in utf-8 (2*2=4). might not work right for illegal surrogate sequences, but that should never happen.
 len = text.replace(/[^\u0000-\u007F]/g, '').length + text.replace(/[^\u0080-\u07FF\uD800-\uDFFF]/g, '').length*2 + text.replace(/[^\u0800-\uD7FF\uE000-\uFFFF]/g, '').length*3;
 if (len &gt; 255) {
  summary.value = text.substring(0, text.length - 1);
  //We don't know how many characters over it is, so only plop off one
  trimSummary(); //recursively to get rid of other chars. In most cases this will just exit (or run once in case of surogate). depending on what happens, could cause an invalid sequence, as surgate pairs counted as 2 characters (at least in my testing in firefox). shouldn't cause an issue other then a ? appearing.

/*
Alternatively could do
if (e.preventDefault) e.preventDefault(); //std
else e.returnValue = false; //IE
but then have to determine if its a printing character, which seems difficult to do cross browser.
*/
 }
}

addHandler(summary, 'keyup', trimSummary);</pre>
    </div><div id="c45" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arod Shatil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-04-01 11:57:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c44">comment #44</a>)
i believe your counting routine is most probably better than mine, but i do not like the idea of chopping.
please note that my routine *did not* &quot;block keystrokes&quot;. rather it manipulated the maxlength property of the input field and let the browser handle the actual keystrokes.

peace.</pre>
    </div><div id="c46" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-04-01 19:27:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >If anyone would like to submit some actual working JavaScript, feel free to do so at <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Edit comment/summary accepts 200 chars but is truncated on save."
   href="show_bug.cgi?id=22967">bug 22967</a> and I'll review it and commit if appropriate.  It can be standalone, so I'll integrate it into MediaWiki, but it has to actually work, since it's unlikely I'll find the time to do much fix-up.  Let's keep this bug for discussing schema changes.  Thanks.</pre>
    </div><div id="c47" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jan Paul Posma</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-24 19:50:17 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=8454" name="attach_8454" title="Schema change">attachment 8454</a> <a href="attachment.cgi?id=8454&amp;action=edit" title="Schema change">[details]</a></span>
Schema change

This patch changes the schema for MySQL, SQLite, MS SQL, IBM DB2, and Oracle. PostgreSQL already stored everything in TEXT types.

Updated columns are:
* ar_comment
* fa_description
* img_description
* ipb_reason
* log_comment
* oi_description
* pt_reason
* rc_comment
* rev_comment

All these columns are now varchar(1024) binary, although this number can easily be changed by replacing the values in the patch.

Note that the actual limits can be enforced in the software and don't have to be 1024 bytes. Perhaps we can discuss increasing the limit in the user interface in other bugs.</pre>
    </div><div id="c48" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-24 20:34:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This patch has the potential for serious performance impact on Wikimedia sites, so it needs to be discussed with someone like Tim or Brion before anyone considers committing it.</pre>
    </div><div id="c49" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-25 21:12:39 UTC
        </span>
      </div>



<pre class="bz_comment_text" >As a schema change touching some of the biggest and most active core tables, it's an issue of deployment rather than coding or review.

Applying these schema changes will require rebuilds of HUGE tables like 'revision' -- that probably means slow application on slave servers and a master context switch, which probably needs to be carefully coordinated.


I'm also a bit leery about just upping the limit from 255 to 1024 bytes; it doesn't solve the practical problems with the limits like too-long strings being cropped (unless we painstakingly assure that there's a strict 255-character limit applied on Unicode input prior to insertion into the database, in which case we're still enforcing the too-small limits and preventing useful slightly longer texts).</pre>
    </div><div id="c50" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-25 21:54:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >We can't have covering indexing on 1024-byte long fields (nor we can actually have any kind of indexing on them)</pre>
    </div><div id="c51" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-25 22:05:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c49">comment #49</a>)
<span class="quote">&gt; I'm also a bit leery about just upping the limit from 255 to 1024 bytes; it
&gt; doesn't solve the practical problems with the limits like too-long strings
&gt; being cropped (unless we painstakingly assure that there's a strict
&gt; 255-character limit applied on Unicode input prior to insertion into the
&gt; database, in which case we're still enforcing the too-small limits and
&gt; preventing useful slightly longer texts).</span >

I think it makes more sense to impose any limit at the application level and make the fields all blobs.

(In reply to <a href="show_bug.cgi?id=4715#c50">comment #50</a>)
<span class="quote">&gt; We can't have covering indexing on 1024-byte long fields (nor we can actually
&gt; have any kind of indexing on them)</span >

I don't follow this. As far as I can see, none of the affected fields are indexed (or would ever need to be).</pre>
    </div><div id="c52" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Platonides</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-25 23:28:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c50">comment #50</a>)
<span class="quote">&gt; We can't have covering indexing on 1024-byte long fields (nor we can actually
&gt; have any kind of indexing on them)</span >

Why would we want to index the summaries?


I'm not convinced of this change, though.</pre>
    </div><div id="c53" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Domas Mituzas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-25 23:40:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; Why would we want to index the summaries?</span >

To allow covering index reads for features like 'user contributions'</pre>
    </div><div id="c54" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Roan Kattouw</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-26 15:13:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c53">comment #53</a>)
<span class="quote">&gt; &gt; Why would we want to index the summaries?
&gt; 
&gt; To allow covering index reads for features like 'user contributions'</span >

To clarify: one thing that is not in the default MW schema but is on the WMF databases is an extended usertext_timestamp index on the revision table that covers all fields selected by the user contributions query. This allows faster retrieval of the results: the database doesn't have to look at the actual row because all of the data is already in the index.

Vanilla MW:
KEY `usertext_timestamp` (`rev_user_text`, `rev_timestamp`)

WMF:
KEY `usertext_timestamp` (`rev_user_text`, `rev_timestamp`, `rev_user`, `rev_deleted`, `rev_minor_edit`, `rev_text_id`, `rev_comment`)</pre>
    </div><div id="c55" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-26 19:27:59 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=4715#c54">comment #54</a>)
<span class="quote">&gt; To clarify: one thing that is not in the default MW schema but is on the WMF
&gt; databases is an extended usertext_timestamp index on the revision table that
&gt; covers all fields selected by the user contributions query. This allows faster
&gt; retrieval of the results: the database doesn't have to look at the actual row
&gt; because all of the data is already in the index.
&gt; 
&gt; Vanilla MW:
&gt; KEY `usertext_timestamp` (`rev_user_text`, `rev_timestamp`)
&gt; 
&gt; WMF:
&gt; KEY `usertext_timestamp` (`rev_user_text`, `rev_timestamp`, `rev_user`,
&gt; `rev_deleted`, `rev_minor_edit`, `rev_text_id`, `rev_comment`)</span >

Thank you for the clarification, Roan. Much appreciated.

Domas also pointed me toward this old blog post of his that explains the reasoning for a broader index: &lt;<a href="http://dom.as/2007/01/26/mysql-covering-index-performance/">http://dom.as/2007/01/26/mysql-covering-index-performance/</a>&gt;.</pre>
    </div><div id="c56" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sumana Harihareswara</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-11-09 03:36:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Seems like this fix needs further review and affects performance, so I'm marking the bug with the appropriate keywords.</pre>
    </div><div id="c58" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Siddhartha Ghai</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-03-01 14:16:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Any chance of any action on this now? It's been almost three years since the last comments.</pre>
    </div><div id="c59" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Quim Gil</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-04-10 07:08:38 UTC
        </span>
      </div>



<pre class="bz_comment_text" >As initially asked in <a class="bz_bug_link 
          bz_status_NEW "
   title="NEW - Increasing the length of the edit summary (tracking)"
   href="show_bug.cgi?id=4714#c16">bug 4714 comment 16</a>:

What process do we need to resolve this request in a way or another? A chat between maintainers? A thread in wikitech-l? A formal architecture RfC seems excessive.

Even if the implementation is technical, the question is social: do we as MediaWiki / Wikimedia communities want the possibility to post longer edit summaries?

This request was filed in 2006! Let's kick the discussion to resolve it.</pre>
    </div><div id="c60" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-04-10 09:01:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The result of a poll in the German Wikipedia shows that this bug is the 5th most annoying bug: <a href="https://de.wikipedia.org/wiki/Wikipedia:Umfragen/Technische_W%C3%BCnsche/Top_20">https://de.wikipedia.org/wiki/Wikipedia:Umfragen/Technische_W%C3%BCnsche/Top_20</a>

(In reply to Quim Gil from <a href="show_bug.cgi?id=4715#c59">comment #59</a>)
<span class="quote">&gt; 
&gt; Even if the implementation is technical, the question is social: do we as
&gt; MediaWiki / Wikimedia communities want the possibility to post longer edit
&gt; summaries?</span >

That is a real good point!</pre>
    </div><div id="c61" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c61">Comment 61</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bawolff (Brian Wolff)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-04-10 14:48:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Raimond Spekking from <a href="show_bug.cgi?id=4715#c60">comment #60</a>)
<span class="quote">&gt; The result of a poll in the German Wikipedia shows that this bug is the 5th
&gt; most annoying bug:
&gt; <a href="https://de.wikipedia.org/wiki/Wikipedia:Umfragen/Technische_W%C3%BCnsche/">https://de.wikipedia.org/wiki/Wikipedia:Umfragen/Technische_W%C3%BCnsche/</a>
&gt; Top_20
&gt; 
&gt; (In reply to Quim Gil from <a href="show_bug.cgi?id=4715#c59">comment #59</a>)
&gt; &gt; 
&gt; &gt; Even if the implementation is technical, the question is social: do we as
&gt; &gt; MediaWiki / Wikimedia communities want the possibility to post longer edit
&gt; &gt; summaries?
&gt; 
&gt; That is a real good point!</span >

People in certain scripts complain often about only being able to write 85 letter summaries (63 letters if you have a really unlucky script).

Actual technical proposal above (storing full comment in external storage, not showing it in most reports unless specificly unless asked for) would probably need to be signed off on by a dba.</pre>
    </div><div id="c62" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c62">Comment 62</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Klapper</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-07-03 21:51:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Greg: Do you have any input on <a href="show_bug.cgi?id=4715#c59">comment 59</a> (what could be the process here)?

(In reply to Bawolff (Brian Wolff) from <a href="show_bug.cgi?id=4715#c61">comment #61</a>)
<span class="quote">&gt; People in certain scripts complain often about only being able to write 85
&gt; letter summaries (63 letters if you have a really unlucky script).
&gt; 
&gt; Actual technical proposal above (storing full comment in external storage,
&gt; not showing it in most reports unless specificly unless asked for) would
&gt; probably need to be signed off on by a dba.</span >

DBA = would that be springle?</pre>
    </div><div id="c63" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c63">Comment 63</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bawolff (Brian Wolff)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-07-03 22:22:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(Inreply to Andre Klapper from <a href="show_bug.cgi?id=4715#c62">comment #62</a>)
<span class="quote">&gt; Greg: Do you have any input on <a href="show_bug.cgi?id=4715#c59">comment 59</a> (what could be the process here)?
&gt; 
&gt; (In reply to Bawolff (Brian Wolff) from <a href="show_bug.cgi?id=4715#c61">comment #61</a>)
&gt; &gt; People in certain scripts complain often about only being able to write 85
&gt; &gt; letter summaries (63 letters if you have a really unlucky script).
&gt; &gt; 
&gt; &gt; Actual technical proposal above (storing full comment in external storage,
&gt; &gt; not showing it in most reports unless specificly unless asked for) would
&gt; &gt; probably need to be signed off on by a dba.
&gt; 
&gt; DBA = would that be springle?</span >

Yes.

This bug has a long history, and its a little confusing. To summarize there seem to be three things discussed:
*make various edit summary fields longer (convert to blob). Domas has vetoed that due to interfering with covering indexes. That was quite a while ago. Springle could perhaps comment on if covering indexes are still a hard requirement. I suspect they are.
*make js to make sure people dont go over limit. This is done.
*keep current limit but have &quot;...&quot; at end of comment be clickable and have js load rest of summary on click. This needs to be fleshed out a little more, but badic questions that need answering:
**would users find such a solution acceptable (design review needed).
**where would long version go? External storage?
**how would we associate edits with long version. New db fields? Sticking an id number at the end of rev_comment after some marker field?
**how long to go. If we allow infinite, should the interface treat it more like a commit summary?</pre>
    </div><div id="c64" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c64">Comment 64</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sean Pringle</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-07-04 02:45:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The rev_comment field could be increased to 767 bytes without requiring changes to the indexing for either stock Mediawiki or WMF databases. The same width limit would apply to all of the varbinary comment fields. That would allow 191 characters minimum for a 4 byte charset.

`rev_comment` varbinary(767) DEFAULT NULL

767 is a internal key-width limit per column in InnoDB. Exceeding it would block the use of covering indexes used on WMF databases for performance. 

Sounds like we could:

a) Choose to expand to a minimum of 191 characters
b) Decide whether comments should be entirely redesigned to be more flexible

My expectation is that (a) would not harm performance much, if at all, for enwiki; currently there are various factors boosting performance besides the original custom covering indexes. Eg, table partitioning on slaves handling specific query groups, and quite simply a bunch more hardware :)

Such schema changes would take some weeks to roll out, but otherwise aren't terribly painful. Certainly not a reason to avoid the issue.</pre>
    </div><div id="c65" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c65">Comment 65</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Klapper</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-08-05 22:59:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Based on <a href="show_bug.cgi?id=4715#c63">comment 63</a> and <a href="show_bug.cgi?id=4715#c64">comment 64</a> (thanks for the analysis!) some performance input would probably be welcome here, plus having somebody driving this, in order to allow unlucky scripts to get more than 63 letters for change summaries.

Greg: Anybody in mind?

And does the patch in <a href="show_bug.cgi?id=4715#c47">comment 47</a> still make sense, and work could be based on it (means: should be put into Gerrit by following <a href="http://www.mediawiki.org/wiki/Gerrit/Tutorial">http://www.mediawiki.org/wiki/Gerrit/Tutorial</a> or using <a href="http://tools.wmflabs.org/gerrit-patch-uploader/">http://tools.wmflabs.org/gerrit-patch-uploader/</a> )?</pre>
    </div><div id="c66" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c66">Comment 66</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Klapper</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-16 12:53:47 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Based on <a href="show_bug.cgi?id=4715#c63">comment 63</a> and <a href="show_bug.cgi?id=4715#c64">comment 64</a> some performance input would probably be welcome here, plus having somebody driving this, in order to allow unlucky scripts to get more than 63 letters for change summaries.

Greg: Anybody in mind?

And does the patch in <a href="show_bug.cgi?id=4715#c47">comment 47</a> still make sense, and work could be based on it (means: should be put into Gerrit by following <a href="http://www.mediawiki.org/wiki/Gerrit/Tutorial">http://www.mediawiki.org/wiki/Gerrit/Tutorial</a> or using <a href="http://tools.wmflabs.org/gerrit-patch-uploader/">http://tools.wmflabs.org/gerrit-patch-uploader/</a> )?</pre>
    </div><div id="c67" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c67">Comment 67</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Greg Grossmeier</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-10-20 16:24:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Andre Klapper from <a href="show_bug.cgi?id=4715#c65">comment #65</a>)
<span class="quote">&gt; Based on <a href="show_bug.cgi?id=4715#c63">comment 63</a> and <a href="show_bug.cgi?id=4715#c64">comment 64</a> (thanks for the analysis!) some
&gt; performance input would probably be welcome here, plus having somebody
&gt; driving this, in order to allow unlucky scripts to get more than 63 letters
&gt; for change summaries.
&gt; 
&gt; Greg: Anybody in mind?</span >

Not really no, unfortunately. Brian?</pre>
    </div><div id="c68" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c68">Comment 68</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Andre Klapper</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-07 13:58:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >bawolff: ^ ?</pre>
    </div><div id="c69" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c69">Comment 69</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Yuvi Panda</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-07 17:23:38 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hmm, so from springle's comments, looks like the action items now are:

1. Make the schema change,
2. Check for places in the code where this is displayed, and make sure they will handle this properly,
2. Co-ordinate to make that happen on wikimedia wikis,
3. Announce globally.

Does that seem correct?</pre>
    </div><div id="c70" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=4715#c70">Comment 70</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bawolff (Brian Wolff)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2014-11-08 18:25:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Andre Klapper from <a href="show_bug.cgi?id=4715#c68">comment #68</a>)
<span class="quote">&gt; bawolff: ^ ?</span >

/me does not have time to work on this right now.

(In reply to Yuvi Panda from <a href="show_bug.cgi?id=4715#c69">comment #69</a>)
<span class="quote">&gt; Hmm, so from springle's comments, looks like the action items now are:
&gt; 
&gt; 1. Make the schema change,
&gt; 2. Check for places in the code where this is displayed, and make sure they
&gt; will handle this properly,
&gt; 2. Co-ordinate to make that happen on wikimedia wikis,
&gt; 3. Announce globally.
&gt; 
&gt; Does that seem correct?</span >

Yes. Also make sure that maxlength attributes, and jquery.bytecounter (or whatever the js that does max byte count is called) is updated appropiately.

The only tricky bit might be not breaking things for people using myisam or other db backends that might have different limits on the index. Otherwise should be relatively straight forward.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>

    <hr><div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=4715&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=4715">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=4715">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=4715">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="head" class="noprint">
			<!-- /search -->
			<div id="p-search">
				<h5><label for="searchInput">Search</label></h5>
				<form id="searchform" action="buglist.cgi" method="get"
				 onsubmit="if (this.quicksearch.value == '')
				 { alert('Please enter one or more search terms first.');
				 return false; } return true;">
					<input type='hidden' name="title" value="Special:Search"/>
					<div id="simpleSearch">
						<input id="searchInput" name="quicksearch" type="text" title="Search Bugzilla [alt-f]" accesskey="f" value="" />
						<button id="searchButton" type='submit' name='button' title="Search Bugzilla for this text">&nbsp;</button>
					</div>
				</form>
			</div>
			<!-- /search -->
			<!-- personal -->
			<div id="p-personal" class="">
				<h5>Personal tools</h5>
				<ul >
							<li id="new_account_container">
								<a href="createaccount.cgi">New&nbsp;Account</a>
							</li>
						<li id="mini_login_container">
  <span class="separator">| </span>
  <a id="login_link" href="show_bug.cgi?id=4715&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('')">Log In</a>

  
  <form action="show_bug.cgi?id=4715" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login"
        onsubmit="return check_mini_login_fields( '' );"
  >
    <input id="Bugzilla_login" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('')"
    >
    <input class="bz_password" 
           id="Bugzilla_password" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy" value="password"
           title="Password"
           onfocus="mini_login_on_focus('')"
    >
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "email address",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('')">[x]</a>
  </form>
</li>
<li id="forgot_container">
  <span class="separator">| </span>
  <a id="forgot_link" href="show_bug.cgi?id=4715&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form"
        class="mini_forgot bz_default_hidden">
    <label for="login">Login:</label>
    <input type="text" name="loginname" size="20" id="login">
    <input id="forgot_button" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token" name="token" value="1419364014-FYSLJw8tF0gPq5_KcgGdmcZXkvEH7NRi5-bDW2q9apA">
    <a href="#" onclick="return hide_forgot_form('')">[x]</a>
  </form>
</li>

				</ul>
			</div>
			<!-- /personal -->
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="panel" class="noprint">
				<!-- logo -->
				<div id="p-logo"><a style="background-image: url(skins/contrib/Wikimedia/images/bugzilla-logo.png);" href="./"  title="Visit the main page"></a></div>
				<!-- /logo -->
				<!-- navigation -->
				<div class="portal">
					<h5>Navigation</h5>
					<div class="body">
						<ul><li><a href="query.cgi?format=specific">Search bugs</a></li>
			<li><a href="query.cgi?format=advanced">Advanced search</a></li>
			<li><a href="describecomponents.cgi">Browse projects</a></li>
			<li><a href="enter_bug.cgi">Enter a new bug</a></li>
                        <li>
                                <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
                        </li>	
						</ul>
					</div>
				</div>
				<!-- /navigation -->
				<!-- interaction -->
				<!-- /interaction -->
				<!-- toolbox -->
				<div class="portal">
					<h5>Links</h5>
					<div class="body">
						<ul><li><a href="report.cgi">Reports</a></li>
			<li><a href="weekly-bug-summary.cgi?tops=10&days=7">Weekly Summary</a></li>
				<li>
						<a href="request.cgi">Requests</a>
				</li>
						</ul>
					</div>
				</div>
				<!-- /toolbox -->
			</div>
		<!-- /panel -->		

		<!-- footer -->
		<div id="footer" >
			<ul id="footer-info">
				<li>Bugzilla version 4.4.5</li>
			</ul>

			<ul id="footer-places">
				<li><a href="https://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Bug_management/Bugzilla_etiquette" title="Bug management/Bugzilla etiquette">Bugzilla etiquette</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:About" title="Project:About">About MediaWiki.org</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
			</ul>
			<ul id="footer-icons" class="noprint">
				<li id="footer-icon-poweredby"><a href="http://www.bugzilla.org/"><img src="skins/contrib/Wikimedia/images/bugzilla-badge.png" height="31" width="88" alt="Powered by Bugzilla" /></a></li>
			</ul>
			<div style="clear:both"></div>
		<div class="outro"></div>
		</div>
		<!-- /footer -->
	</body>
</html>