<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 637 &ndash; Image captions containing external links are broken in HEAD</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://old-bugzilla.wikimedia.org/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=637&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=637">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=637">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=637">



    
    <link href="skins/standard/global.css?1389015166"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/global.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/show_bug.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="extensions/Voting/web/style.css?1389015166" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1389015166" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="skins/contrib/Wikimedia/global.css?1402013050" rel="stylesheet"
        type="text/css" title="Wikimedia"><link href="skins/contrib/Wikimedia/show_bug.css?1402441020" rel="stylesheet"
        type="text/css" title="Wikimedia">

      <link rel="stylesheet" href="skins/contrib/Wikimedia/vector.css?1403109885" media="screen"
            title="Wikimedia" />


    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1389015166"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1389015166"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1389015166"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1389015166"></script><script type="text/javascript" src="js/yui/json/json-min.js?1389015166"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1389015166"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1389015166"></script><script type="text/javascript" src="js/global.js?1389015166"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 15
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 637 – Image captions containing external links are broken in HEAD",  
                             "show_bug.cgi?id=637" );
        document.title = "Bug 637 – Image captions containing external links are broken in HEAD";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 637 – Image captions containing external links are broken in HEAD", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1389015166"></script><script type="text/javascript" src="js/field.js?1389015166"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class="old-bugzilla-wikimedia-org bz_bug bz_status_RESOLVED bz_product_MediaWiki bz_component_Parser bz_bug_637 yui-skin-sam">



<!-- If custom Wikimedia skin -->
   <div id="page-base" class="noprint"></div>
                <div id="head-base" class="noprint"></div>
                <!-- content -->
                <div id="content-container" >
                        <a id="top"></a>
                        <!-- bodyContent -->
                        <div id="bodyContent">
      <p class="header_addl_info">Last modified: 2010-05-15 15:33:46 UTC</p>

 <!-- If custom Wikimedia skin -->
<h1>Wikimedia Bugzilla is closed!</h1><div id="message" style="text-align: center; color: black">Wikimedia has <a href="https://www.mediawiki.org/wiki/Phabricator/versus_Bugzilla">migrated from Bugzilla to Phabricator</a>. Bug reports should be created and updated in <a href="https://phabricator.wikimedia.org">Wikimedia Phabricator</a> instead. Please <a href="https://www.mediawiki.org/wiki/Phabricator/Help#Creating_your_account">create an account in Phabricator and add your Bugzilla email address</a> to it.<br>Wikimedia Bugzilla is read-only. If you try to edit or create any bug report in Bugzilla you will be shown an intentional error message.<br>In order to access the Phabricator task corresponding to a Bugzilla report, just remove "static-" from its URL.<br>You could still run searches in Bugzilla or access your <a href="https://old-bugzilla.wikimedia.org/page.cgi?id=voting%2Fuser.html">list of votes</a> but bug reports will obviously not be up-to-date in Bugzilla.</div>

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2010-05-15 15:33:46">
  <input type="hidden" name="longdesclength" value="13">
  <input type="hidden" name="id" value="637">
  <input type="hidden" name="token" value="1419357621-NEZdVWh4YySOO4p4V0uww7Pb3Q4g44rlbQaZ3UfBVaU">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=637"><b>Bug&nbsp;637</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Image captions containing external links are broken in HEAD</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>Image captions containing external links are broken in HEAD
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('Image captions containing external links are broken in HEAD', '');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >MediaWiki</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr>
    
    <td class="field_label">
      <label for="component">
        <a href="describecomponents.cgi?product=MediaWiki">
        Component:</a>
      </label>
    </td>
    
    <td>Parser
    
    (<a href="buglist.cgi?component=Parser&product=MediaWiki&resolution=---"
      target="new_window">Other open bugs</a>)
    
    </td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>1.4.x
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">PC
       All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Normal
       normal<span id="votes_container">
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=637#vote_637">vote</a>)
  </span>
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=fields.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Wil Mahan</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'wikibugs-l\x40lists.wikimedia.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=637&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=637">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2004-10-03 03:27 UTC by <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2010-05-15 15:33 UTC 
      (<a href="show_activity.cgi?id=637">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>2 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="rowan.collins">rowan.collins</option>
                <option value="wikibugs-l">wikibugs-l</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_browser">


  <a 
      title="Please set this if the described problem seems to happen only in a specific web browser."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_browser"
  >Web browser:</a>

</th>
  <td class="field_value "
      id="field_container_cf_browser"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_platform">


  <a 
      title="The Mobile Platform the described problem was experienced on."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_platform"
  >Mobile Platform:</a>

</th>
  <td class="field_value "
      id="field_container_cf_platform"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_hugglebeta">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_hugglebeta"
  >Assignee Huggle Beta Tester:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_hugglebeta"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=63"
               title="View the content of the attachment">
          <b>Rowan's replaceImageLinks patch</b></a>

          <span class="bz_attach_extra_info">
              (2.92 KB,
                patch)

            <br>
            <a href="#attach_63"
               title="Go to the comment associated with the attachment">2004-10-03 03:29 UTC</a>,

            <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=63&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_patch bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=64"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Wil's patch</span></b></a>

          <span class="bz_attach_extra_info">
              (3.53 KB,
                patch)

            <br>
            <a href="#attach_64"
               title="Go to the comment associated with the attachment">2004-10-03 03:32 UTC</a>,

            <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=64&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=66"
               title="View the content of the attachment">
          <b>Reworking of Wil's concept, only different</b></a>

          <span class="bz_attach_extra_info">
              (6.93 KB,
                patch)

            <br>
            <a href="#attach_66"
               title="Go to the comment associated with the attachment">2004-10-05 00:46 UTC</a>,

            <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=66&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=69"
               title="View the content of the attachment">
          <b>trivial fix</b></a>

          <span class="bz_attach_extra_info">
              (952 bytes,
                patch)

            <br>
            <a href="#attach_69"
               title="Go to the comment associated with the attachment">2004-10-05 17:04 UTC</a>,

            <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=69&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (1)
        </span>
        <a href="attachment.cgi?bugid=637&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1389015166" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-03 03:27:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >In 1.4pre I made a change that broke image captions containing external
links. In essence, the problem is that when images are parsed before
external links, things like the image &quot;alt&quot; text break. I'm filing this
bug to track the possibilities for fixing it.

(Background: my change was calling replaceInternalLinks() before
replaceExternalLinks(). I did this to fix <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [[page|http://url/]] should link to page, not http://url/"
   href="show_bug.cgi?id=2">bug 2</a>, and I think it is
best way to fix that bug. However, I'm willing to reconsider if
necessary. One possibility is to back out my change and WONTFIX <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - [[page|http://url/]] should link to page, not http://url/"
   href="show_bug.cgi?id=2">bug
2</a>, since it represents context sensitivity, and is tricky to fix,
for a rare case.)

Rowan Collins noticed this problem with image captions and made
a patch to fix it. I also made a patch using a different
approach. Both patches pass all the relevant parser test
cases; I believe they are both functionally correct. To me, the
only issue is which is better from a design standpoint.

Currently, replaceInternalLinks() is called twice; the first
pass replaces any links inside image captions, and the second
pass replaces the images with captions containing links,
themselves. With either patch, replaceInternalLinks() is instead
called only once.</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-03 03:29:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=63" name="attach_63" title="Rowan's replaceImageLinks patch">attachment 63</a> <a href="attachment.cgi?id=63&amp;action=edit" title="Rowan's replaceImageLinks patch">[details]</a></span>
Rowan's replaceImageLinks patch

Rowan's patch adds a new method, replaceImageLinks(), which
called after replaceExternalLinks(). Thus replaceInternalLinks()
no longer handles images. The bug is avoided because
all images are processed after external links.

Rowan described the patch himself at
<a href="http://mail.wikipedia.org/pipermail/wikitech-l/2004-October/025647.html">http://mail.wikipedia.org/pipermail/wikitech-l/2004-October/025647.html</a>

I think this patch is well done, and shows a good understanding
of the problem. My main criticism is that it represents a new
parser pass, and I think we should move toward fewer passes,
not more. A counteragument is that calling replaceInternalLinks()
twice is already an extra pass, so the patch only replaces
one pass with another.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-03 03:32:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=64" name="attach_64" title="Wil's patch">attachment 64</a> <a href="attachment.cgi?id=64&amp;action=edit" title="Wil's patch">[details]</a></span>
Wil's patch

My patch checks every link to see if it is an image,
and if so, recursively calls replace{Internal,External}Links
on the link text. After an image is processed, it
is replaced by a placeholder, so it is not parsed further.
This should be OK, because tables, lists, etc. aren't
allowed in captions anyway.

I prefer this approach because there is only one
replaceInternalLinks() pass. Of course, any comments
or other ideas would be welcome.</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-03 18:19:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=637#c2">comment #2</a>)
<span class="quote">&gt; Created an attachment (id=64) [edit]
&gt; Wil's patch</span >

I can see one major problem with your patch, which is that you use a text check
for the image prefix rather than Title::getNamespace(). This isn't guaranteed to
work, since a namespace can have multiple &quot;aliases&quot;. I'll have to have a better
look to see if there are any other issues.</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-04 00:50:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=637#c3">comment #3</a>)
<span class="quote">&gt; I can see one major problem with your patch, which is that you use a text check
&gt; for the image prefix rather than Title::getNamespace(). This isn't guaranteed to
&gt; work, since a namespace can have multiple &quot;aliases&quot;. I'll have to have a better
&gt; look to see if there are any other issues.</span >

Thanks for looking at the patch. Title::secureAndSplit() uses the same code
for checking for the Image namespace. Could you give an example of such an
&quot;alias&quot;?</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-04 14:33:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=637#c4">comment #4</a>)
<span class="quote">&gt; Thanks for looking at the patch. Title::secureAndSplit() uses the same code
&gt; for checking for the Image namespace. Could you give an example of such an
&gt; &quot;alias&quot;?</span >

I think that $imgpre stuff is actually redundant: the actual check for :Image:
(and also :Category:) comes within replaceInternalLinks() itself; after all, it
doesn't really constitute a different namespace, just a different link behaviour:

&lt;code&gt;
 $noforce = (substr($m[1], 0, 1) != ':');
 if (!$noforce) {
     # Strip off leading ':'
     $link = substr($link, 1);
 }
&lt;/code&gt;

As for namespace aliases, I had it on good authority but couldn't find them
either, until I looked at Title::secureAndSplit(), which checks first
Namespace::getCanonicalIndex() and then $wgContLang-&gt;getNsIndex(). So a wiki
with a localised image namespace called &quot;Bild:&quot; will still treat &quot;Image:&quot; as
being the same namespace. I think the only sensible way of doing it is creating
a Title object, since somebody might want to change this behaviour further in
the future.

On the other hand, I think there are a few ways of doing what your patch does
slightly more efficiently, so I'll probably post a new one later.</pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-04 17:43:33 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=637#c5">comment #5</a>)

<span class="quote">&gt; I think that $imgpre stuff is actually redundant: the actual check for :Image:
&gt; (and also :Category:) comes within replaceInternalLinks() itself; after all, it
&gt; doesn't really constitute a different namespace, just a different link behaviour:</span >

In replaceInternalLinks(), yes, but that is not the only user of Title.
For example, when including a template, that code is necessary.
 
<span class="quote">&gt; As for namespace aliases, I had it on good authority but couldn't find them
&gt; either, until I looked at Title::secureAndSplit(), which checks first
&gt; Namespace::getCanonicalIndex() and then $wgContLang-&gt;getNsIndex(). So a wiki
&gt; with a localised image namespace called &quot;Bild:&quot; will still treat &quot;Image:&quot; as
&gt; being the same namespace. I think the only sensible way of doing it is creating</span >

&quot;Bild:&quot; should still work with my patch. The assumption is that the localization
of &quot;Image&quot; is unique for a given language; I could be wrong, but I haven't seen
a counterexample.

<span class="quote">&gt; a Title object, since somebody might want to change this behaviour further in
&gt; the future.</span >

I would rather avoid creating a Title object, because I don't see a
reason to incur the overhead. However, if it is indeed necessary,
it would not be that difficult to do, and we already create the Title
for all valid links. So I don't see it as a major problem with the
patch.

<span class="quote">&gt; On the other hand, I think there are a few ways of doing what your patch does
&gt; slightly more efficiently, so I'll probably post a new one later.</span >

Indeed, I think the replaceInternalLinks() method is slow in general, and
I agree there is room for improvement. I believe correctness should come
before optimizations, though.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-04 18:02:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=637#c6">comment #6</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=637#c5">comment #5</a>)
&gt; &gt; I think that $imgpre stuff is actually redundant: the actual check for :Image:
&gt; &gt; (and also :Category:) comes within replaceInternalLinks() itself; after all, it
&gt; &gt; doesn't really constitute a different namespace, just a different link</span >
behaviour:
<span class="quote">&gt; 
&gt; In replaceInternalLinks(), yes, but that is not the only user of Title.
&gt; For example, when including a template, that code is necessary.</span >

Why? If it is, then we need to fix that code. The conflict is between &quot;:&quot; as the
name of the MAIN namespace, and &quot;:&quot; as a prefix to suppress the magicality of
links to namespaces such as &quot;Image:&quot; and &quot;Category:&quot;. I'm not sure why the
latter case would ever occur anywhere other than links (in the sense that if
it's not a link, it's not going to do anything &quot;magic&quot; anyway), which is why I
assumed that stripping the prefix in replaceInternalLinks() was sufficient to
distiguish. Can you identify any other cases where it would be needed?

<span class="quote">&gt; &quot;Bild:&quot; should still work with my patch. The assumption is that the localization
&gt; of &quot;Image&quot; is unique for a given language; I could be wrong, but I haven't seen
&gt; a counterexample.</span >

But &quot;Image:&quot; will not, since you don't take into account the existence of the
&quot;canonical names&quot;; this isn't a big deal, but it creates an anomaly, and
disables a function unrelated to the problem you are trying to solve. The
mapping of namespace_name to namespace is potentially many-to-one; currently, a
localisation can have &quot;Bild:&quot; and &quot;Image:&quot; both mapping to the image namespace.
 
<span class="quote">&gt; I would rather avoid creating a Title object, because I don't see a
&gt; reason to incur the overhead. However, if it is indeed necessary,
&gt; it would not be that difficult to do, and we already create the Title
&gt; for all valid links. So I don't see it as a major problem with the
&gt; patch.</span >

No, it's not a major problem; but I *can't* see a &quot;correct&quot; [non-hacky] way of
avoiding it, so it's a need for revision. Hopefully, there won't be too many
cases of something that could be an image link, but actually is just an invalid
one (those are the cases where creating a Title object gives extra overhead).</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-05 00:46:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=66" name="attach_66" title="Reworking of Wil's concept, only different">attachment 66</a> <a href="attachment.cgi?id=66&amp;action=edit" title="Reworking of Wil's concept, only different">[details]</a></span>
Reworking of Wil's concept, only different

Right, I've finally finished my patch, based on Wil's. Basically, I think this
is the better approach, because only problem links have to go through extra
processing, not all image links; this should make it more efficient.

The differences with Wil's patch are:
* do the special case code after the Title object has been created, so that we
can reliably check the namespace
* use a couple or regexes, rather than counting the number of ]]'s on a line
* try and take every opportunity to give up, to minimise the load of the
special case code

This works for me, but then that was true of the last one. I just hope there's
nothing wrong with this, cos I've been banging my head against it for hours!</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-05 03:57:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Your patch looks good. I committed it, with a few cosmetic changes.
Thanks!

Could you clarify the category part of your change (not creating
$nnt)? It looks ok at first glance, but presumably it was done that
way for a reason.

Also, I'm not sure stripping tags from the alt text is the best
approach, but I committed it pending a resolution to <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Image syntax shouldn't use caption as alt= text"
   href="show_bug.cgi?id=368">bug 368</a>,
since it makes the parser tests work.</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-05 12:28:55 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Thanks for the vote of confidence :)

The $nnt thing was just a coincidental fix I spotted: I asked on IRC, and no-one
could come up with any purpose, or indeed any difference that it would make to
anything; Brion blamed it on a &quot;brainfart&quot; on Magnus' part when he first checked
in the category namespace. I couldn't make anything break without it, so I
tidied it away for efficiency's sake.

As for stripping tags, it was already done somewhere else in the code; it nicely
unwraps ext.links, and used to unwrap internal links, too, I think, but now the
placeholders are comments they just disappear altogether. I've filed that as <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - link-text disappears from image alt/title attributes"
   href="show_bug.cgi?id=648">bug
648</a>, since we may still want to generate a title using this method, even if we
eventually get an agreement on <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Image syntax shouldn't use caption as alt= text"
   href="show_bug.cgi?id=368">bug 368</a>. (Come to think, it will get rid of
things like &quot;&lt;small&gt;&quot; or &quot;&lt;em&gt;&quot;, too, which would otherwise get escaped and be ugly)

Meanwhile, I think I found a case where my patch is sub-optimal: in
&quot;[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Image%3Afoo">Image:foo</a>|    [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=link">link</a>]]&quot;, the [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=link">link</a>]] should still be parsed, but at the
moment it will get eaten in the (failed) attempt to turn it into an image
caption. Not a huge problem, since that markup is essentially broken anyway, but
probably not expected behaviour.
I haven't tested this (I haven't even tested that it breaks yet!) but I think
all we need is to add the following:
 # we couldn't find the end of this imageLink, so output it raw
+$text = $this-&gt;replaceExternalLinks($text);
 $s .= $prefix . '[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=%27%20.%20%24link%20.%20%27">' . $link . '</a>|' . $text;
No need to do it on the next }else{ down, because we won't have eaten any &quot;[[&quot;s</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rowan Collins [IMSoP]</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-05 17:04:29 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=69" name="attach_69" title="trivial fix">attachment 69</a> <a href="attachment.cgi?id=69&amp;action=edit" title="trivial fix">[details]</a></span>
trivial fix

Confirmed: the patch as committed will fail to render all links after a broken
Image caption:
&quot;[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Image%3ARowan.jpeg">Image:Rowan.jpeg</a>|thumb|This is a broken caption. But [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=foo">foo</a>|this]] is just an
ordinary link.&quot; is rendered entirely as raw text.

Adding that line (as per this tiny patch) does indeed make that link work.
Annoyingly, it will still break any other captions with links in further down
the page, but I think that's an obscure enough case that we don't need to worry
about it.</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=637#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wil Mahan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2004-10-06 19:24:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=637#c11">comment #11</a>)
<span class="quote">&gt; Adding that line (as per this tiny patch) does indeed make that link work.
&gt; Annoyingly, it will still break any other captions with links in further down
&gt; the page, but I think that's an obscure enough case that we don't need to worry
&gt; about it.</span >

Applied, thanks. I agree that broken image captions aren't important enough to
worry about further.</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>

    <hr><div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=637&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=637">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=637">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=637">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="head" class="noprint">
			<!-- /search -->
			<div id="p-search">
				<h5><label for="searchInput">Search</label></h5>
				<form id="searchform" action="buglist.cgi" method="get"
				 onsubmit="if (this.quicksearch.value == '')
				 { alert('Please enter one or more search terms first.');
				 return false; } return true;">
					<input type='hidden' name="title" value="Special:Search"/>
					<div id="simpleSearch">
						<input id="searchInput" name="quicksearch" type="text" title="Search Bugzilla [alt-f]" accesskey="f" value="" />
						<button id="searchButton" type='submit' name='button' title="Search Bugzilla for this text">&nbsp;</button>
					</div>
				</form>
			</div>
			<!-- /search -->
			<!-- personal -->
			<div id="p-personal" class="">
				<h5>Personal tools</h5>
				<ul >
							<li id="new_account_container">
								<a href="createaccount.cgi">New&nbsp;Account</a>
							</li>
						<li id="mini_login_container">
  <span class="separator">| </span>
  <a id="login_link" href="show_bug.cgi?id=637&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('')">Log In</a>

  
  <form action="show_bug.cgi?id=637" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login"
        onsubmit="return check_mini_login_fields( '' );"
  >
    <input id="Bugzilla_login" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('')"
    >
    <input class="bz_password" 
           id="Bugzilla_password" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy" value="password"
           title="Password"
           onfocus="mini_login_on_focus('')"
    >
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "email address",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('')">[x]</a>
  </form>
</li>
<li id="forgot_container">
  <span class="separator">| </span>
  <a id="forgot_link" href="show_bug.cgi?id=637&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form"
        class="mini_forgot bz_default_hidden">
    <label for="login">Login:</label>
    <input type="text" name="loginname" size="20" id="login">
    <input id="forgot_button" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token" name="token" value="1419357621-V3bAbtpKvQO0p52FpucP7Ah8s_dzzNlTRAqHVCZ23BI">
    <a href="#" onclick="return hide_forgot_form('')">[x]</a>
  </form>
</li>

				</ul>
			</div>
			<!-- /personal -->
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="panel" class="noprint">
				<!-- logo -->
				<div id="p-logo"><a style="background-image: url(skins/contrib/Wikimedia/images/bugzilla-logo.png);" href="./"  title="Visit the main page"></a></div>
				<!-- /logo -->
				<!-- navigation -->
				<div class="portal">
					<h5>Navigation</h5>
					<div class="body">
						<ul><li><a href="query.cgi?format=specific">Search bugs</a></li>
			<li><a href="query.cgi?format=advanced">Advanced search</a></li>
			<li><a href="describecomponents.cgi">Browse projects</a></li>
			<li><a href="enter_bug.cgi">Enter a new bug</a></li>
                        <li>
                                <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
                        </li>	
						</ul>
					</div>
				</div>
				<!-- /navigation -->
				<!-- interaction -->
				<!-- /interaction -->
				<!-- toolbox -->
				<div class="portal">
					<h5>Links</h5>
					<div class="body">
						<ul><li><a href="report.cgi">Reports</a></li>
			<li><a href="weekly-bug-summary.cgi?tops=10&days=7">Weekly Summary</a></li>
				<li>
						<a href="request.cgi">Requests</a>
				</li>
						</ul>
					</div>
				</div>
				<!-- /toolbox -->
			</div>
		<!-- /panel -->		

		<!-- footer -->
		<div id="footer" >
			<ul id="footer-info">
				<li>Bugzilla version 4.4.5</li>
			</ul>

			<ul id="footer-places">
				<li><a href="https://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Bug_management/Bugzilla_etiquette" title="Bug management/Bugzilla etiquette">Bugzilla etiquette</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:About" title="Project:About">About MediaWiki.org</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
			</ul>
			<ul id="footer-icons" class="noprint">
				<li id="footer-icon-poweredby"><a href="http://www.bugzilla.org/"><img src="skins/contrib/Wikimedia/images/bugzilla-badge.png" height="31" width="88" alt="Powered by Bugzilla" /></a></li>
			</ul>
			<div style="clear:both"></div>
		<div class="outro"></div>
		</div>
		<!-- /footer -->
	</body>
</html>