<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
    <title>Bug 6455 &ndash; Set $wgPFEnableStringFunctions = true on WMF wikis</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<link rel="Top" href="https://old-bugzilla.wikimedia.org/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=6455&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=6455">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=6455">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=6455">



    
    <link href="skins/standard/global.css?1389015166"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/global.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="skins/standard/show_bug.css?1389015166" rel="stylesheet"
        type="text/css" ><link href="extensions/Voting/web/style.css?1389015166" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      


  <link href="skins/standard/IE-fixes.css?1389015166" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="skins/contrib/Wikimedia/global.css?1402013050" rel="stylesheet"
        type="text/css" title="Wikimedia"><link href="skins/contrib/Wikimedia/show_bug.css?1402441020" rel="stylesheet"
        type="text/css" title="Wikimedia">

      <link rel="stylesheet" href="skins/contrib/Wikimedia/vector.css?1403109885" media="screen"
            title="Wikimedia" />


    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js?1389015166"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js?1389015166"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js?1389015166"></script><script type="text/javascript" src="js/yui/connection/connection-min.js?1389015166"></script><script type="text/javascript" src="js/yui/json/json-min.js?1389015166"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js?1389015166"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js?1389015166"></script><script type="text/javascript" src="js/global.js?1389015166"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 15
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null, 
                             "Bug 6455 – Set $wgPFEnableStringFunctions = true on WMF wikis",  
                             "show_bug.cgi?id=6455" );
        document.title = "Bug 6455 – Set $wgPFEnableStringFunctions = true on WMF wikis";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "Bug 6455 – Set $wgPFEnableStringFunctions = true on WMF wikis", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();
    });
    // -->
    </script>
<script type="text/javascript" src="js/util.js?1389015166"></script><script type="text/javascript" src="js/field.js?1389015166"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class="old-bugzilla-wikimedia-org bz_bug bz_status_RESOLVED bz_product_Wikimedia bz_component_Site_requests bz_bug_6455 yui-skin-sam">



<!-- If custom Wikimedia skin -->
   <div id="page-base" class="noprint"></div>
                <div id="head-base" class="noprint"></div>
                <!-- content -->
                <div id="content-container" >
                        <a id="top"></a>
                        <!-- bodyContent -->
                        <div id="bodyContent">
      <p class="header_addl_info">Last modified: 2014-09-26 01:06:19 UTC</p>

 <!-- If custom Wikimedia skin -->
<h1>Wikimedia Bugzilla is closed!</h1><div id="message" style="text-align: center; color: black">Wikimedia has <a href="https://www.mediawiki.org/wiki/Phabricator/versus_Bugzilla">migrated from Bugzilla to Phabricator</a>. Bug reports should be created and updated in <a href="https://phabricator.wikimedia.org">Wikimedia Phabricator</a> instead. Please <a href="https://www.mediawiki.org/wiki/Phabricator/Help#Creating_your_account">create an account in Phabricator and add your Bugzilla email address</a> to it.<br>Wikimedia Bugzilla is read-only. If you try to edit or create any bug report in Bugzilla you will be shown an intentional error message.<br>In order to access the Phabricator task corresponding to a Bugzilla report, just remove "static-" from its URL.<br>You could still run searches in Bugzilla or access your <a href="https://old-bugzilla.wikimedia.org/page.cgi?id=voting%2Fuser.html">list of votes</a> but bug reports will obviously not be up-to-date in Bugzilla.</div>

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2014-09-26 01:06:19">
  <input type="hidden" name="longdesclength" value="155">
  <input type="hidden" name="id" value="6455">
  <input type="hidden" name="token" value="1419366931-GwBtiT5PiVWmIJ1vC_h110Z3nS6jKRunJHGqNWy3C0s">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=6455"><b>Bug&nbsp;6455</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Set $wgPFEnableStringFunctions = true on WMF wikis</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary"> 
        <tr>
            <td colspan="2">
          </td>
        </tr>
        
        <tr><th class="field_label "
    id="field_label_short_desc">

    <label for="short_desc" accesskey="s">

  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>
</label>
</th>
          <td>Set $wgPFEnableStringFunctions = true on WMF wikis
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('Set $wgPFEnableStringFunctions = true on WMF wikis', '');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          WONTFIX
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Wikimedia</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr>
    
    <td class="field_label">
      <label for="component">
        <a href="describecomponents.cgi?product=Wikimedia">
        Component:</a>
      </label>
    </td>
    
    <td>Site requests
    
    (<a href="buglist.cgi?component=Site%20requests&product=Wikimedia&resolution=---"
      target="new_window">Other open bugs</a>)
    
    </td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">

    <label for="version">

  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>
</label>
</th>
        <td>unspecified
  </td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">

    <label for="rep_platform" accesskey="h">

  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>
</label>
</th>
      <td class="field_value">All
       All
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label for="priority" accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Highest
       enhancement<span id="votes_container">
      with
      <a href="page.cgi?id=voting/bug.html&amp;bug_id=6455">86 
            votes</a>
    (<a href="page.cgi?id=voting/user.html&amp;bug_id=6455#vote_6455">vote</a>)
  </span>
      </td>
    </tr>

      <tr>
        <th class="field_label">
          <label for="target_milestone">
            <a href="page.cgi?id=fields.html#target_milestone">
            Target&nbsp;Milestone</a></label>:
        </th><td>---
  </td>
      </tr>            
          
          <tr>
      <th class="field_label">
        <a href="page.cgi?id=fields.html#assigned_to">Assigned To</a>:
      </th>
      <td><span class="vcard"><span class="fn">Nobody - You can work on this!</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'wikibugs-l\x40lists.wikimedia.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">

    <label for="bug_file_loc" accesskey="u">

  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>
</label>
</th>
    <td>
      <span id="bz_url_input_area">
          <a href="http://www.mediawiki.org/wiki/Extension:StringFunctions"><span title="http://www.mediawiki.org/wiki/Extension:StringFunctions">http://www.mediawiki.org/wiki/Extensi...
        </span></a>
      </span>
    </td>
  </tr>
  
    <tr><th class="field_label "
    id="field_label_status_whiteboard">

    <label for="status_whiteboard" accesskey="w">

  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>
</label>
</th><td colspan="2">  
  </td>
    </tr>
  
    <tr>
      <th class="field_label">
        <label for="keywords" accesskey="k">
          <a href="describekeywords.cgi"><u>K</u>eywords</a></label>:
      </th>
      <td class="field_value" colspan="2">
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
    <th class="field_label">
      <label for="duplicates">Duplicates</label>:
    </th>
    <td class="field_value" colspan="2">
      <span id="duplicates"><a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Install StringFunctions extention"
   href="show_bug.cgi?id=7654">7654</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - StringFunctions on wiktionary NL"
   href="show_bug.cgi?id=9023">9023</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Substring functionality"
   href="show_bug.cgi?id=9979">9979</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - ParserFunction to get a part of a string"
   href="show_bug.cgi?id=10231">10231</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Lithuanian Wiktionary nead Extension:StringFunctions"
   href="show_bug.cgi?id=13895">13895</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Install the StringFunctions extension on fa.wiktionary.org"
   href="show_bug.cgi?id=15658">15658</a> <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - suggestion for magic words"
   href="show_bug.cgi?id=31136">31136</a> 
      </span>
      (<a href="buglist.cgi?bug_id=7654,9023,9979,10231,13895,15658,31136">view as bug list</a>)
    </td>
  </tr>
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>
    <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable or install string parsing wikimarkup functionality on WMF wikis"
   href="show_bug.cgi?id=26092">26092</a> 
  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>
    <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WONTFIX - Enable $wgPFEnableStringFunctions on he.wikipedia"
   href="show_bug.cgi?id=29087">29087</a> 
  </td>
  </tr>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=6455&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=6455">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2006-06-26 22:04 UTC by <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2014-09-26 01:06 UTC 
      (<a href="show_activity.cgi?id=6455">History</a>)
    </td>
  
  </tr>
         <tr>
      <th class="field_label">
        <label for="newcc" accesskey="a">CC List:</label>
      </th>
      <td>55 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="326374">326374</option>
                <option value="alexander.sigachov">alexander.sigachov</option>
                <option value="Annabel">Annabel</option>
                <option value="arath">arath</option>
                <option value="b">b</option>
                <option value="bawolff+wn">bawolff+wn</option>
                <option value="bjorsch">bjorsch</option>
                <option value="brovvnout+bugzilla">brovvnout+bugzilla</option>
                <option value="catlow">catlow</option>
                <option value="cnit">cnit</option>
                <option value="daniel.a.r.werner">daniel.a.r.werner</option>
                <option value="danny.b">danny.b</option>
                <option value="daverbelt">daverbelt</option>
                <option value="dragonlordofxanther">dragonlordofxanther</option>
                <option value="fran">fran</option>
                <option value="gregory.pons">gregory.pons</option>
                <option value="gtisza">gtisza</option>
                <option value="happy.melon.wiki">happy.melon.wiki</option>
                <option value="he7d3r+bugs">he7d3r+bugs</option>
                <option value="jayvdb">jayvdb</option>
                <option value="jerabek">jerabek</option>
                <option value="jim">jim</option>
                <option value="john">john</option>
                <option value="jsimlo">jsimlo</option>
                <option value="jutiphan">jutiphan</option>
                <option value="matthew.britton">matthew.britton</option>
                <option value="mattj">mattj</option>
                <option value="mediawiki-bugs">mediawiki-bugs</option>
                <option value="mike.lifeguard+bugs">mike.lifeguard+bugs</option>
                <option value="mrzmanwiki">mrzmanwiki</option>
                <option value="msh210+wmfbugzilla">msh210+wmfbugzilla</option>
                <option value="mxn">mxn</option>
                <option value="nickanc.wiki">nickanc.wiki</option>
                <option value="number24602">number24602</option>
                <option value="nykevin.norris">nykevin.norris</option>
                <option value="p858snake">p858snake</option>
                <option value="post">post</option>
                <option value="ptw007">ptw007</option>
                <option value="public.wiki">public.wiki</option>
                <option value="questpc">questpc</option>
                <option value="reza.energy">reza.energy</option>
                <option value="richard">richard</option>
                <option value="roan.kattouw">roan.kattouw</option>
                <option value="robinhood70">robinhood70</option>
                <option value="rohde">rohde</option>
                <option value="Soroush83">Soroush83</option>
                <option value="ssanbeg">ssanbeg</option>
                <option value="tbold63">tbold63</option>
                <option value="ted_kandell">ted_kandell</option>
                <option value="tim">tim</option>
                <option value="tstarling">tstarling</option>
                <option value="vasilvv">vasilvv</option>
                <option value="vpovilaitis">vpovilaitis</option>
                <option value="webmaster">webmaster</option>
                <option value="wiki">wiki</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         <tr><th class="field_label "
    id="field_label_cf_browser">


  <a 
      title="Please set this if the described problem seems to happen only in a specific web browser."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_browser"
  >Web browser:</a>

</th>
  <td class="field_value "
      id="field_container_cf_browser"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_cf_platform">


  <a 
      title="The Mobile Platform the described problem was experienced on."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_platform"
  >Mobile Platform:</a>

</th>
  <td class="field_value "
      id="field_container_cf_platform"  colspan="2">---</td>
    </tr>
    <tr><th class="field_label  bz_hidden_field"
    id="field_label_cf_hugglebeta">


  <a 
      title="A custom Drop Down field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_hugglebeta"
  >Assignee Huggle Beta Tester:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_hugglebeta"  colspan="2">---</td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=5978"
               title="View the content of the attachment">
          <b>New version of string functions</b></a>

          <span class="bz_attach_extra_info">
              (26.59 KB,
                patch)

            <br>
            <a href="#attach_5978"
               title="Go to the comment associated with the attachment">2009-03-30 11:07 UTC</a>,

            <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=5978&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain bz_patch">
        <td valign="top">
            <a href="attachment.cgi?id=5993"
               title="View the content of the attachment">
          <b>Merge string functionality into ParserFunctions</b></a>

          <span class="bz_attach_extra_info">
              (11.17 KB,
                patch)

            <br>
            <a href="#attach_5993"
               title="Go to the comment associated with the attachment">2009-04-06 07:44 UTC</a>,

            <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=5993&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
        </span>
        <a href="attachment.cgi?bugid=6455&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>

  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1389015166" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>




<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-06-26 22:04:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Uses of string-related functions would doubtless be myriad.  One in particular
that would be handy, from my point of view, is checking whether input to a
hatnote contains &quot;[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=%22%20and%20%22">&quot; and &quot;</a>]]&quot;: if it does, then the wrapping &quot;[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=%22%20and%20%22">&quot; and &quot;</a>]]&quot;
could be dropped.  This is useful because not requiring [[]] in the parameter
input has become the norm on enwiki, and this makes it impossible to replace an
intended single link with &quot;[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Link1">Link1</a>]] or [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Link2">Link2</a>]]&quot; due to parsing oddness.  If
StringFunctions were installed, &quot;[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Link1">Link1</a>]] or [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Link2">Link2</a>]]&quot; could be used as the
parameter, and the template would drop the default brackets.

Okay, so perhaps that's a slightly pathetic reason, but there's no request open
for this yet, so let others add their own reasons.</pre>
    </div><div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Polonium</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-10-17 23:50:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >There apparantly is a problem with these functions in MediaWiki 8.0, but these
where fixed. The current version is 9.0, so they would need to be tested first.
However, this problem was solved (see
[<a href="http://meta.wikimedia.org/wiki/Talk:StringFunctions#Update_for_1.8.0">http://meta.wikimedia.org/wiki/Talk:StringFunctions#Update_for_1.8.0</a> this]) and
since these functions would be very useful, they should be added as soon as
possible.</pre>
    </div><div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2006-10-21 23:25:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Install StringFunctions extention"
   href="show_bug.cgi?id=7654">Bug 7654</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">jquinn
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-10 17:58:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >These would be very useful for a number of tasks - above all #strlen and
#substr. There has been much concern that functions such as repeat and
regexp-related functions could be above O[n] on input length and thus usable for
DOS attacks. However, these functions are NOT included in StringFunctions; all
the functions there are O[n] and, while they would contribute to server load,
would not break caching and thus would be an incremental increase.

Please please include these. I can think of several places where they would be
immediately useful, not just as toys - above all for any task involving
formatting, as mentioned above.</pre>
    </div><div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Polonium</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-11 21:42:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I totally agree with the above comment. The most important functions to add are
strlen and substr. Several other functions could be derived from them, and they
would be useful for many applications. Since the are DOS safe and O(n), I cannot
see any reason not to install them. They should be installed right away (the
code already exists). Beyond this, other functions, like the
[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=m%3AVariablesExtension">m:VariablesExtension</a>|variables]] could be added.</pre>
    </div><div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Polonium</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-12 20:10:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >There already is a way to find the length of a string, but it is very limited
and is a hack instead of a proper solution. See
<a href="http://en.wikipedia.org/wiki/Template:Strlen">http://en.wikipedia.org/wiki/Template:Strlen</a></pre>
    </div><div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alon Lischinsky</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-12 21:54:46 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c5">comment #5</a>)
<span class="quote">&gt; There already is a way to find the length of a string, but it is very limited
&gt; and is a hack instead of a proper solution. See
&gt; <a href="http://en.wikipedia.org/wiki/Template:Strlen">http://en.wikipedia.org/wiki/Template:Strlen</a></span >

But it works only for ASCII-only strings, due to padright: and the like
measuring byte-length rather than apparent number of characters.</pre>
    </div><div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">jquinn
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-14 00:38:44 UTC
        </span>
      </div>



<pre class="bz_comment_text" >See my comments at the end of [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=m%3ATalk%3AStringfunctions%23Proposals">m:Talk:Stringfunctions#Proposals</a>]] for why some
of these are NOT currently safely O(n) and how that could be easily fixed.</pre>
    </div><div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Antoine &quot;hashar&quot; Musso (WMF)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-14 00:40:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >jquinn &gt; please paste your comment here. The above link does not
work and might be deleted one day.</pre>
    </div><div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Polonium</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-14 01:45:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c8">comment #8</a>)
<span class="quote">&gt; jquinn &gt; please paste your comment here. The above link does not
&gt; work and might be deleted one day.</span >

The correct link is to [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Talk%3AStringFunctions%23Proposals">Talk:StringFunctions#Proposals</a>]]. Go and view it, it is
too long to be posted directly. Still, strlen and substr are totally O(n) and
are the most important string functions. That is why the consensus is to install
them now and install other functions later.</pre>
    </div><div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-14 02:23:28 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The quote is:

&quot;See the page - pad is O(10^n) and replace is O(n^2). Suggest limiting the &quot;from&quot; and &quot;to&quot; values 
of replace and the &quot;delimiter&quot; of explode to 30 characters in length (as with pos - I would 
support anything from 10 to 30 characters, I'd vote against anything outside this range) and the 
length value of pad to 99. I'd also recommend limiting &quot;value&quot; or &quot;string&quot; for everything EXCEPT 
len and sub to some length limit in the range of .5K - 5K, preferably 1K. Even O(n) is a DOS 
attack if it is easy to make n be a 100K page templated from somewhere. And finally, even with 
all these limits, it would be easy to make a &quot;replace&quot; call that returned a 30K-long string - 
there needs to be a further limit targeted to the output of replace (and possibly urlencode?). 
For ease of programming (just check limits then expose the PHP, rather than building your own 
function), this could be that len(to)*len(value)/len(from) can't be over twice the limit on 
len(value) - that is, the &quot;to&quot; can only be twice as long as the &quot;from&quot; unless you're sure that 
your &quot;value&quot; string is a fraction of the length limit. The &quot;len&quot; in question is byte-length, ie 2 
for each standard-codepage unicode char and 1 for each ascii.&quot;

Pad is O(10^n)?  o_O</pre>
    </div><div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Polonium</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-14 17:07:24 UTC
        </span>
      </div>



<pre class="bz_comment_text" >When the StringFunctions are installed, string length should be measured in
characters, not bytes, so that they work with unicode characters.</pre>
    </div><div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">jquinn
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-24 09:59:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The really correct link is [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=m%3ATalk%3AStringFunctions%23Proposals">m:Talk:StringFunctions#Proposals</a>]]. Dratted
case-sensitivity. 

Yes, pad is O(10^n) because n is the length of the argument - the number of
digits, not the value. But by the same token, you can limit n to just 2 or 3 and
still get 99 or 999 characters of padding.

Note that the issue is the memory &amp; processor usage of the internal PHP call,
because on the level of the visible wiki the template buffer is limited anyway.</pre>
    </div><div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-24 15:53:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The maximum pad length permitted in current code is 500 characters, so it's O(1) worst-case.</pre>
    </div><div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-01-24 16:21:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I shall limit the length of input parameters of the features in question ASAP.
Then, the posibility of DOS attack through them will be removed.</pre>
    </div><div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jared</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-03 21:48:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This set of Functions is very useful, and so I advocate for the approval of this
proposed change.</pre>
    </div><div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-04 19:06:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >All parser functions in question has been finally limited in the latest code.
Also, full support for utf-8 was added (and other small fixes/improvements).</pre>
    </div><div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bogumił &quot;A_Bach&quot; Cieniek</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-04 21:24:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Those functions will be wery helpfull in wiktionary.</pre>
    </div><div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">hillgentleman
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-05 17:31:50 UTC
        </span>
      </div>



<pre class="bz_comment_text" >#sub  would  be very useful for poetry annotations. (C.f. [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=w%3Azh%3AWP%3AVPT">w:zh:WP:VPT</a>]]).</pre>
    </div><div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-05 17:43:02 UTC
        </span>
      </div>



<pre class="bz_comment_text" >We're aware that it will be useful.  It needs to be reviewed by Tim or someone.  Please do not 
comment on this bug just to say you support it; there's a &quot;vote for this bug&quot; link near the bottom 
of the page for that that *doesn't* spam everyone who's voted for the bug plus half the developers 
with your support.

A couple of comments: 1) urlencode and urldecode are now available as core parser functions, so they 
don't need to be part of this.  2) It should fail gracefully if mbstring is not installed.  Either 
it should define workalikes for mbstring functions it uses, or fall back to non-UTF-8 versions, or 
just die if mbstring isn't installed.</pre>
    </div><div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">百楽兎</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-06 03:58:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Agree this vote. Actually I plan to make a template for Chinese Wikipedia and Wikisource, and this 
fuction will be useful.</pre>
    </div><div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jared</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-06 15:09:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >As I'm unfamiliar with this site, how long will it take for this to be 
approved? Are there steps that need to be taken? The code is already 
written, so it shouldn't take too long.</pre>
    </div><div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-06 20:34:47 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; It should fail gracefully if mbstring is not installed.</span >

You are right about the mbstring.. It is a hidden prerequisite to the extension
right
now. However, if you do not have mbstring support at hand, all you have to do is to
replace all occurences of &quot;mb_&quot; with an empty string all over the source code..

All wikipedia servers does have mbstrings installed, doesn't they?</pre>
    </div><div id="c23" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rob Church</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-06 21:17:39 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c22">comment #22</a>)
<span class="quote">&gt; now. However, if you do not have mbstring support at hand, all you have to do</span >
is to
<span class="quote">&gt; replace all occurences of &quot;mb_&quot; with an empty string all over the source code..</span >

This is not how we like our code to work; we like our code so that people don't
have to hack at it to make it work. Requiring that mbstring functions be
installed for the extension to work is acceptable.

As far as I know, mbstring is available throughout the Wikimedia cluster.</pre>
    </div><div id="c24" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-06 22:58:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c21">comment #21</a>)
<span class="quote">&gt; As I'm unfamiliar with this site, how long will it take for this to be 
&gt; approved? Are there steps that need to be taken?</span >

Basically, someone needs to get on IRC and nag Tim Starling (or Brion, but he tends to be more 
overworked).  Or you could e-mail him, I suppose.  It just needs to be brought to his attention so 
he can review it.</pre>
    </div><div id="c25" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rob Church</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-02-18 16:10:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - StringFunctions on wiktionary NL"
   href="show_bug.cgi?id=9023">Bug 9023</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c26" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">fdcn</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-13 08:24:24 UTC
        </span>
      </div>



<pre class="bz_comment_text" >waitting</pre>
    </div><div id="c27" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rob Church</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-13 14:56:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c26">comment #26</a>)
<span class="quote">&gt; waitting</span >

I am aware that users are waiting for a response to this, but it isn't as
straight forward as might be desired; enabling an extension like this requires a
thorough review in terms of suitability for inclusion, and also a full
performance test. Some patience is therefore required; that patience might need
to stretch to several months, but that's the way of the world.

Any further comments on this bug are to be restricted to discussing the
technical issues raised above, and not, &quot;we're waiting&quot;.</pre>
    </div><div id="c28" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-04-13 18:39:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I was quick-searching the above comments and all technical issues seem to be
resolved and closed by now, aren't they? I hope that there is nothing forgotten
currently. If I am wrong, please, draw my attention. Otherwise I shall just
continue to wait, 'till it is approved; or 'till Tim gets to me with new issues.</pre>
    </div><div id="c29" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-05-20 16:07:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Substring functionality"
   href="show_bug.cgi?id=9979">Bug 9979</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c30" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Arath</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-05-23 11:56:57 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Another month has passed since <a href="show_bug.cgi?id=6455#c26">comment #26</a>, but the string functions have not been installed yet. What does &quot;several months&quot; mean?</pre>
    </div><div id="c31" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Eno1</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-05-27 14:55:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Can someone please ask whoever needs to be asked to make these functions available on wikipedia as a matter of prioity?

There are more legimatate uses for these than you think. Most important are #sub, #pos and #len.</pre>
    </div><div id="c32" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Duken</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-05-30 17:28:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm waiting for #sub and #len too, for Wiktionary Templates. It really would help me, so... I really hope you'll fix this bug. ^^'</pre>
    </div><div id="c33" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-06-12 19:36:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - ParserFunction to get a part of a string"
   href="show_bug.cgi?id=10231">Bug 10231</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c34" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">百楽兎</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-09-19 06:58:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Is this request still alive? Any new information regarding this issue?</pre>
    </div><div id="c35" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tisza Gergő</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-01 14:25:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >#rpos would also be useful, especially in [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=agglutinative%20language">agglutinative language</a>]]s with [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=vowel%20harmony">vowel harmony</a>]] where you can't just put a number or date between two words and get a grammatically correct sentence, but need to select the matching suffix too.</pre>
    </div><div id="c36" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tim Starling</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-14 04:35:29 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Can someone just add these functions to the ParserFunctions extension please? </pre>
    </div><div id="c37" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tim Starling</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-15 03:25:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >On second thoughts: presumably these functions, especially substr, would have the potential to destroy strip markers, and even to capture the marker prefix and make fraudulent markers. That is a bug.</pre>
    </div><div id="c38" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-15 15:22:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt; the potential to destroy strip markers</span >

And how do we fix that?</pre>
    </div><div id="c39" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Sanbeg</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-15 17:36:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c38">comment #38</a>)
<span class="quote">&gt; &gt; the potential to destroy strip markers
&gt; 
&gt; And how do we fix that?
&gt; </span >

Probably, a substr operation would be something like; get input wiki string, parse &amp; convert to HTML, strip HTML to plain text, take substring of text.

a substring probably isn't meaningful, or at least not simple, on something other than plain text.
</pre>
    </div><div id="c40" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ross M</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-16 08:54:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c37">comment #37</a>)
<span class="quote">&gt; On second thoughts: presumably these functions, especially substr, would have
&gt; the potential to destroy strip markers, and even to capture the marker prefix
&gt; and make fraudulent markers. That is a bug.
&gt; </span >

If this is the case, then surely it's not a bug with this extension, but rather with the extension parser, isn't it?  If third-party extensions should never be permitted to affect strip markers, then those markers clearly shouldn't be provided to them.</pre>
    </div><div id="c41" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-16 19:13:01 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Some extensions may wish to fiddle with strip markers, for some reason.  This is not one of them.</pre>
    </div><div id="c42" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ross M</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-17 02:01:41 UTC
        </span>
      </div>



<pre class="bz_comment_text" >After looking further through the code, I have to ask: why would having the potential to alter strip markers qualify as a bug?  As far as I can tell, creating a fraudulent marker would do nothing apart from putting some unpleasant gibberish in the output, and removing a marker altogether would simply prevent that marker's content from being displayed.  Neither of these outcomes appear to break the code in any meaningful way.  What am I missing here?</pre>
    </div><div id="c43" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-17 23:54:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Input: {{#sub:&lt;nowiki&gt;Hello!!!!!!111&lt;/nowiki&gt;|10}}

Expected output: Either &quot;&lt;nowiki&gt;He&quot; or &quot;&lt;nowiki&gt;Hello!!!!!111&lt;/nowiki&gt;&quot; or &quot;Hello!!!!!&quot; (not sure which, but something like one of those)

Actual output: <a href="https://gerrit.wikimedia.org/r/#q,ef021ae6742,n,z" title="Git commit ef021ae6742">ef021ae6742</a>-nowiki-00000013-QINU (notice the 0x7 byte at the end, for good measure!)

That looks like a bug.  Shouldn't be difficult at all to fix.</pre>
    </div><div id="c44" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tim Starling</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-18 08:51:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c41">comment #41</a>)
<span class="quote">&gt; Some extensions may wish to fiddle with strip markers, for some reason.  This
&gt; is not one of them.</span >

#if, for example, &quot;fiddles&quot; with strip markers, by passing through the strip markers in the followed branch and discarding the ones in the non-followed branch. It's not an exotic scenario.

Yes, you could unstrip the string and then apply the substring operation, but that would cause the output to be escaped. So it would destroy the output of tags such as &lt;gallery&gt; -- in fact pretty much all the extension tags other than &lt;nowiki&gt;. And if you unstripped &lt;nowiki&gt;, the content escaped by &lt;nowiki&gt; would be erroneously parsed by the main parser stage, defeating its purpose. 

The solution is to identify strip markers, and then to skip them when you are counting characters. But that might be inefficient. </pre>
    </div><div id="c45" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ross M</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-19 01:21:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Yes, that's inefficient.  Since PHP's mb_string methods operate in O(n) time, stepping through each string character by character would make these methods O(n^2) rather than O(n).  Once PHP6 is rolled out, we'll be able to use TextIterator to perform this operation efficiently.  But do we really need to wait until then before adding these functions?  Allowing the occasional marker to be corrupted won't break the system, and the benefits far outweigh this minor flaw.</pre>
    </div><div id="c46" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tim Starling</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-21 11:50:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >You could just use the preg_match_all /./u trick, that would be O(n). Or you could split the string at the markers with preg_split(), and then loop through the fragments, counting characters with mb_strlen(). Or use an strpos() loop for marker identification instead of preg_split() to conserve memory -- maybe that'd even be faster. There's lots of ways to do it, there's no need to throw your hands up and wait for PHP 6.</pre>
    </div><div id="c47" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-30 21:14:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >My own inclination would be to unstrip markers and do a wiki-text-escape on output... possibly with HTML tag stripping on the expanded markers first. (Eg, a big ol' table will be reduced to the text contained in it.)

Is there a reason one would want string functions to output non-plaintext or otherwise that this wouldn't be appropriate?</pre>
    </div><div id="c48" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Steve Sanbeg</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-30 22:06:33 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c47">comment #47</a>)
<span class="quote">&gt; My own inclination would be to unstrip markers and do a wiki-text-escape on
&gt; output... possibly with HTML tag stripping on the expanded markers first. (Eg,
&gt; a big ol' table will be reduced to the text contained in it.)
&gt; 
&gt; Is there a reason one would want string functions to output non-plaintext or
&gt; otherwise that this wouldn't be appropriate?
&gt; </span >

Yeah, that was my thought.  Transplant a few LOC from <a href="http://www.mediawiki.org/wiki/Extension:Strip_Markup">http://www.mediawiki.org/wiki/Extension:Strip_Markup</a>, maybe implement the stripping as a degenerate case of #substr.  It would kill two bugs with one stone, and the string functions don't even imply it can do more than that.</pre>
    </div><div id="c49" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ross M</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-11-30 23:52:34 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c47">comment #47</a>)
<span class="quote">&gt; My own inclination would be to unstrip markers and do a wiki-text-escape on
&gt; output... possibly with HTML tag stripping on the expanded markers first. (Eg,
&gt; a big ol' table will be reduced to the text contained in it.)
&gt; 
&gt; Is there a reason one would want string functions to output non-plaintext or
&gt; otherwise that this wouldn't be appropriate?
&gt; </span >

I can think of situations where one might want to splice wikiformatting into a string, or to simply trim a formatted string by a few characters.  There's no need to convert to plaintext in order to solve this bug; Tim's suggestion to overlook markers works perfectly well.

I've coded up an alpha version of these functions which employs preg_match_all to split the string into characters while keeping strip markers separate.  It's up and running at <a href="http://www.undefined.net/w/index.php?title=User:Algorithm/StringFunctions2">http://www.undefined.net/w/index.php?title=User:Algorithm/StringFunctions2</a> -- feedback is welcome.</pre>
    </div><div id="c50" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ross M</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2007-12-10 10:03:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >StringFunctions 2.0 has just been released on MediaWiki.  This version completely fixes the strip marker problem, and removes the reliance on mb_string as well.  Unless there are any other flaws in the implementation, it should be ready to install.</pre>
    </div><div id="c51" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Anders Einar Hilden</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-03-14 21:07:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >4 months, what's happening? We could really need the functions in some complicated date-templates on no.wikipedia.</pre>
    </div><div id="c52" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c52">Comment 52</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-05-02 17:26:41 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Lithuanian Wiktionary nead Extension:StringFunctions"
   href="show_bug.cgi?id=13895">Bug 13895</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c53" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c53">Comment 53</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Wersad Daverbelt</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-06-11 03:56:24 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Question: Who exactly is the person who could implement this, and what exactly is he waiting for?

Wikipedia could seriously use these functions.</pre>
    </div><div id="c54" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c54">Comment 54</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-06-11 21:58:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c53">comment #53</a>)
<span class="quote">&gt; Question: Who exactly is the person who could implement this</span >

Anyone with commit access, if the course of action is (as Tim has suggested) merging them into ParserFunctions.

<span class="quote">&gt; and what exactly is he waiting for?</span >

Remarkably, developers are not all automatons whose only goal in life is to serve Wikipedia template programmers.  Some may actually wish to spend their time on doing other things, maybe even not MediaWiki-related!  If you want this done, either ask nicely in recommended channels (e.g., wikitech-l or <a href="irc://irc.freenode.org/mediawiki">irc://irc.freenode.org/mediawiki</a>, not Bugzilla), or get commit access and do it yourself</pre>
    </div><div id="c55" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c55">Comment 55</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-06-12 07:27:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c54">comment #54</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=6455#c53">comment #53</a>)
&gt; &gt; Question: Who exactly is the person who could implement this
&gt; 
&gt; Anyone with commit access, if the course of action is (as Tim has suggested)
&gt; merging them into ParserFunctions.</span >

I don't think that's a very good idea. Just because someone wants StringFunctions, doesn't mean they want ParserFunctions. Those two extensions don't belong together.

If you want an extension that has both, then it should be a new extension, not merging of one extension's functionality from one extension into the other. That's one of the many purposes of the WikiCode extension I'm working on anyways:
<a href="http://svn.nadir-point.com/viewvc/mediawiki-extensions/trunk/WikiCode/">http://svn.nadir-point.com/viewvc/mediawiki-extensions/trunk/WikiCode/</a>
<a href="http://wiki-tools.com/wiki/WikiCode/Drafting">http://wiki-tools.com/wiki/WikiCode/Drafting</a></pre>
    </div><div id="c56" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c56">Comment 56</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-06-12 13:35:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c55">comment #55</a>)
<span class="quote">&gt; I don't think that's a very good idea. Just because someone wants
&gt; StringFunctions, doesn't mean they want ParserFunctions. Those two extensions
&gt; don't belong together.</span >

You could argue that just because someone wants {{#expr}} doesn't mean they want {{#if}}, too.  I find it very unlikely, in fact, that anyone would want things like {{#strlen}} without {{#expr}}, because as soon as you're automatically generating numbers, you almost certainly want to do basic arithmetic with them.  ParserFunctions is an extension that adds advanced computational capabilities of various sorts to MediaWiki; if you only want a subset of that functionality, tell your users not to use the rest, or manually disable it.  If you really want, some config options could be added to disable parts of it, but first I'd be interested to hear of anyone who actually *wants* such a feature.</pre>
    </div><div id="c57" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c57">Comment 57</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Fran Rogers</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-08-18 22:21:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Merged the functionality of StringFunctions into ParserFunctions in <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/39618" title="revision 39618 in SVN">r39618</a>. :)</pre>
    </div><div id="c58" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c58">Comment 58</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Brion Vibber</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-08-19 18:54:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Reverted in <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/39653" title="revision 39653 in SVN">r39653</a>. These functions look *extremely* inefficient, for instance reimplementing mb_strlen() by apparently splitting the entire input string into an array of individual characters and counting up the elements.</pre>
    </div><div id="c59" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c59">Comment 59</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-08-26 23:29:00 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I finally got some free time to look into it and rewrite the functions into something more efficient. Is anyone working on it right now? Anyway, any comments are welcome, sooner rather than later. I will place my rewrite at   <a href="http://www.mediawiki.org/wiki/Extension:StringFunctions/Code">http://www.mediawiki.org/wiki/Extension:StringFunctions/Code</a>, since I do not have svn ci access at wikimedia.</pre>
    </div><div id="c60" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c60">Comment 60</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-08-27 06:20:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Updates have been committed as of <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/40068" title="revision 40068 in SVN">r40068</a>.

However, I'm not convinced it's good enough to put into ParserFunctions. It duplicates parser code in ugly ways, and uses preg_replace_all (Tim pokes me saying the _all is evil...)

I've actually been working on string handling inside of WikiCode. I to found the StringFunctions code extremely ugly. I actually implemented my own functions. They still need some tweaks, however I believe the code is far better than that inside of StringFunctions.</pre>
    </div><div id="c61" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c61">Comment 61</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-08-29 17:26:40 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Thank you for you input. Actually, you got me hooked, so I put together a simple benchmarking script of a few different implementations of the strlen: <a href="http://www.mediawiki.org/wiki/Extension:StringFunctions/Bench">http://www.mediawiki.org/wiki/Extension:StringFunctions/Bench</a>

Turns out that Brion was more than right about extreme inefficiency. The preg_match_all version, which splits the input into an array of individual chars can be more than hundred times slower than other implementations and can be more than thousands times slower than the native mb_strlen().

Now, rising the length of benching data put other implementations aside as well. So, here are the results for the best two only (plus simple mb_strlen() version for comparison):

  benching 256 loops of length: 1120kB
    runLen0: 2.3116    ..using mb_strlen() only
    runLen2: 18.6722   ..using preg_match_all() through markers
    runLen4: 10.3728   ..using strpos()

So, as it turns out, pregs, even when they are not abused, take some time to process the input. On the other side, using strpos() for counting markers seems to be quite efficient, considering the native mb_strlen() is only 5 times faster for the above bench case. I did more benches and found out that when the length of data is 112kB only, mb_strlen() is upto 10 times faster; when the length of data is 28kB, mb_strlen() is upto 12 times faster.

Any other ideas of how to implement such a simple thing as strlen()? ;))</pre>
    </div><div id="c62" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c62">Comment 62</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Soroush</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-09-19 20:57:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Somebody wanted me to make a template in fa.wiktionary and I got informed that this Extension is required for there. I read its potential usage for en.wiki and I agree to its installation on en.wiki as well.
</pre>
    </div><div id="c63" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c63">Comment 63</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Raimond Spekking</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2008-09-20 14:01:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - Install the StringFunctions extension on fa.wiktionary.org"
   href="show_bug.cgi?id=15658">Bug 15658</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c64" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c64">Comment 64</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mike.lifeguard</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-03-19 15:53:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The extension isn't ready, so I've removed the shell keyword.</pre>
    </div><div id="c65" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c65">Comment 65</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-03-30 11:07:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=5978" name="attach_5978" title="New version of string functions">attachment 5978</a> <a href="attachment.cgi?id=5978&amp;action=edit" title="New version of string functions">[details]</a></span>
New version of string functions

The attached file is complete rewrite of the StringFunctions extension.

It implements the parser functions:

#len - string length
#pos - finding substring position
#rpos - reverse oriented #pos
#sub - fetch a substring specified by start and length
#replace - substring replacement
#explode - partition string by a delimiter and find a specific piece

The other functions, which are mostly already in the core, have been dropped.

In addition, I implemented it so that the unique markers generated by &lt;nowiki&gt;, &lt;gallery&gt;, &lt;math&gt;, etc. are universally stripped (this is a partial change in behavior from prior versions).  So the behavior will be more uniform and predictable than prior versions and there is no risk of partial or unexpected markers bleeding through.

Where possible PHP's built-in multi-byte string functions are used provide fast results.  If the mb_ functions are unavailable, their behavior is simulated in regex in order to provide a graceful (if slower) failure mode.

A global variable is used to define a hard limit for the size of a string to operate on.  I've set this 1000 characters for now, but I haven't experimented too much to decide what is reasonable or whether different limits should be enforced for different functions.  #replace is armored against replacements that would generate strings longer than this limit.

I believe that this version of StringFunctions (or something close to it) should be suitable for implementation on WMF sites.</pre>
    </div><div id="c66" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c66">Comment 66</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-03-30 13:22:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c65">comment #65</a>)
<span class="quote">&gt; The attached file is complete rewrite of the StringFunctions extension.</span >

Shouldn't they just be added to ParserFunctions?

<span class="quote">&gt; In addition, I implemented it so that the unique markers generated by &lt;nowiki&gt;,
&gt; &lt;gallery&gt;, &lt;math&gt;, etc. are universally stripped (this is a partial change in
&gt; behavior from prior versions).  So the behavior will be more uniform and
&gt; predictable than prior versions and there is no risk of partial or unexpected
&gt; markers bleeding through.</span >

I'm not sure if stripping them outright is the best solution, but I can't think of a better one.

<span class="quote">&gt; Where possible PHP's built-in multi-byte string functions are used provide fast
&gt; results.  If the mb_ functions are unavailable, their behavior is simulated in
&gt; regex in order to provide a graceful (if slower) failure mode.</span >

We already have some of these compatibility functions in GlobalFunctions.php (mb_strlen and mb_substr).  You should use those, and add any additional ones there.</pre>
    </div><div id="c67" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c67">Comment 67</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-03-30 16:34:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >A good use of the String functions would be to parse Newick tree format (Newick notation) files which is the standard way of minimally representing phylogenetic trees. Trees are now an important data structure in Wikipedia, and it's very difficult to edit these by hand and to get them to align and display properly. A simple {{newick}} template could then convert a Newick string into a properly displayed tree.

This may seem trivial compared to the other reasons, but just check the myriad ways that trees are now represented in MediaWiki. Having this template would allow trees to be created and edited in external tools and just dropped in.

I don't see any other way of parsing such a format without the String Functions.</pre>
    </div><div id="c68" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c68">Comment 68</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-03-30 17:05:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c66">comment #66</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=6455#c65">comment #65</a>)
&gt; &gt; The attached file is complete rewrite of the StringFunctions extension.
&gt; 
&gt; Shouldn't they just be added to ParserFunctions?</span >

I'm happy to write it up that way instead, though I don't know which is preferred.  Given how long we and other sites have gone without working StringFunctions, it almost feels more natural to segregate them so that site operators have a choice.  

My main interest though is getting an implementation somewhere that is sufficiently reasonable that it can be used on the WMF sites.

<span class="quote">&gt; &gt; Where possible PHP's built-in multi-byte string functions are used provide fast
&gt; &gt; results.  If the mb_ functions are unavailable, their behavior is simulated in
&gt; &gt; regex in order to provide a graceful (if slower) failure mode.
&gt; 
&gt; We already have some of these compatibility functions in GlobalFunctions.php
&gt; (mb_strlen and mb_substr).  You should use those, and add any additional ones
&gt; there.</span >

Okay.  The one caveat is that my functions more or less assume they are being passed valid UTF-8 strings, and the encoding parameter for mb_strpos, etc. is not implemented.  It appears that mb_strlen in GlobalFunctions is making the same assumption, so I'll assume that is okay for Mediawiki's purposes.

</pre>
    </div><div id="c69" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c69">Comment 69</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-03-30 19:20:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c68">comment #68</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=6455#c66">comment #66</a>)
&gt; &gt; We already have some of these compatibility functions in GlobalFunctions.php
&gt; &gt; (mb_strlen and mb_substr).  You should use those, and add any additional ones
&gt; &gt; there.
&gt; 
&gt; Okay.  The one caveat is that my functions more or less assume they are being
&gt; passed valid UTF-8 strings, and the encoding parameter for mb_strpos, etc. is
&gt; not implemented.  It appears that mb_strlen in GlobalFunctions is making the
&gt; same assumption, so I'll assume that is okay for Mediawiki's purposes.</span >

Added the necessary mb_ fallbacks to GlobalFunctions in <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/49043" title="revision 49043 in SVN">r49043</a>.

Figuring out the merge with ParserFunctions will take more time.

I'll probably post that as an alternative patch here and let someone with more familiarity decide whether it is better to build StringFunctions as a separate stand-alone or to merge it into the ParserFunctions.

</pre>
    </div><div id="c70" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c70">Comment 70</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-04-06 07:44:01 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=5993" name="attach_5993" title="Merge string functionality into ParserFunctions">attachment 5993</a> <a href="attachment.cgi?id=5993&amp;action=edit" title="Merge string functionality into ParserFunctions">[details]</a></span>
Merge string functionality into ParserFunctions

Comments suggested it may be preferably to merge string functionality into ParserFunctions.  The attached patch would accomplish that.  The logic should be the same as the other StringFunctions patch, so one should choose one patch or the other depending on whether it is preferred for StringFunctions to operates as a separate stand-alone extension or as a component of ParserFunctions.  I'm not sure which approach is preferable.  Minor tweaks were made to more or less follow the existing layout conventions in ParserFunctions.

Also note that StringFunctions and ParserFunctions were originally written under different copyleft schemes.  I asked for and received permission from the referenced authors to GPL the StringFunction code in order to facilitate the merge.</pre>
    </div><div id="c71" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c71">Comment 71</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-14 16:25:06 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Sorry, I'm bemused. Every programming language I've met (admittedly that's not very many) has these string functions as absolute basic standard. How does it take three years to find a way to expose them through MW? </pre>
    </div><div id="c72" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c72">Comment 72</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Minh Nguyễn</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-14 19:57:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The wiki syntax (especially the subset used on Wikimedia sites) isn't quite intended as a full-fledged programming language, though it's getting to be one. Think of it more as a language for macros. Notice that there's no built-in support for iteration, either, and that's an absolute basic standard for programming languages too.</pre>
    </div><div id="c73" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c73">Comment 73</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-14 21:00:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I think you missed my point - I don't mean MW has to have something because programming languages have it, I mean if programming languages have it as standard, AND we want to have it (as we clearly do in this case), then it surely must be a pretty trivial matter to code. Surely there are standard php libraries which have all these functions? </pre>
    </div><div id="c74" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c74">Comment 74</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-14 22:03:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >It's already implemented.  Robert has a patch, which he can commit if he likes.  He hasn't so far.</pre>
    </div><div id="c75" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c75">Comment 75</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Roan Kattouw</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-15 10:59:44 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c73">comment #73</a>)
<span class="quote">&gt; I think you missed my point - I don't mean MW has to have something because
&gt; programming languages have it, I mean if programming languages have it as
&gt; standard, AND we want to have it (as we clearly do in this case), then it
&gt; surely must be a pretty trivial matter to code. Surely there are standard php
&gt; libraries which have all these functions? 
&gt; </span >

If you read the comments (granted, 74 is a lot), you'll see that there were issues with previous implementations, such as the need to use Unicode-aware string functions, the need to fall back to alternative implementations if those functions aren't available (they're a PHP extension) and the need to do all this efficiently.

Robert has attached a patch, which he could (and probably should, or maybe already has?) committed to StringFunctions in SVN; Tim or Brion can then review that and, if it passes, enable it on Wikipedia.</pre>
    </div><div id="c76" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c76">Comment 76</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-15 13:45:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The patch is to ParserFunctions, so it wouldn't need review beyond the normal process.</pre>
    </div><div id="c77" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c77">Comment 77</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-26 00:49:03 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I made some additional tweaks to the second patch and committed it as <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/50997" title="revision 50997 in SVN">r50997</a>.

</pre>
    </div><div id="c78" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c78">Comment 78</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-05-26 00:52:01 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Marking FIXED, then.  Close enough to the original request.</pre>
    </div><div id="c79" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c79">Comment 79</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Happy-melon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-19 11:51:01 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The spirit of this bug is clearly &quot;enable StringFunctions on WMF wikis&quot;.  So now we need $wgEnableStringFunctions = true; to be set on WMF wikis.  But the substance of this bug is not resolved.  Reopening.</pre>
    </div><div id="c80" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c80">Comment 80</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-19 16:54:26 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Tim has stated pretty clearly that string functions will not be enabled on Wikimedia wikis, so I'll mark this WONTFIX.</pre>
    </div><div id="c81" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c81">Comment 81</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-19 17:36:06 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c80">comment #80</a>)
<span class="quote">&gt; Tim has stated pretty clearly that string functions will not be enabled on
&gt; Wikimedia wikis, so I'll mark this WONTFIX.</span >

. . . that's in <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/51497" title="revision 51497 in SVN">r51497</a>.  Quote from diff:

+/**
+ * Enable string functions.
+ *
+ * Set this to true if you want your users to be able to implement their own 
+ * parsers in the ugliest, most inefficient programming language known to man: 
+ * MediaWiki wikitext with ParserFunctions.
+ *
+ * WARNING: enabling this may have an adverse impact on the sanity of your users.
+ * An alternative, saner solution for embedding complex text processing in 
+ * MediaWiki templates can be found at: <a href="http://www.mediawiki.org/wiki/Extension:Lua">http://www.mediawiki.org/wiki/Extension:Lua</a>
+ */

It's pretty clear this isn't going to be enabled on Wikimedia.</pre>
    </div><div id="c82" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c82">Comment 82</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tisza Gergő</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-19 18:36:10 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Opened <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable Lua extension on WMF wikis"
   href="show_bug.cgi?id=19298">bug 19298</a> for enabling Lua as per Tim's suggestion.</pre>
    </div><div id="c83" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c83">Comment 83</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Norris</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-24 16:21:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Can we mark this bug as LATER instead of WONTFIX given the disagreement with Tim's decision expressed in the comments for the Lua bug?</pre>
    </div><div id="c84" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c84">Comment 84</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-24 21:42:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The people disagreeing with Tim don't get to make decisions like this, Tim does.  So not much point.  Any WONTFIX could be revisited later, of course.</pre>
    </div><div id="c85" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c85">Comment 85</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Robert Rohde</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-24 22:27:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c84">comment #84</a>)
<span class="quote">&gt; The people disagreeing with Tim don't get to make decisions like this, Tim
&gt; does.  So not much point.  Any WONTFIX could be revisited later, of course.
&gt; </span >

Well, in point of fact, they are sort of disagreeing with you Aryeh, since you are the one who tagged it WONTFIX.

Tim's comments are discouraging, but it isn't clear to me that they represent a final conclusion on the subject.  That's doubly true since Brion has already said Lua won't be installed in the near-term (if ever), so Tim's preferred solution is pretty much no solution at all.

While Tim's concern for the sanity of wikicode is well-intentioned, I've yet to see any template coder (i.e. the people who would really be working with this) come forward to say that the incremental burden of enabling this would be terrible.  Given the evident desire of the community, and the fact that Tim's alternative isn't really available, I am wondering if this should be reopened and given more developer discussion.</pre>
    </div><div id="c86" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c86">Comment 86</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-06-24 23:07:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I was taking Tim's statement as a fait accompli.  If you want to reopen this and maybe start a wikitech thread, go ahead, I don't agree with him.</pre>
    </div><div id="c87" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c87">Comment 87</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rich Farmbrough</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-04 17:50:49 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Hm there seem to be facilities for manipulating stings enabled now. So this is either fixed or it is being done by an almighty kludge and probably far less efficiently than &quot;fixing&quot; this. See my comment to 19298.</pre>
    </div><div id="c88" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c88">Comment 88</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Happy-melon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-04 21:17:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c87">comment #87</a>)
<span class="quote">&gt; either fixed or it is being done by an almighty kludge </span >

Oh yes.  Those templates put all other hacks to shame. But they work, and they're now very widely used.  Which demonstrates the need for this functionality to be supported *somehow*.</pre>
    </div><div id="c89" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c89">Comment 89</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Norris</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-08 22:44:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c88">comment #88</a>)
<span class="quote">&gt; But they work</span >

Really?  IIRC we don't have substrings (yet)...</pre>
    </div><div id="c90" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c90">Comment 90</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rich Farmbrough</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2009-09-12 09:44:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I wrote {{Sub right}} and  another one recently - trying to get  a title case template to work.  See Category:String manipulation templates, most have been around for a while.</pre>
    </div><div id="c91" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c91">Comment 91</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rich Farmbrough</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-17 17:41:24 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This really needs some attention.  We have perfectly good templates for doing minor stuff that work, provided there are less than &quot;X&quot; of them on a page, where &quot;X&quot; is a small number.  Wontfix is not a good status for this bug.  Reopening.</pre>
    </div><div id="c92" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c92">Comment 92</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gurch</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-17 17:58:43 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c91">comment #91</a>)
<span class="quote">&gt; This really needs some attention.  We have perfectly good templates for doing
&gt; minor stuff that work, provided there are less than &quot;X&quot; of them on a page,
&gt; where &quot;X&quot; is a small number.  Wontfix is not a good status for this bug. 
&gt; Reopening.</span >

I take issue at the description &quot;perfectly good&quot;.

What happened was, a while back well-meaning people asked for &quot;padleft&quot; and &quot;padright&quot; string functions. The devs decided to add support for these specific functions, assuming -- foolishly -- that they wouldn't be abused within an inch of their life.

Since then, various string functions (length, string search functions, sub-string based function) have been implemented using unmaintainable, indecipherable nested MediaWiki templates IN TERMS OF PADLEFT AND PADRIGHT. This is something I didn't even know was possible and probably constitutes in interesting academic exercise... oh, except this is in production use on one of the world's busiest websites.

The algorithms involves are so hideously inefficient that given the huge overhead incurred by having to parse wikitext every step of the way.

Have a look at how &quot;str len&quot; is implemented. This:

<a href="http://en.wikipedia.org/w/index.php?title=Template:Str_len/core&amp;action=edit">http://en.wikipedia.org/w/index.php?title=Template:Str_len/core&amp;action=edit</a>

is just part of it.

When you've finished washing your eyes out with bleach, look at the &quot;str find&quot; template. Note its reliance on the aformentioned &quot;str len&quot;, as well as &quot;str left&quot; and various other horrendous string functions. Note that at the bottom of this hierarchy of {{{{}{}{}{}{}{}{}{{}}}} lies #padleft, #titleparts and various other functions that you wouldn't normally expect to be roped into string searching, unless you were in a batshit insane environment where they were the only primitive functions available... oh wait.

It probably takes as long to evaluate one of these string functions on a modern, top-of-the-range multicore server machine as it would to evaluate a sane implementation on a 1980s home computer. The algorithm for &quot;str find&quot; wouldn't even be too bad if it was implemented directly in C or something, but don't pretend that MediaWiki template syntax isn't the least efficient programming language ever created. Including several joke ones.

Come to think of it, yes, there is a really fucking good argument for enabling StringFunctions on Wikimedia wikis. And also for tracking down the people who implemented templates like [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Template%3AStr%20find">Template:Str find</a>]] and murdering them for crimes against programming.</pre>
    </div><div id="c93" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c93">Comment 93</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Max Semenik</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-17 18:06:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c92">comment #92</a>)

<span class="quote">&gt; Come to think of it, yes, there is a really fucking good argument for enabling
&gt; StringFunctions on Wikimedia wikis. And also for tracking down the people who
&gt; implemented templates like [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Template%3AStr%20find">Template:Str find</a>]] and murdering them for crimes
&gt; against programming.</span >

No, it's a great reason to disable #padleft and friends instead. Things ParserFunctions are (ab)used for are insane, and the more of them are there, the more insane things they allow. This spiral dive has to stop somewhere.</pre>
    </div><div id="c94" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c94">Comment 94</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Phillip Patriakeas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-17 18:33:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >There will be a lot of angry people (and broken functionality, with no obvious way to fix, replace, or remove it) if the only currently enabled way to implement string parsing in wikicode on WMF wikis is simply disabled or removed. It is not the template coders' fault for abusing the hell out of padleft and padright, they are simply making do with the only tool they can use, and would certainly use something else if it were available (and I do mean they'd use pretty much *anything* else, as just about anything would be an improvement over the current situation). It's not like padleft and company are being blindly used either, these templates are massively optimized and however bad it is, it could be far, far worse.</pre>
    </div><div id="c95" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c95">Comment 95</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-17 20:23:47 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Of course the use of padleft and so on shouldn't be happening, but it's not the fault of the people who worked out those hacks. This really is a no-brainer - PLEASE *enable the efficient string functions*, and we won't be using the mind-blowingly inefficient ones any more. (Notice that the servers are still up and running in spite of the use of the inefficient hacks, so replacing them with more efficient functions will certainly not be any kind of performance hit.)</pre>
    </div><div id="c96" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c96">Comment 96</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 00:00:48 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c91">comment #91</a>)
<span class="quote">&gt; This really needs some attention.  We have perfectly good templates for doing
&gt; minor stuff that work, provided there are less than &quot;X&quot; of them on a page,
&gt; where &quot;X&quot; is a small number.  Wontfix is not a good status for this bug. 
&gt; Reopening.</span >

I don't have any problem with users overturning a WONTFIX with a valid reason. I've certainly done so a number of times. However, this bug as currently summarized reads &quot;Enable StringFunctions on WMF wikis&quot; and the most senior active sysadmin and developer has (essentially) said this is never going to happen. Re-reading <a href="show_bug.cgi?id=6455#c0">comment 0</a> (way the hell up there), this bug was not originally about a specific extension, just about the functionality.

Either this bug should be re-closed as WONTFIX or the bug summary should be genericized. The current match-up is disingenuous and misleading.</pre>
    </div><div id="c97" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c97">Comment 97</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Phillip Patriakeas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 01:57:51 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Looking at this bug's history, the very first entry is Rob Church changing the summary from &quot;Install StringFunctions&quot; to &quot;Install the StringFunctions extension&quot;. Unless there's missing history here (which is doubtful, since the change was made less than a half-hour after the bug report was filed), this bug was indeed originally about a specific extension, and a careful reading of <a href="show_bug.cgi?id=6455#c1">comment 1</a> and <a href="show_bug.cgi?id=6455#c3">comment 3</a> support this.</pre>
    </div><div id="c98" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c98">Comment 98</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Norris</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 13:56:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >MZ, are you seriously suggesting that the developers will completely re-implement an extension, when the concerns about the original are *not* implementation-specific?  I seriously doubt that.</pre>
    </div><div id="c99" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c99">Comment 99</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 20:16:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c98">comment #98</a>)
<span class="quote">&gt; MZ, are you seriously suggesting that the developers will completely
&gt; re-implement an extension, when the concerns about the original are *not*
&gt; implementation-specific?  I seriously doubt that.</span >

I'm suggesting that the sysadmins in charge of running Wikimedia wikis have said rather unequivocally that this extension is not going to be installed. The StringFunctions extension is a means to an end. There are plenty of other ways to implement string manipulation. For years, there has been discussion of implementing a proper programming language into MediaWiki. The current preferred favorite is not Lua, but JavaScript, actually.

I don't believe that there is any legitimate objection to letting users manipulate strings. However, there are legitimate objections to enabling this extension on Wikimedia wikis. This bug is about enabling a specific extension on Wikimedia wikis. Unless there is some reason to believe this is ever going to happen, this bug should be re-closed as WONTFIX. A subsequent, generic bug should be filed about the ability to manipulate strings on Wikimedia wikis (though there's little hope of that bug being resolved anytime soon). Keeping this bug unresolved in the REOPENED state does not change the reality of the situation. It just misleads people into believing that this is still up for debate.</pre>
    </div><div id="c100" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c100">Comment 100</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tisza Gergő</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 20:57:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c99">comment #99</a>)
<span class="quote">&gt; I don't believe that there is any legitimate objection to letting users
&gt; manipulate strings. However, there are legitimate objections to enabling this
&gt; extension on Wikimedia wikis.</span >

Actually, what are those? Tim's oft-cited comment stated that StringFunctions should be deprecated in favor of Lua, but since then it was decided that Lua is an even worse option. As for a hypothetical server-side Javascript-based string manipulation extension, it has most of the drawbacks of Lua (denial-of-service vulnerability, incompatibility of Wikipedia with a MediaWiki at an average web host), with the added bonus that Lua at least exists and does not need to be implemented from scratch.

More importantly, what are the disadvantages of StringFunctions compared to the current situation? #padleft-based string manipulation is slower, less reliable, harder to understand and maintain, and more limited in its abilities. It used to be said that SF should not be enabled because then a lot of pages will depend on it, and it will be difficult to switch to a superior solution when one is found, but we already crossed that river a long time ago.</pre>
    </div><div id="c101" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c101">Comment 101</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Victor Vasiliev</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 21:29:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c100">comment #100</a>)
<span class="quote">&gt; Actually, what are those? Tim's oft-cited comment stated that StringFunctions
&gt; should be deprecated in favor of Lua</span >

Tim's comment was that we are not going to expand the parser functions in any way and all our further development should be concentrated at the development of sensible scripting engine instead of turning parser functions into programming language. As far as I am aware he did not change his mind about that so this bug is closed and should not be reopened unless the policy mentioned above is changed as a result of discussion among the developers (you may initiate it).</pre>
    </div><div id="c102" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c102">Comment 102</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Krinkle</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 21:35:27 UTC
        </span>
      </div>



<pre class="bz_comment_text" >A request once was made to implement padleft to pad left. Then more advanced functions were wanted and existing functions (ab)used to achieve it.
I can imagine developers not wanting to natively those now wanted advanced functions as it will likely lead to history repeating itself, namely some other advanced thing wanted being implemented with these etc etc.

There are way too many scripts and templates that should be and can be written as an Extension instead.

So how about opening bugs for the actual functionality wikipedians want instead of requesting functions to achieve them in templates ? The same was done with Babel, instead of creating lots and lots of templates and decentralized stuff all over the place it was written into a native Extension and everybody's happy.

I realise this is not a solution for everything though )</pre>
    </div><div id="c103" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c103">Comment 103</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Krinkle</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 21:36:31 UTC
        </span>
      </div>



<pre class="bz_comment_text" >mid-air collision mistake. Self-reverting status change</pre>
    </div><div id="c104" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c104">Comment 104</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Buck</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 21:52:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c102">comment #102</a>)
<span class="quote">&gt; So how about opening bugs for the actual functionality wikipedians want instead
&gt; of requesting functions to achieve them in templates ? The same was done with
&gt; Babel, instead of creating lots and lots of templates and decentralized stuff
&gt; all over the place it was written into a native Extension and everybody's
&gt; happy.</span >

??? Have I missed some developments? The extension was created, then not reviewed by the developers and everybody is still unhappy with the old system.

And I'm suspecting the exact same thing will happen with StringFunctions...</pre>
    </div><div id="c105" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c105">Comment 105</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-18 22:08:20 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Note that string function support was added to ParserFunctions proper in <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/50997" title="revision 50997 in SVN">r50997</a>, and disabled by default by Tim in <a href="https://www.mediawiki.org/wiki/Special:Code/MediaWiki/51497" title="revision 51497 in SVN">r51497</a> -- a separate extension is no longer needed.  I don't know if anything has happened since June 2009 to cause him to reconsider his opinion.  I personally have thought for a long time that enabling string functions is the lesser evil here, given the givens, but it's not my call.</pre>
    </div><div id="c106" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c106">Comment 106</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Norris</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 02:04:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Could Tim Sterling please indicate whether his veto on this bug is still outstanding?

If it is, I intend to bring it up on [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=WP%3AVPT">WP:VPT</a>]] or somewhere and make the following proposal:

&quot;There is community consensus to enable StringFunctions; if the developers do not enable it themselves, the community hereby requests that the WMF instruct the developers to do so.&quot;

I really hate to go over your heads on this one, but it appears to be necessary.  As Aryeh said, SF is clearly &quot;the lesser evil&quot; and it's patently ridiculous that the nth most popular site in the world (n=whatever our current Alexa rank is) is using [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Category%3AString%20manipulation%20templates">Category:String manipulation templates</a>]] instead of native php, especially when the functionality to do so is available and tested.</pre>
    </div><div id="c107" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c107">Comment 107</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">msh210</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 07:21:39 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to Kevin Norris's <a href="show_bug.cgi?id=6455#c106">comment #106</a>)
<span class="quote">&gt; If it is, I intend to bring it up on [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=WP%3AVPT">WP:VPT</a>]] or somewhere and make the
&gt; following proposal:
&gt; 
&gt; &quot;There is community consensus to enable StringFunctions; if the developers do
&gt; not enable it themselves, the community hereby requests that the WMF instruct
&gt; the developers to do so.&quot;</span >

If you do bring up such a proposal on-wiki, please link to it in a comment on this bug so that people on other wikis know. Thanks.</pre>
    </div><div id="c108" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c108">Comment 108</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rich Farmbrough</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 14:49:13 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm pretty sure it would garner extensive support.  

#Pro: less server load
#Pro: less page breakage
#Pro: easier template programming
#Pro: faster page load/render times
#Pro: less obscure limits on lengths
#Pro: less templates which work fine in test but are useless on an actual page

#Con: If we implement a scripting language we may need to migrate some stuff - which we would anyway.

Things have moved on in four years, but we are still struggling with ancient functionality. Wikia has more powerful facilities than the WMF projects.

I'm disappointed someone re-closed the bug, it was not re-opened lightly.

Anyone in doubt as to the importance of this bug is invited to look at VP(T) where I believe almost half the threads are related to it.</pre>
    </div><div id="c109" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c109">Comment 109</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Happy-melon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 15:49:52 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c108">comment #108</a>)
<span class="quote">&gt; I'm pretty sure it would garner extensive support.  
&gt; ...
&gt; Anyone in doubt as to the importance of this bug is invited to look at VP(T)
&gt; where I believe almost half the threads are related to it.</span >

You[1] are making a mistake in assuming that if the enwiki community supports a technical change then, ipso facto, that change should be implemented, irrespective of any 'big picture' considerations.  You're[1] not in Kansas any more; the consensus of the enwiki community is not sovereign here.  

<span class="quote">&gt; I'm disappointed someone re-closed the bug, it was not re-opened lightly.</span >

It was re-opened mistakenly under a [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=WP%3ABRD">WP:BRD</a>]] principle which just doesn't apply here.  It is perfectly acceptable to comment, where appropriate, on closed bugs; the status applies only to the bug title, not to the discussion underneath.  Tim has said that the status of the request &quot;Set $wgPFEnableStringFunctions=true on WMF wikis&quot; is WONTFIX; that conclusion stands until something (maybe discussion under the closed bug, maybe something else) convinces *him* or *another sysadmin of equal standing* to reconsider it.  Someone else changing the status does not somehow reshape the world to make it so.

[1] I'm speaking generally, not to anyone specifically.</pre>
    </div><div id="c110" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c110">Comment 110</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Aryeh Gregor (not reading bugmail, please e-mail directly)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 16:33:30 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c108">comment #108</a>)
<span class="quote">&gt; #Pro: less server load
&gt; #Pro: faster page load/render times</span >

Experience has shown that people will just write pages that use up whatever the resource limits are.  They'll use the functions to write still more complicated templates, which currently they can't write because of preinclusion size limits.  It's not at all obvious it will make anything faster, it will just allow more complexity for the same length limit.

In support of this, observe that ParserFunctions was only introduced to provide a sane replacement for [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Template%3AQif">Template:Qif</a>]], much as this bug requests that StringFunctions be enabled to replace [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Template%3AStr%20len">Template:Str len</a>]] and friends.  The explosion of template complexity after ParserFunctions were turned on would have been impossible (given performance limits) with template hacks.  It's a certainty that that will happen again if we enable StringFunctions, with template editing becoming even more arcane.

Maybe we should enable the string functions, but reduce preinclusion length limit, or impose other limits on template complexity.

<span class="quote">&gt; #Pro: less page breakage</span >

How so?

<span class="quote">&gt; #Pro: easier template programming</span >

Not if things get even more complicated to compensate, which they will.

<span class="quote">&gt; #Pro: less obscure limits on lengths</span >

The limits on length will be the same, it's just people will write even more complicated templates to use up the length limits.

#Con: Templates like {{str len}} will no longer count as much against the length limit, so the effective limit will be higher and people will be able to make even more complicated and unmaintainable wikitext pages for things that should have been written in a real language to start with.


I agree that enabling string functions is the lesser evil, but it's still evil.  People shouldn't have been writing programs in wikitext to begin with, they should use proper scripts of some type -- extensions or bots or such.  Personally I'd also be okay with restricting or disabling any functions that people are abusing to emulate string functions, like padright/left, but that would be much more disruptive, and people will always find ways to abuse innocent functionality.  So unless someone is willing to implement a systematic solution like a Lua extension, we may as well resign ourselves to making template programming less painful.</pre>
    </div><div id="c111" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c111">Comment 111</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 17:21:09 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt;...abuse...</span >

It's not abuse (which would be putting good tools to bad use), this is putting bad tools to good use.

<span class="quote">&gt;...proper scripts...extensions...</span >

Yes, this seems to be the vicious circle we're in... someone *has* written an extension, but what good did it do him - we're now deprived of the use of the extension, just in case someone &quot;abuses&quot; it by making better use of it than was anticipated. It would obviously be much much better to have non-trivial logic compiled into the software than to do it via templates, but what choice are we given?</pre>
    </div><div id="c112" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c112">Comment 112</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Marcus Buck</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 19:35:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >As far as I can see all of the StringFunctions are already present in template-implemented versions now. Just in an inefficient way. So any &quot;abuse&quot; (quotation marks because of Le Chat's good remark) would be possible already now.

Does anybody have any ideas in which direction possible &quot;abuse&quot; could go? I cannot think of any new class of functionality that would become possible if we allowed StringFunctions. The template-based string functions too were not enabled by ParserFunctions alone. Template-based string functions would be impossible without &quot;padleft:&quot; and &quot;padright:&quot;. These two are string functions. It's clear that when you provide a single string function and simple logic, that other string functions can be emulated. That door was left open and people walked through. But if StringFunctions do not open new doors nothing bad can happen. I don't see open doors in them. If you do see them, please report.

I guess we can safely assume that when you provide functionality people will _always_ test the limits of the functionality. It doesn't matter how few or how amazingly much functionality you provide. They will test it limits. It's almost a law of nature. That's normal and we will never have success with &quot;We provide this functionality but please don't fully utilize it&quot;.

We have to put limitations on functionality because we need to limit the computation cost and rendering time. If we replace the template-based string functions with extension-based StringFunctions we will reduce computation cost and rendering time. That's a good thing. If you want to secure that this gain will not be consumed by increased use of the functions then set limitations on how many instances of the functions can be called on a single page.

By the way, I'm sure there are wikis with activated StringFunctions. Are there any reports that these wikis had problems with it? If there are any open doors in them, I'm sure somebody must have discovered them already!?</pre>
    </div><div id="c113" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c113">Comment 113</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Phillip Patriakeas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-19 20:01:14 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c112">comment #112</a>)
<span class="quote">&gt; By the way, I'm sure there are wikis with activated StringFunctions. Are there
&gt; any reports that these wikis had problems with it? If there are any open doors
&gt; in them, I'm sure somebody must have discovered them already!?</span >

Wikia - *all* of Wikia - has had StringFunctions enabled for years. I've never heard about any problems they've had as a result of this.</pre>
    </div><div id="c114" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c114">Comment 114</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Tisza Gergő</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-20 11:35:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c110">comment #110</a>)
<span class="quote">&gt; Experience has shown that people will just write pages that use up whatever the
&gt; resource limits are.  They'll use the functions to write still more complicated
&gt; templates, which currently they can't write because of preinclusion size
&gt; limits.  It's not at all obvious it will make anything faster, it will just
&gt; allow more complexity for the same length limit.
&gt; [...]
&gt; Maybe we should enable the string functions, but reduce preinclusion length
&gt; limit, or impose other limits on template complexity.</span >

You make it sound as if complexity would be a bad thing in itself. That is not so - complex tasks require complex solutions, most of the time. MediaWiki itself has become much more complex along the years, the editing workflow became more complex, Vector was a huge jump in the complexity of the editing GUI, and so on. Everyone accepts these as necessary, so why not the same for complex templates? Seems like a bit of NIH syndrome to me (or more precisely, Not Invented By Us, because it *is* invented here, just not by the developers).

I sense a good amount of developer hubris in the debates about templates - &quot;you should leave this stuff to us, we could do it better&quot;. Sure you could - but you could do much less of it. By the same account, we should leave writing encyclopedia articles to professionals, because they are much better at it (except that Nupedia had some 100 articles after three years). This line of thinking is completely contrary to Wikipedia philosophy. Wikipedia is about generativity, community empowerment and ultra-low barriers to entry - you can't seriously suggest that making a feature request and waiting for some developer to pick it up every time someone needs a new template would be a scalable approach.

<span class="quote">&gt; People shouldn't have been writing programs in wikitext to begin with, they
&gt; should use proper scripts of some type -- extensions or bots or such. </span >

This gets thrown around a lot, but how those proper scripts could replace the current template system is never demonstrated. Bots are not much help with dynamic text (and do have problems of their own, like littering page histories). Extensions, as I tried to point above, are not scalable (whatever you might think of the template syntax, it is a lot easier to learn than writing secure and scalable MediaWiki extensions, and we didn't even consider yet the epic fail of code review). The conclusion of the bug about Lua was that templates using scripts interpreted by some external tool are out of the question - they have security issues, and they would break compatibility of Wikipedia with pretty much all other MediaWiki installations. What is left then? Inventing another template language and writing another parser in PHP? IIRC Werdna actually offered to do that and was turned down, because that is still not a &quot;proper&quot; solution. The proper solution, apparently, is to deny the Wikimedia community of a useful tool, out of purely aesthetic reasons.</pre>
    </div><div id="c115" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c115">Comment 115</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Victor Vasiliev</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-20 12:20:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c114">comment #114</a>)
<span class="quote">&gt; What is left then? Inventing another template language and writing another
&gt; parser in PHP? IIRC Werdna actually offered to do that and was turned down,
&gt; because that is still not a &quot;proper&quot; solution.</span >

I was working on a template scripting extension called InlineScripts. It is in Subversion and it was working last time I checked (it's most severe problem was the documentation, or, to be more specific, the absence of it). It was discussed on the developers' conference in April and the only reason I stopped working on it was the lack of time.</pre>
    </div><div id="c116" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c116">Comment 116</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 02:18:18 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I would like to add a concrete example to this debate, an actual use case.

Many entries in Wikipedia describe some sort of phylogenetic data, from genealogies, to the phylogenies of language families, to Y and mitochondrial DNA haplogroups.

A standard way of representing such trees is through the Newick format:
<a href="http://en.wikipedia.org/wiki/Newick_format">http://en.wikipedia.org/wiki/Newick_format</a>

There are all sorts of template hacks in Wikipeida to represent family trees, genetic trees, language families, and all sorts of other related information.

Wouldn't it be better to just add the standard Newick format tree representation to articles, and then use templates to display the data in various sorts of ways? The fundamental information would then be preserved in a standardized display-independent format. Also there are a large number of tools out there that can generate graphic images based on the Newick format. 

It isn't very difficult to parse a Newick format string and create a basic tree display template from it. However, all this really would need is a full set of string functions. It's true that PHP and MediaWiki wasn't designed to be a kind of parser or compiler, but what sort of alternative can anyone think of?
Should we put in a request for MediaWiki developers to support the Newick format, and any number of other important display-independent representations of data widely used in Wikipedia? Who decides, and who does the work?

There is a good argument to &quot;doing it right&quot; and implementing a full scripting language (aside from Javascript?) but in the meantime, all sorts of important data that can't quite be represented as text is being added to Wikipedia in the form of templates. How can all the various sorts of tree data now in Wikipedia be extracted - or just redisplayed using whatever new and better display template comes along?

I don't know if this can be added as a &quot;bug&quot; in and of itself, but it it does point out the fundamental problem. MediaWiki has text, graphic, audio, and video formats, but is missing the ability to parse certain other critical basic information storage formats that the developers never considered.</pre>
    </div><div id="c117" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c117">Comment 117</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Gurch</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 04:34:31 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c106">comment #106</a>)
<span class="quote">&gt; &quot;There is community consensus to enable StringFunctions; if the developers do
&gt; not enable it themselves, the community hereby requests that the WMF instruct
&gt; the developers to do so.&quot;</span >

That's not really how it works. The developers *are* WMF, or at least a subset thereof. (Or were you under the impression that volunteer devs opinions' mattered in such cases? LOL)</pre>
    </div><div id="c118" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c118">Comment 118</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alex Z.</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 06:23:56 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c116">comment #116</a>)
<span class="quote">&gt; It isn't very difficult to parse a Newick format string and create a basic tree
&gt; display template from it. However, all this really would need is a full set of
&gt; string functions. It's true that PHP and MediaWiki wasn't designed to be a kind
&gt; of parser or compiler, but what sort of alternative can anyone think of?
&gt; Should we put in a request for MediaWiki developers to support the Newick
&gt; format, and any number of other important display-independent representations
&gt; of data widely used in Wikipedia? 
&gt; </span >
...
<span class="quote">&gt; I don't know if this can be added as a &quot;bug&quot; in and of itself, but it it does
&gt; point out the fundamental problem. MediaWiki has text, graphic, audio, and
&gt; video formats, but is missing the ability to parse certain other critical basic
&gt; information storage formats that the developers never considered.</span >

This is kind of the main argument against string functions. Letting users create parsers in wikitext is pretty much exactly the kind of thing that those against it want to avoid. Wikitext is not supposed to be a programming language.[1] This is also a good example of what Aryeh was talking about in <a href="show_bug.cgi?id=6455#c110">comment #110</a>.

A well-defined language that has applications in thousands of pages is an excellent candidate for something that should be handled by an extension.

<span class="quote">&gt; Who decides, and who does the work?</span >

The same person who decides whether or not to enable string functions would decide to enable a Newick extension. Anyone who knows PHP can do the work.

[1] <a href="http://lists.wikimedia.org/pipermail/wikitech-l/2009-June/043609.html">http://lists.wikimedia.org/pipermail/wikitech-l/2009-June/043609.html</a></pre>
    </div><div id="c119" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c119">Comment 119</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Kevin Norris</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 08:08:12 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c117">comment #117</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=6455#c106">comment #106</a>)
&gt; &gt; &quot;There is community consensus to enable StringFunctions; if the developers do
&gt; &gt; not enable it themselves, the community hereby requests that the WMF instruct
&gt; &gt; the developers to do so.&quot;
&gt; 
&gt; That's not really how it works. The developers *are* WMF, or at least a subset
&gt; thereof. (Or were you under the impression that volunteer devs opinions'
&gt; mattered in such cases? LOL)</span >

The non-volunteer devs *work for* the WMF.  If the WMF decides to listen to the community (and that's a big if), I don't think the devs can reasonably say no.

What's more, the developers are primarily responsible for making functionality the community wants available to the community.  They aren't doing that here, and that's a Bad Thing.</pre>
    </div><div id="c120" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c120">Comment 120</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Happy-melon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 11:44:02 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c119">comment #119</a>)
<span class="quote">&gt; The non-volunteer devs *work for* the WMF.  If the WMF decides to listen to the
&gt; community (and that's a big if), I don't think the devs can reasonably say no.
&gt; 
&gt; What's more, the developers are primarily responsible for making functionality
&gt; the community wants available to the community.  They aren't doing that here,
&gt; and that's a Bad Thing.</span >

You're confusing developers (who write code for new features) with sysadmins (who manage the servers and turn features on and off).  The developers are their own community around their own project: the MediaWiki software.  That community is structured slightly differently to a wiki community (there is a clear hierarchy of authority and other different ways of doing things) but fundamentally it is a volunteer project like any of the WMF's others: developers code things that interest them.  Most developers work on areas of MediaWiki which will be of use on Wikimedia wikis, as seeing their code in action on the world's 6th largest website is the most tangible reward for their time, but neither the paid nor unpaid devs are beholden to the other WMF communities (and please remember that enwiki is just one of 800 such groups); any more than one wiki community is beholden to another.  Many developers work on parts of MediaWiki which will never be installed on Wikimedia wikis.  To say that &quot;&quot;the developers are primarily responsible for making functionality the community wants available to the community&quot;&quot; is arrogant and false.

The *sysadmins*, most (but not all) of whom are also active developers, are the ones who decide which components of MediaWiki are installed on WMF wikis.  There is a strict hierarchy amongst sysadmins, and most of them are WMF paid staff.  They *are* expected to take the communities' sentiments into account when making changes, and they are indeed accountable to the Foundation.  The sysadmin you're talking about here reports directly to the Foundations' CTO; the CTO reports to the CEO, and the CEO reports to the board.  The sysadmin who has made this decision is 'above' 90% of the Foundations' paid staff in the organisational hierarchy.  Where, exactly, are you planning to go to get this decision overturned?</pre>
    </div><div id="c121" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c121">Comment 121</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 12:00:04 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt;Where, exactly, are you planning to go to get this</span >
decision overturned?

Rather than initiate some kind of power battle, I think we ought simply to politely draw the sysadmin's attention to this discussion and the apparently strong arguments in favour of changing this decision, and hope that he'll now be persuaded. (If it's Tim Starling, then I've already left a note on his en.wp user page, though others may know of more effective ways of giving him a friendly poke.)</pre>
    </div><div id="c122" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c122">Comment 122</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Max Semenik</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-21 12:42:08 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c121">comment #121</a>)
<span class="quote">&gt; Rather than initiate some kind of power battle, I think we ought simply to
&gt; politely draw the sysadmin's attention to this discussion and the apparently
&gt; strong arguments in favour of changing this decision, and hope that he'll now
&gt; be persuaded. (If it's Tim Starling, then I've already left a note on his en.wp
&gt; user page, though others may know of more effective ways of giving him a
&gt; friendly poke.)</span >

Thinking that he doesn't know about this bug or that he is not watching it is way too naive, so all your pokes do nothing but annoyance.</pre>
    </div><div id="c123" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c123">Comment 123</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-22 23:22:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c122">comment #122</a>)
<span class="quote">&gt; &gt; If it's Tim Starling, then I've already left a note on his en.wp user page,
&gt; Thinking that he doesn't know about this bug or that he is not watching it is
&gt; way too naive, so all your pokes do nothing but annoyance.</span >

Actually, based on my experience with other big projects I (used to) be part of, this bug reads 123 comments as of right now. My humble guess is that Tim no longer bothers to read this bug, probably has it on his ignore list for a long time already. And I'd fully understand him. The decision has been made (I hope it was not taken lightly) and none of the above changes that (though it pollutes what should have been a technical discussion). The only reason I still read this bug is that it is getting funny, and not because I am interested in it as a dev..

jsimlo


ps. Yes, this comment also pollutes this bug. But I simply no longer see any cons of doing it.. :)</pre>
    </div><div id="c124" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c124">Comment 124</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-23 05:13:36 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><span class="quote">&gt;none of the above changes that </span >

It should change it really, as we now know that (a) there is continuing user demand for this functionality (b) nothing is happening or likely to happen towards providing it in any other sensible way than the one proposed (c) the use of the very inefficient workarounds without ill effect, the use of the proposed functions on Wikia, etc. prove that this functionality will not (as feared) damage performance. Presumably sysadmins don't have completely closed minds, and are capable of listening to users and arguments and taking a second look at past decisions...</pre>
    </div><div id="c125" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c125">Comment 125</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-23 06:16:45 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c124">comment #124</a>)
<span class="quote">&gt; It should change it really, as we now know that (a) there is continuing user
&gt; demand for this functionality (b) nothing is happening or likely to happen
&gt; towards providing it in any other sensible way than the one proposed (c) the
&gt; use of the very inefficient workarounds without ill effect, the use of the
&gt; proposed functions on Wikia, etc. prove that this functionality will not (as
&gt; feared) damage performance. Presumably sysadmins don't have completely closed
&gt; minds, and are capable of listening to users and arguments and taking a second
&gt; look at past decisions...</span >

Hahahahaha

You're obviously not very familiar with Wikimedia's software development processes. Right now, some of this ParserFunctions mess (and its use in high use templates like &quot;Template:Cite&quot;) cause page renderings to take upward of 30 seconds on a large article. And still nobody cares.™  If you think a bit of whining (or is it whinging?) in bug comments or attempting to rally some folks on a village pump is going to push anything forward, you're insane. You'd be better off trying to raise some money for a grant, to be honest. (Though not really; Wikimedia is apparently trying to stop accepting money with strings attached.)

If you wrote an extension that implemented JavaScript into MediaWiki templates that also doubled as donation-related software, you might be able to attract some attention to this bug before the 12th of Never. ;-)  Otherwise, it's probably best to save your energy for battles you can possibly win.</pre>
    </div><div id="c126" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c126">Comment 126</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Le Chat</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-23 07:29:13 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Don't see any reason for the negativity and sarcasm concerning this bug (as in comment above) - it's just a perfectly normal and well-reasoned feature request, which will actually *reduce* these page-rendering times you mention, and will hopefully be considered on its technical merits.</pre>
    </div><div id="c127" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c127">Comment 127</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-23 22:42:44 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c126">comment #126</a>)
<span class="quote">&gt; Don't see any reason for the negativity and sarcasm concerning this bug
&gt; (as in comment above) - it's just a perfectly normal and well-reasoned
&gt; [...] and will hopefully be considered on its technical merits.</span >

Simply put: I do see one. No, it is not. I thought it was back then.

The long story short: I've developed these StringFunctions (not all by myself of course, there were subsequently three of us:) because I needed them back then in my own wikies. Then someone started this bug and Tim said no. Then we, out of interest, tried to optimize the extension to be more &quot;suitable&quot; for wikimedia cluster. And again, Tim said no. Then someone managed to merge StringFunctions into ParserFunctions, which were/are installed on wikimedia cluster. And guess what happend: Tim said no. If it ain't clear already, Tim had his chance to reconsider.

The only thing left now is: Let it go. The more comments are posted into this bug, the more it becomes and unusable kid chat wall. No developer is probably going to invest into reading thru a hundred of comments, even if a nugget of gold was lost somewhere within. ...Ahh, who am I kiddin? This attempt of explanation is pointless anyway..</pre>
    </div><div id="c128" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c128">Comment 128</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Phillip Patriakeas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-24 02:45:54 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I've filed <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable or install string parsing wikimarkup functionality on WMF wikis"
   href="show_bug.cgi?id=26092">bug 26092</a> for *some* form of string parsing functionality to be enabled on WMF wikis, could we please maybe try to keep from turning it into the same mess this bug is (i.e. if you have something *useful* to contribute, by all means do, but if not, no comments saying &quot;we need this soooo bad, the devs aren't being [fair/reasonable/humane/etc]&quot;)?

Not sure if this bug should be marked as blocking it, but it probably doesn't matter anyways since this one is closed.</pre>
    </div><div id="c129" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c129">Comment 129</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Juraj Simlovic</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-24 19:56:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c128">comment #128</a>)
<span class="quote">&gt; I've filed <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable or install string parsing wikimarkup functionality on WMF wikis"
   href="show_bug.cgi?id=26092">bug 26092</a> for</span >

Unbelievable! :)) Yesterday, I was kinda wondering if there was any way of luring someone into creating a brand new bug as a copy of this one. Despicable me, sorry about that.. :) Of course this solves nothing, but right now I am $50 richer! And all it took was mentioning the devs' reluctancy to read some hundred of comments.. :)))))

ps. Perhaps I should be banned for disrupting, but it was worth it.</pre>
    </div><div id="c130" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c130">Comment 130</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Phillip Patriakeas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-11-24 23:48:21 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c129">comment #129</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=6455#c128">comment #128</a>)
&gt; &gt; I've filed <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable or install string parsing wikimarkup functionality on WMF wikis"
   href="show_bug.cgi?id=26092">bug 26092</a> for
&gt; 
&gt; Unbelievable! :)) Yesterday, I was kinda wondering if there was any way of
&gt; luring someone into creating a brand new bug as a copy of this one. Despicable
&gt; me, sorry about that.. :) Of course this solves nothing, but right now I am $50
&gt; richer! And all it took was mentioning the devs' reluctancy to read some
&gt; hundred of comments.. :)))))
&gt; 
&gt; ps. Perhaps I should be banned for disrupting, but it was worth it.</span >

Actually, I'd been thinking about it for a while, I just finally decided to stop being lazy and do it already. =)</pre>
    </div><div id="c131" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c131">Comment 131</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dmitriy Sintsov</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-12-29 08:09:35 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c99">comment #99</a>)
<span class="quote">&gt; (In reply to <a href="show_bug.cgi?id=6455#c98">comment #98</a>)
&gt; &gt; MZ, are you seriously suggesting that the developers will completely
&gt; &gt; re-implement an extension, when the concerns about the original are *not*
&gt; &gt; implementation-specific?  I seriously doubt that.
&gt; 
&gt; I'm suggesting that the sysadmins in charge of running Wikimedia wikis have
&gt; said rather unequivocally that this extension is not going to be installed. The
&gt; StringFunctions extension is a means to an end. There are plenty of other ways
&gt; to implement string manipulation. For years, there has been discussion of
&gt; implementing a proper programming language into MediaWiki. The current
&gt; preferred favorite is not Lua, but JavaScript, actually.
&gt; </span >
If JavaScript is the language of choice, there is PHP SpiderMonkey extension. It still is not absolutely stable (only a beta), however I know that some WMF programmers are good in C, so it is probably possible to make few fixes. The question is, how to make these scripts run at &quot;ordinary&quot; hosters, where there will be no such PHP extension. In such case, one might try client-side JavaScript (in browser), however passing of function / template parameters from server side to client side might become too inefficient. Perhaps one might limit the JS language features to basic subset. Then to run it through PHP mod, when available, slowly interpret in PHP otherwise. Co-location (where you can compile and install PHP mod yourself) have become more affordable in last years, anyway.</pre>
    </div><div id="c132" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c132">Comment 132</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dmitriy Sintsov</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-12-29 09:05:23 UTC
        </span>
      </div>



<pre class="bz_comment_text" >The mod can also register PHP classes in JS:
<a href="http://devzone.zend.com/article/4704">http://devzone.zend.com/article/4704</a>

There is also interesting JavaScript-based server Jaxer:
<a href="http://jaxer.org/">http://jaxer.org/</a>

It allows to share a lot of server-side and client-side code. For example, it allows to run server-side jQuery. Things like parsers could be written in JavaScript then used at both sides, thus minimizing the code duplication.</pre>
    </div><div id="c133" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c133">Comment 133</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2010-12-29 09:10:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c132">comment #132</a>)

These are interesting, yes. However, these comments are really outside the scope of this bug. File a separate bug (if there isn't one already) or start a thread on the <a href="mailto:wikitech-l&#64;lists.wikimedia.org">wikitech-l&#64;lists.wikimedia.org</a> mailing list if you're interested in further discussion about this.</pre>
    </div><div id="c134" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c134">Comment 134</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Mark A. Hershberger</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-09-24 18:02:19 UTC
        </span>
      </div>



<pre class="bz_comment_text" >*** <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED DUPLICATE - suggestion for magic words"
   href="show_bug.cgi?id=31136">Bug 31136</a> has been marked as a duplicate of this bug. ***</pre>
    </div><div id="c135" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c135">Comment 135</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel A. R. Werner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-11-17 13:44:38 UTC
        </span>
      </div>



<pre class="bz_comment_text" >One argument brought up a few times, against string functions, that people would always go to the limits of whats possible in template programming and just write more complicated templates with string functions enabled might be true. So why not simply scale down the limits after installing these functions?
Existing string templates can be re-written as wrappers for using string functions, functionality wouldn't even be broken, we would have lower limits for whats possible using templates and functions but we would have more powerful and sane functions provided. They could be used in a sane way as they are being used right now with less load on the servers.</pre>
    </div><div id="c136" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c136">Comment 136</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Happy-melon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-11-17 16:21:12 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c135">comment #135</a>)
<span class="quote">&gt; So why not simply scale down the limits after installing these functions?
&gt; Existing string templates can be re-written as wrappers for using string
&gt; functions, functionality wouldn't even be broken, we would have lower limits
&gt; for whats possible using templates and functions but we would have more
&gt; powerful and sane functions provided. They could be used in a sane way as they
&gt; are being used right now with less load on the servers.</span >

Template limits are not just hit using string functions, indeed they're not even the major cause.  The citation templates used on a large article consume much more of the template resources than string functions, as well as stupid things like the innumerable {{SubatomicParticle}} calls (and their endless subtemplates) on [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=List%20of%20baryons">List of baryons</a>]] etc.  Reducing the template limits would break all these cases, and they're not scenarios which could be 'fixed' with proper string functions.</pre>
    </div><div id="c137" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c137">Comment 137</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dan Wolff</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-11-17 16:28:16 UTC
        </span>
      </div>



<pre class="bz_comment_text" >A solution would be to define how expensive a parser function is, and set the string functions as &quot;expensive&quot; while not changing anything else. That way, other parser functions would work as they currently do, while we get the power of string functions, just that you can't use so many.

(I think there is already something like this in place already for some parser functions - not sure though)</pre>
    </div><div id="c138" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c138">Comment 138</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rich Farmbrough</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-30 17:07:15 UTC
        </span>
      </div>



<pre class="bz_comment_text" >There is, but we have seen no evaluation of &quot;expensive&quot; - result is that stuff that is essential is split over several pages...

Cite templates would benefit enormously from parser functions, instead of jumping through hoops, simple tests can be made about whether something has a full stop at the end already or not.

The bug should be changed form WONTFIX, keeping it at that status because of a stray comment on a mailing list years ago, when at Wikimania 2011 Tim was undecided as to which solution (parser functions, scripting language or Victor's extension) was best. 

Really I have looked at all three, ANY ONE WILL DO. And if you change your mind from parser functions to one of the others, I WILL PERSONALLY MIGRATE ALL TEMPLATES TO THE NEW SOLUTION. 

I am re-opening this bug.  Please do not casually re-close it.</pre>
    </div><div id="c139" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c139">Comment 139</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 03:40:25 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Finally, some common sense here.

There are a huge number of templates that now do pretty much everything. My personal interest is in displaying trees and phylogenies. These are incredibly hard to edit now, not even worth it. I've tried to edit genealogical trees, and have given up, because the &quot;presentation&quot; is mixed up with the data. My browser would crash before I could even get part of it right by repeated experimentation. 

&quot;Expensive&quot;? All of these &quot;hoops&quot; that everyone has to go though to validate templates without any sort of parser functions really has a collective impact on MediaWiki and Wikipedia. &quot;NO solution&quot; is much much worse than a an attempt at a &quot;bad solution&quot;. 

I don't think anyone even realizes the *lack* of editing by knowledgeable people that is taking place, because of the sheer difficulty in editing data that is not text or inline images. There's a price here, and it isn't whether &quot;this or that implementation of trim()&quot; regular expressions is more or less efficient.

It's been 5 1/2 years since this bug was first opened. 
Maybe someone can get moving on it before a decade has passed?</pre>
    </div><div id="c140" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c140">Comment 140</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 04:11:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Are string functions &quot;really&quot; the solution to the difficulty of editing specialized data.

To me that sounds like a really horrible solution that won't actually solve the issue. If data really is complex then string functions sound like something that will only allow a change to 'another' string based data format that will still be too complex for the knowledgeable people to edit.

I'd like to see some of those complex data formats. I'm pretty sure that for the most of them the real optimal thing they need is specialized code in a proper programming language to create a format that knowledgeable people can actually understand. And perhaps even add in a ui to make that possible.</pre>
    </div><div id="c141" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c141">Comment 141</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jim Craigie</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 04:34:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >String functions certainly are a solution to the problem that brought me here - attempting to construct a template to create the slightly unusual URLs used by an external site, which requires replacing each instance of a non-alphanumeric character by an underbar. Easy to do with {{#replace:}}

I was horrified to discover that a perfectly good solution has been implemented but its activation is being blocked for reasons I still cannot understand.</pre>
    </div><div id="c142" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c142">Comment 142</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Bawolff (Brian Wolff)</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 04:55:28 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This is pointless. Can we stop beating the dead horse already?</pre>
    </div><div id="c143" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c143">Comment 143</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 05:31:37 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Yes, string functions they are *a* solution, that can work right now. 
Why? How would you implement parsing of say a Newick file, or any specialized data format that you didn't know about yourself, beforehand? 

There are hundreds of such data formats. Some may be very useful for common sorts of representations in Wikipedia. Will we have to open a bug for each and every one, then hardcode a parser for it, then have someone update that parser whenever a slight change in the format comes out? Or would you rather just implement AJAX and Java instead? 

BTW, how complex is it to parse a phylogenetic tree format which merely uses nested parentheses, and then display it, when these can be copied from anywhere?
<a href="http://en.wikipedia.org/wiki/Newick_format">http://en.wikipedia.org/wiki/Newick_format</a>

The point is that often data in these specialize formats *already exists* out there, somewhere, and just needs to be displayed. 

If you mean &quot;stop beating a dead horse and just release these functions&quot; I say yes. But if you mean &quot;stop asking for them, you'll never ever get them, forget it  ... &quot;</pre>
    </div><div id="c144" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c144">Comment 144</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 05:38:11 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Examples?
Here is the complete grammar for the &quot;complex specialized&quot; Newick format:

The grammar rules

Note, &quot;|&quot; separates alternatives.

   Tree --&gt; Subtree &quot;;&quot; | Branch &quot;;&quot;
   Subtree --&gt; Leaf | Internal
   Leaf --&gt; Name
   Internal --&gt; &quot;(&quot; BranchSet &quot;)&quot; Name
   BranchSet --&gt; Branch | BranchSet &quot;,&quot; Branch
   Branch --&gt; Subtree Length
   Name --&gt; empty | string
   Length --&gt; empty | &quot;:&quot; number

Examples:

(,,(,));                               no nodes are named
(A,B,(C,D));                           leaf nodes are named
(A,B,(C,D)E)F;                         all nodes are named
(:0.1,:0.2,(:0.3,:0.4):0.5);           all but root node have a distance to parent
(:0.1,:0.2,(:0.3,:0.4):0.5):0.0;       all have a distance to parent
(A:0.1,B:0.2,(C:0.3,D:0.4):0.5);       distances and leaf names (popular)
(A:0.1,B:0.2,(C:0.3,D:0.4)E:0.5)F;     distances and all names
((B:0.2,(C:0.3,D:0.4)E:0.5)F:0.1)A;    a tree rooted on a leaf node (rare)</pre>
    </div><div id="c145" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c145">Comment 145</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 05:40:53 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Here is an example of a current genealogical tree, using templates:

<a href="http://fr.wikipedia.org/wiki/Rachi#G.C3.A9n.C3.A9alogie">http://fr.wikipedia.org/wiki/Rachi#G.C3.A9n.C3.A9alogie</a>

=== Généalogie ===
&lt;center&gt;
{{Arbre généalogique/début|style=font-size:75%;}}
{{Arbre généalogique | SAM | | | | | | | | | | | | | | |RSH| | | |SAM=Samuel|RSH='''Rachi ([[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1040">1040</a>]]-[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1104">1104</a>]])'''}}
{{Arbre généalogique | |!| | | | |,|-|-|-|-|-|-|-|v|-|-|-|^|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|.}}
{{Arbre généalogique |SMH| | |RHL|-|AZR| |KVD|v|RMB| | | | | | | | |SMA| | |MRM|v|YBN||SMH=Simha ben Samuel de Vitry| RHL=Rachel ''Bellassez''| AZR=Eliézer ''Jocelyn'' | KVD=Yokheved | RMB=Meïr ben Samuel | MRM=Myriam | YBN=Judah ben Nathan | SMA=Shémaiah}}
{{Arbre généalogique | |!| | | |,|-|-|-|v|-|-|-|v|-|-|^|-|-|-|-|v|-|-|-|.| | | |!| | | | |,|-|^|-|.}}
{{Arbre généalogique |SAM|v|HAN| |SLM| |RTM|v|MRM| |RVM| |SBM|v|INC| | |YTV| |AZR|SAM=Samuel de Vitry|HAN=Hanna| SLM=Salomon |RTM=[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Rabb%C3%A9nou%20Tam">Rabbénou Tam</a>]] (~[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1100">1100</a>]]-[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1171">1171</a>]])|MRM=Myriam |RVM=Isaac Rivam|SBM=Samuel [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Rashbam">Rashbam</a>]] (~[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1085">1085</a>]]-[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1158">1158</a>]])|INC=?|YTV=Yom Tov de Falaise|AZR=Eléazar }}
{{Arbre généalogique | | | |!| | | | | |,|-|-|-|v|-|^|-|v|-|-|-|.| | | | | |!| | | |,|-|-|^|-|-|-|.}}
{{Arbre généalogique | | |RI| | | |ITS| |SLM| |MSH| |ISF| | | |ITS | |YHD| | | | |ISF|RI=[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Isaac%20ben%20Samuel%20de%20Dampierre">Isaac ben Samuel de Dampierre</a>|Isaac de Dampierre]] dit le Ri (~[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1120">1120</a>]]-[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1195">1195</a>]])|ITS=Isaac|SLM=Salomon|MSH=Moïse|ISF=Joseph| YHD=Judah | ITS=Isaac}}
{{Arbre généalogique | | | |!| | | | | | | | | | | | | | | | | | | | | | | | |,|-|-|^|.| | | |,|-|^|.}}
{{Arbre généalogique | | |HNN| | | | | | | | | | | | | | | | | | | | | | |ITS| |AZR|v|BLA| |LAH|HNN=Elhanan (mort [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1184">1184</a>]])|ITS=Isaac|AZR=Eléazar  | BLA=Bila | LAH=Léah}}
{{Arbre généalogique | | | |!| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | |!| | | | | }}
{{Arbre généalogique | | |SML| | | | | | | | | | | | | | | | | | | | | | | | | | | | | |YHD| SML=Samuel|YHD=Judah de Paris Sir Léon ([[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1166">1166</a>]]-[[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=1224">1224</a>]])}}
{{Arbre généalogique/fin}}
&lt;/center&gt;</pre>
    </div><div id="c146" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c146">Comment 146</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Ted Kandell</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 05:48:42 UTC
        </span>
      </div>



<pre class="bz_comment_text" ><a href="http://fr.wikipedia.org/wiki/Rachi#G.C3.A9n.C3.A9alogie">http://fr.wikipedia.org/wiki/Rachi#G.C3.A9n.C3.A9alogie</a>

In the above tree, I need to add a father for Shémaiah and make Shémaiah the father of Eliézer Jocelyn. 

That should be a simple change using the above templates, right? 

No.

= &quot;Lack of string functions&quot;

In the Newick format it would take 1 second, and there are tools to create and edit such files. 

Now think of the hundreds of other easy-to-parse useful standard data formats ...</pre>
    </div><div id="c147" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c147">Comment 147</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Daniel Friesen</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 06:10:07 UTC
        </span>
      </div>



<pre class="bz_comment_text" >This Newick format and that genealogy stuff look like a perfect example of what string functions will NOT solve.

String functions are for simple text replacements and tests. What are you going to do, write a whole Newick parser in string functions? If, and that's a big if given that we don't have variables inside WikiText, you can manage to implement Newick parsing inside of a template. That template is going to be insanely complex, trying to make minor tweaks to the template which would be sane in a normal programming language are going to become so hard it's nearly impossible. And to top it off that template is going to be so heavy that it slows down parsing for every page you use it on (multiplied by how much you use it and how much data you input).

If we have a use for it, then what it sounds like we could use, if we actually have a use for it, would be a real Newick parser. Just as for whatever other formats there are for things that are in fact useful to Wikipedia. Yes there are hundreds of formats, but when we talk about Wikipedia and implementation we only care about the ones that will output things we want on Wikipedia, and within that only the few formats we actually need. We don't have to implement parsing for dozens of formats that do the same thing when there's one format most people can use that'll work.
But I would also like to make the point that what I see as the output of those genealogy I can't consider acceptable. It's horrible, absolutely disgusting. A complete abuse of html tables in a presentational way. I don't want to see a new template that outputs the same garbage. Not only do those need a better system of inputting the information, they need a better output. Something you can't do in templates because it likely involves building a .svg or something.

From what I see of Newick and your example your argument also falls short. Newick seams to describe trees that only branch outwards. But that genealogy tree appears to re-connect at various points. In other words, it looks like your example tree actually CAN'T be expressed in Newick.

Frankly, it looks like you could use DOT. Wonder what happened to graphviz in all this.</pre>
    </div><div id="c148" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c148">Comment 148</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">John Du Hart</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-12-31 06:11:48 UTC
        </span>
      </div>



<pre class="bz_comment_text" >I'm reclosing as WONTFIX.

It's very clear that we're going to have a new solution in the next year to handle these situations. Whether it be Lua, built in Javascript or an extension to handle cite templates. Whatever the fix is, I think the developers have made a point that string functions simply won't be enabled.

Therefore, the bug's original request of setting $wgPFEnableStringFunctions = true on Wikimania wikis will not happen. Hence, WONTFIX.

Please don't change this unless you are a developer.

(In reply to <a href="show_bug.cgi?id=6455#c142">comment #142</a>)
<span class="quote">&gt; This is pointless. Can we stop beating the dead horse already?</span >

Agreed.</pre>
    </div><div id="c149" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c149">Comment 149</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Rich Farmbrough</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-02-24 15:35:22 UTC
        </span>
      </div>



<pre class="bz_comment_text" >It's not about cite templates alone.  And I'm glad you say &quot;we're going to have a new solution in the next year&quot; - Lua has been committed to but it was also the proposed solution back in 2009, and I think it's rather &quot;I will believe it when I see it&quot;.

I don't think injunctions like &quot;Please don't change this unless you are a developer.&quot; are very cool. It is quite possible that Lua will be decided against (as it was before) and then this should be re-opened. 

And the previous &quot;WONTFIX - please don't change&quot; was predicated on a stray remark by Tim Starling in a mail list. At WikiMania 2011 Tim changed his mind several times on the best solution including Lua, parser functions, Victor's scripting extension. 

Or maybe we should change this bug to &quot;provide some form of string handling, and soon&quot; because otherwise we might have Lua kicking around for another 6 years and still be no further forward.</pre>
    </div><div id="c150" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c150">Comment 150</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Happy-melon</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-02-24 15:57:24 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c149">comment #149</a>)
<span class="quote">&gt; I don't think injunctions like &quot;Please don't change this unless you are a
&gt; developer.&quot; are very cool. It is quite possible that Lua will be decided
&gt; against (as it was before) and then this should be re-opened. </span >

Those two comments are in no way exclusive: a developer would be best placed to know if any change occurs to the commitment to Lua.  Although as has been said before, the existence of an alternative is not a prerequisite for WONTFIXing this.
 
<span class="quote">&gt; Or maybe we should change this bug to &quot;provide some form of string handling,
&gt; and soon&quot; because otherwise we might have Lua kicking around for another 6
&gt; years and still be no further forward.</span >

That would be <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable or install string parsing wikimarkup functionality on WMF wikis"
   href="show_bug.cgi?id=26092">bug 26092</a>, of which this bug is a dependency.  Everyone knows that this is an open, important and complicated issue; if changing the title of a bug were all it took to magically untie the gordian knot, we would have done it by now.</pre>
    </div><div id="c151" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c151">Comment 151</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Victor Vasiliev</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-02-25 11:09:05 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c149">comment #149</a>)
<span class="quote">&gt; I don't think injunctions like &quot;Please don't change this unless you are a
&gt; developer.&quot; are very cool. It is quite possible that Lua will be decided
&gt; against (as it was before) and then this should be re-opened. </span >

No, proper scripting language is certainly preferred to string functions in wikitext and I cannot imagine what must happen so we reconsider this.

<span class="quote">&gt; And the previous &quot;WONTFIX - please don't change&quot; was predicated on a stray
&gt; remark by Tim Starling in a mail list. At WikiMania 2011 Tim changed his mind
&gt; several times on the best solution including Lua, parser functions, Victor's
&gt; scripting extension. </span >

Lua is an almost-final choice, made by consensus of WMF developers. Even if we change the language, the current plan is to develop infrastructure which is language-independent (so we can just plug in a different language backend without rewriting anything else).

<span class="quote">&gt; Or maybe we should change this bug to &quot;provide some form of string handling,
&gt; and soon&quot; because otherwise we might have Lua kicking around for another 6
&gt; years and still be no further forward.</span >

It's WMF engineering project now, and as far as I am aware the active work on it should begin shortly after 1.19 deployment and git migration.</pre>
    </div><div id="c152" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c152">Comment 152</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Dmitriy Sintsov</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-02-27 07:55:47 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Victor, I am off from my extension's developing due to various problems, however may I ask you to give an address of the page where the scripting project status will be updated, please? One of my extensions already needs strong scripting language and I wonder whether it is already possible to hook / bind Lua calls in separate MW extension. Basically, I need to have few custom Lua functions bound to PHP methods in extension's code and the possibility to execute Lua scripts which use these function calls.</pre>
    </div><div id="c153" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c153">Comment 153</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Helder</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2012-02-27 09:56:41 UTC
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=6455#c152">comment #152</a>)
<span class="quote">&gt; Victor, I am off from my extension's developing due to various problems,
&gt; however may I ask you to give an address of the page where the scripting
&gt; project status will be updated, please?</span >
I think that would be
<a href="https://www.mediawiki.org/wiki/Lua_scripting/status">https://www.mediawiki.org/wiki/Lua_scripting/status</a></pre>
    </div><div id="c154" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=6455#c154">Comment 154</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">MZMcBride</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-03-25 07:01:47 UTC
        </span>
      </div>



<pre class="bz_comment_text" >Just noting here in a comment that <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Enable or install string parsing wikimarkup functionality on WMF wikis"
   href="show_bug.cgi?id=26092">bug 26092</a> (&quot;Enable or install string parsing wikimarkup functionality on WMF wikis&quot;) has now been marked resolved/fixed. Wikimedia wikis now all have proper string functions (but not StringFunctions) via [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=mw%3AExtension%3AScribunto">mw:Extension:Scribunto</a>]] and [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=mw%3ALua">mw:Lua</a>]]. :-)

Thanks to Brad Jorsch, Tim Starling, Victor Vasiliev, and many others (including the template writers who are now embarking on a massive upgrade) for all of their past, present, and future work on this. It seems we're now on the cusp of greatly reducing parse times of pages, which is really awesome.

Related bugs:

* <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED WORKSFORME - Add functionality (in an extension or MediaWiki) and implement to make English Wikipedia's [[Template:Cite]] work faster"
   href="show_bug.cgi?id=26786">bug 26786</a> – Add functionality (in an extension or MediaWiki) and implement to make English Wikipedia's [[<a href="https://en.wikipedia.org/w/index.php?title=Special:Search&go=Go&search=Template%3ACite">Template:Cite</a>]] work faster

* <a class="bz_bug_link 
          bz_status_RESOLVED  bz_closed"
   title="RESOLVED FIXED - Pages with a high number of templates suffer extremely slow rendering or read timeout for logged in users"
   href="show_bug.cgi?id=19262">bug 19262</a> – Pages with a high number of templates suffer extremely slow rendering or read timeout for logged in users</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>

    <hr><div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=6455&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=6455">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=6455">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=6455">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="head" class="noprint">
			<!-- /search -->
			<div id="p-search">
				<h5><label for="searchInput">Search</label></h5>
				<form id="searchform" action="buglist.cgi" method="get"
				 onsubmit="if (this.quicksearch.value == '')
				 { alert('Please enter one or more search terms first.');
				 return false; } return true;">
					<input type='hidden' name="title" value="Special:Search"/>
					<div id="simpleSearch">
						<input id="searchInput" name="quicksearch" type="text" title="Search Bugzilla [alt-f]" accesskey="f" value="" />
						<button id="searchButton" type='submit' name='button' title="Search Bugzilla for this text">&nbsp;</button>
					</div>
				</form>
			</div>
			<!-- /search -->
			<!-- personal -->
			<div id="p-personal" class="">
				<h5>Personal tools</h5>
				<ul >
							<li id="new_account_container">
								<a href="createaccount.cgi">New&nbsp;Account</a>
							</li>
						<li id="mini_login_container">
  <span class="separator">| </span>
  <a id="login_link" href="show_bug.cgi?id=6455&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('')">Log In</a>

  
  <form action="show_bug.cgi?id=6455" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login"
        onsubmit="return check_mini_login_fields( '' );"
  >
    <input id="Bugzilla_login" 
           class="bz_login"
           name="Bugzilla_login"
           title="Login"
           onfocus="mini_login_on_focus('')"
    >
    <input class="bz_password" 
           id="Bugzilla_password" 
           name="Bugzilla_password"
           type="password"
           title="Password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy" value="password"
           title="Password"
           onfocus="mini_login_on_focus('')"
    >
    <input type="hidden" name="Bugzilla_login_token"
           value="">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "email address",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('')">[x]</a>
  </form>
</li>
<li id="forgot_container">
  <span class="separator">| </span>
  <a id="forgot_link" href="show_bug.cgi?id=6455&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form"
        class="mini_forgot bz_default_hidden">
    <label for="login">Login:</label>
    <input type="text" name="loginname" size="20" id="login">
    <input id="forgot_button" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <input type="hidden" id="token" name="token" value="1419366932-t-KxXXmUkw0xV8GXcHjCdy0ZPLXu7xyT8I6ycTlU0fE">
    <a href="#" onclick="return hide_forgot_form('')">[x]</a>
  </form>
</li>

				</ul>
			</div>
			<!-- /personal -->
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="panel" class="noprint">
				<!-- logo -->
				<div id="p-logo"><a style="background-image: url(skins/contrib/Wikimedia/images/bugzilla-logo.png);" href="./"  title="Visit the main page"></a></div>
				<!-- /logo -->
				<!-- navigation -->
				<div class="portal">
					<h5>Navigation</h5>
					<div class="body">
						<ul><li><a href="query.cgi?format=specific">Search bugs</a></li>
			<li><a href="query.cgi?format=advanced">Advanced search</a></li>
			<li><a href="describecomponents.cgi">Browse projects</a></li>
			<li><a href="enter_bug.cgi">Enter a new bug</a></li>
                        <li>
                                <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
                        </li>	
						</ul>
					</div>
				</div>
				<!-- /navigation -->
				<!-- interaction -->
				<!-- /interaction -->
				<!-- toolbox -->
				<div class="portal">
					<h5>Links</h5>
					<div class="body">
						<ul><li><a href="report.cgi">Reports</a></li>
			<li><a href="weekly-bug-summary.cgi?tops=10&days=7">Weekly Summary</a></li>
				<li>
						<a href="request.cgi">Requests</a>
				</li>
						</ul>
					</div>
				</div>
				<!-- /toolbox -->
			</div>
		<!-- /panel -->		

		<!-- footer -->
		<div id="footer" >
			<ul id="footer-info">
				<li>Bugzilla version 4.4.5</li>
			</ul>

			<ul id="footer-places">
				<li><a href="https://wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Bug_management/Bugzilla_etiquette" title="Bug management/Bugzilla etiquette">Bugzilla etiquette</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:About" title="Project:About">About MediaWiki.org</a></li>
				<li><a href="https://www.mediawiki.org/wiki/Project:General_disclaimer" title="Project:General disclaimer">Disclaimers</a></li>
			</ul>
			<ul id="footer-icons" class="noprint">
				<li id="footer-icon-poweredby"><a href="http://www.bugzilla.org/"><img src="skins/contrib/Wikimedia/images/bugzilla-badge.png" height="31" width="88" alt="Powered by Bugzilla" /></a></li>
			</ul>
			<div style="clear:both"></div>
		<div class="outro"></div>
		</div>
		<!-- /footer -->
	</body>
</html>